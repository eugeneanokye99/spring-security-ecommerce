2026-02-24 07:28:18.761 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7h59m41s763ms313µs).
2026-02-24 07:41:56.537 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m42s154ms917µs100ns).
2026-02-24 07:55:18.766 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.766] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.767 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.767] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.769 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.769] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.770 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.770 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.770] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.771 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.771] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.771 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.771] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.772 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.772] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.772 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.772] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.773 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.773] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.773 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.774 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.774] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.774 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.774] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.775 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.775] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.776 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.776] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.776 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.776] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.777 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.777] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.777 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.777 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.777] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.778 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.778] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.779 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.779] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.779 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.779] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.780 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.780] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.781 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.781] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.782 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.782 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.782] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.783 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.783] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.783 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.783] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.784 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.784] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.784 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.784] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.785 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.785] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.785 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.785 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.785] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.787 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.786] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.788 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.788] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.788 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.788] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.789 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.789] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.789 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.789] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.789 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.789 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.789] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.790 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.790] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.791 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.790] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.792 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.792] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.792 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.792] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.793 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.793] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.794 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.794 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.794] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.794 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.794] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.794 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.794] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.796 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.796] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.796 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.796] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.797 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.797] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.797 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.797 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.797] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.797 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.797] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.798 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.798] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.798 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.798] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.800 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.800] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.800 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.800] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 07:55:18.800 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 07:55:18.800 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.800] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 07:55:18.801 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.801] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.801 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.801] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 07:55:18.803 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.803] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 07:55:18.803 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 07:55:18.803] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 08:00:40.692 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:00:40.692] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 08:00:40.692 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 08:00:40.692 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:00:40.692] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 08:00:40.693 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:00:40.693] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 08:00:40.693 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:00:40.693] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 08:02:23.668 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56s864ms416µs).
2026-02-24 08:31:52.826 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:31:52.826] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 08:31:52.826 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 08:31:52.826] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 09:00:40.692 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:00:40.691] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 09:00:40.694 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 09:00:40.696 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:00:40.696] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 09:00:40.697 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:00:40.697] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 09:00:40.699 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:00:40.699] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 09:02:01.517 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-24 09:02:01.540 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-24 09:02:01.593 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 09:02:01.611 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-24 09:02:01.661 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-24 09:02:13.169 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 37752 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 09:02:13.177 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 09:02:13.178 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 09:02:14.151 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 09:02:16.895 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 09:02:17.453 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 539 ms. Found 10 JPA repository interfaces.
2026-02-24 09:02:20.500 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 09:02:20.529 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 09:02:20.534 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 09:02:20.534 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 09:02:20.788 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 7439 ms
2026-02-24 09:02:22.466 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 09:02:22.654 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 09:02:24.203 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 09:02:24.288 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 09:02:24.789 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2ccfd2cb
2026-02-24 09:02:24.793 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 09:02:25.112 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 09:02:28.401 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 09:02:28.724 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 09:02:29.809 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 09:02:32.605 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 09:02:33.285 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 09:02:46.208 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 09:02:46.842 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 09:02:46.991 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 09:02:53.995 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 09:02:54.623 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 09:02:54.839 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 09:02:55.161 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 43.56 seconds (process running for 46.286)
2026-02-24 09:02:55.190 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.190] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 09:02:55.192 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 09:02:55.194 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 09:02:55.195 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.194] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 09:02:55.200 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.200] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 09:02:55.201 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.201] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 09:02:55.212 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@401482224 wrapping org.postgresql.jdbc.PgConnection@2ccfd2cb] read-only
2026-02-24 09:02:55.222 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.222] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 09:02:55.245 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:02:55.245] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 09:02:55.574 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 09:02:55.646 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:02:55.646] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 09:02:55.647 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:02:55.647] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 09:02:55.663 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@401482224 wrapping org.postgresql.jdbc.PgConnection@2ccfd2cb]
2026-02-24 09:02:55.664 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 09:02:55.668 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 09:02:56.439 [RMI TCP Connection(6)-192.168.36.27] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-24 09:02:56.440 [RMI TCP Connection(6)-192.168.36.27] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-24 09:02:56.452 [RMI TCP Connection(12)-192.168.36.27] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2026-02-24 09:02:56.452 [RMI TCP Connection(6)-192.168.36.27] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 12 ms
2026-02-24 09:02:56.471 [RMI TCP Connection(12)-192.168.36.27] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2026-02-24 09:38:30.533 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 30136 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 09:38:30.538 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 09:38:30.539 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 09:38:31.191 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 09:38:32.783 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 09:38:33.079 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 285 ms. Found 10 JPA repository interfaces.
2026-02-24 09:38:34.812 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 09:38:34.826 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 09:38:34.828 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 09:38:34.829 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 09:38:34.941 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 4286 ms
2026-02-24 09:38:35.738 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 09:38:35.805 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 09:38:36.376 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 09:38:36.417 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 09:38:36.637 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@17c7cc93
2026-02-24 09:38:36.639 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 09:38:36.724 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 09:38:38.590 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 09:38:38.726 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 09:38:39.278 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 09:38:40.628 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 09:38:40.963 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 09:38:46.377 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 09:38:46.621 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 09:38:46.673 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 09:38:48.882 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 09:38:49.033 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 09:38:49.043 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 09:38:49.056 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 19.644 seconds (process running for 23.653)
2026-02-24 09:38:49.065 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 09:38:49.065 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.065] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 09:38:49.067 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 09:38:49.068 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.068] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 09:38:49.071 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.071] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 09:38:49.071 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.071] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 09:38:49.073 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@770918164 wrapping org.postgresql.jdbc.PgConnection@17c7cc93] read-only
2026-02-24 09:38:49.075 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.075] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 09:38:49.082 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:38:49.082] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 09:38:49.190 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 09:38:49.210 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:38:49.210] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 09:38:49.211 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:38:49.211] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 09:38:49.214 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@770918164 wrapping org.postgresql.jdbc.PgConnection@17c7cc93]
2026-02-24 09:38:49.214 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 09:38:49.214 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 09:41:40.021 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-24 09:41:40.023 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-24 09:41:40.051 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 28 ms
2026-02-24 09:41:43.182 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-24 09:41:43.861 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2028750268 wrapping org.postgresql.jdbc.PgConnection@17c7cc93] read-only
2026-02-24 09:41:43.863 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:41:43.863] ENTERING: ProductServiceImpl.getAllProducts with arguments: []
2026-02-24 09:41:43.888 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:41:43.888] TRANSACTION START: ProductServiceImpl.getAllProducts()
2026-02-24 09:41:44.255 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 join categories c1_0 on c1_0.category_id=p1_0.category_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id
2026-02-24 09:41:45.240 [http-nio-8080-exec-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy214.findAllWithInventory took 1.33s
2026-02-24 09:41:45.242 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 09:41:45.242] TRANSACTION COMMIT: ProductServiceImpl.getAllProducts()
2026-02-24 09:41:45.244 [http-nio-8080-exec-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: ProductServiceImpl.getAllProducts took 1.38s
2026-02-24 09:41:45.244 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 09:41:45.244] EXITING: ProductServiceImpl.getAllProducts returned: ArrayList
2026-02-24 09:41:45.245 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2028750268 wrapping org.postgresql.jdbc.PgConnection@17c7cc93]
2026-02-24 09:41:45.361 [http-nio-8080-exec-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW API ENDPOINT: ProductController.getAllProducts took 2.18s
2026-02-24 09:41:45.362 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-24 09:58:20.226 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m43s237ms614µs100ns).
2026-02-24 10:01:50.611 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:01:50.685 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@456561816 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:01:50.749 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:50.748] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-24 10:01:50.764 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:50.764] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-24 10:01:51.156 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-24 10:01:51.161 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-24 10:01:51.185 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:51.185] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-24 10:01:51.187 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:51.186] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-24 10:01:51.188 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@456561816 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:01:51.189 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 577ms
2026-02-24 10:01:51.190 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:01:51.231 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:01:51.288 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 57ms
2026-02-24 10:01:51.288 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:01:51.435 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@559073820 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:01:51.437 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:51.437] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6e8c7c54, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-24 10:01:51.446 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:51.444] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:01:51.760 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:01:52.035 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.099 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.101 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.104 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.107 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.109 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.115 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.119 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.122 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.125 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.126 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.130 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.280 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:01:52.286 [http-nio-8080-exec-6] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy214.findWithFilters took 832ms
2026-02-24 10:01:52.308 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:01:52.437 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:52.436] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:01:52.438 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:52.438] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:01:52.440 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@559073820 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:01:52.441 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 1.28s
2026-02-24 10:01:52.441 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:01:52.651 [http-nio-8080-exec-6] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-24 10:01:52.893 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-24 10:01:52.896 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1231921395 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:01:52.897 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:52.897] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@4d523d06, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-24 10:01:52.897 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:52.897] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:01:52.905 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:01:52.908 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.912 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.918 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.922 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.925 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.929 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.933 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.936 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.939 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.942 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.944 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.946 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:01:52.958 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:01:52.962 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:01:52.966 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:01:52.966] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:01:52.966 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:01:52.966] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:01:52.968 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1231921395 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:01:52.969 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 76ms
2026-02-24 10:01:52.970 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:15.481 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:15.480] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-24 10:02:15.486 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-24 10:02:15.486 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-24 10:02:15.560 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-24 10:02:16.684 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-24 10:02:16.698 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA&provider=google
2026-02-24 10:02:16.698 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:16.698] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-24 10:02:16.700 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:16.700] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, true]
2026-02-24 10:02:16.700 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:16.700] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:02:17.758 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:02:18.046 [task-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy194.save took 1.21s
2026-02-24 10:02:18.046 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: eugene_6177
2026-02-24 10:02:18.047 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:18.046] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:02:18.047 [task-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: SecurityAuditServiceImpl.logEvent took 1.35s
2026-02-24 10:02:18.047 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:18.047] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:02:24.847 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:24.847] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:24.849 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:24.849] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:25.511 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@163312825 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:25.512 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:25.512] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:25.514 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:25.514] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:25.523 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:25.528 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:25.528] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:25.528 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:25.528] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:25.529 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@163312825 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:25.533 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:29.706 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1289513818 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:29.707 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:29.707] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:02:29.716 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:29.715] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:02:29.850 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:02:29.920 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:30.094 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:30.099 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:30.100 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:02:30.103 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:30.105 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:30.111 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:30.112 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:30.114 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:30.116 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.115] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:02:30.116 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.116] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:02:30.116 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1289513818 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:30.375 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@434512744 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:30.375 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.375] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:30.378 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.378] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:30.386 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:30.403 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.403] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:30.403 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.403] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:30.403 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@434512744 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:30.411 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1998934556 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:30.411 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.411] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-24 10:02:30.416 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.416] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-24 10:02:30.423 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-24 10:02:30.433 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:30.435 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:02:30.437 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.437] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-24 10:02:30.437 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.437] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-24 10:02:30.438 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1998934556 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:30.564 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1504547203 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:30.564 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.564] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-24 10:02:30.571 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.571] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:02:30.630 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:30.634 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:30.636 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:30.636] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:02:30.637 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:30.637] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:02:30.638 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1504547203 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:35.592 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.592] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:35.592 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.592] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:35.593 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.593] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:35.594 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.594] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:35.595 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@516465028 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:35.595 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.595] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:35.596 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.596] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.597 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2045847401 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:35.597 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.597] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:35.597 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:35.597 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.597] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.598 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:35.598 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.598] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.598 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.598] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:35.600 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@516465028 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:35.601 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:35.608 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-24 10:02:35.608 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.608] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.609 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.609] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:35.609 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1371895478 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:35.609 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2045847401 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:35.609 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.609] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@118774fd, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-24 10:02:35.610 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.610] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:35.611 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:35.611 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:02:35.612 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.616 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.617 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:02:35.618 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:02:35.618 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:02:35.618 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.620 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.621 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.623 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.625 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.625 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.625] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:35.625 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.625] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:35.626 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.627 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1292102991 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:35.628 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.628] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:35.628 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.628] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.629 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:35.633 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.633] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.633 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:02:35.633 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.633] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:35.633 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1292102991 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:35.635 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:02:35.636 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:35.638 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.638] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:35.638 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.638] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:02:35.639 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1371895478 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:35.639 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:02:35.639 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 31ms
2026-02-24 10:02:35.639 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:35.639 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:02:35.639 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:02:35.646 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.646] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:35.646 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.646] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:35.648 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@781459829 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:35.650 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.650] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:35.650 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.650] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.651 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:35.654 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.652] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:35.654 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.654] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:35.654 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@781459829 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:35.655 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:35.660 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-24 10:02:35.662 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1213093256 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:35.663 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.662] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3f7e8e84, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-24 10:02:35.663 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.663] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:35.664 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:02:35.668 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.670 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.672 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.673 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.676 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.686 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.688 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.688 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:35.700 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:02:35.703 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:02:35.705 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:35.705] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:35.705 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:35.705] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:02:35.705 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1213093256 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:35.706 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 46ms
2026-02-24 10:02:35.706 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:40.127 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.126] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:40.128 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.128] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:40.128 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.128] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:40.128 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.128] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:40.131 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@278473152 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:40.131 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1909278614 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:40.131 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.131] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:40.131 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.131] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:40.132 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.132] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.132 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.132] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.133 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:40.133 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:40.135 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.135] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.135 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.135] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.135 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.135] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:40.135 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.135] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:40.136 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@278473152 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:40.136 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1909278614 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:40.137 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:40.137 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:40.259 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:40.259 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:40.260 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@844364284 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:40.260 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-24 10:02:40.261 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:40.261 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.261] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:40.261 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.261] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:40.265 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:40.268 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.268] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:40.268 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.268] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:40.270 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1236021900 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:40.270 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.270] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:40.270 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.270] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:40.271 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.271] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:40.271 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.271] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.271 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@844364284 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:40.271 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 12ms
2026-02-24 10:02:40.271 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:40.271 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:40.274 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.274] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.274 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.274] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:40.275 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1236021900 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:40.278 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:40.281 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.280] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:40.281 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.281] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:40.283 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:40.283 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-24 10:02:40.284 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:40.284 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1554825722 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:40.284 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.284] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:40.285 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.284] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.286 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:40.289 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:40.289] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:40.289 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:40.289] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:40.290 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1554825722 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:40.291 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:40.298 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:40.300 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 1ms
2026-02-24 10:02:40.300 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:41.189 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.189] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:41.189 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.189] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:41.195 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.195] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:41.195 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.195] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:41.205 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@552218312 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:41.206 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.206] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:41.207 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.207] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.208 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1480137348 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:41.208 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:41.208 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.208] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:41.208 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.208] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.210 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:41.213 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.213] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.213 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.213] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:41.214 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@552218312 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:41.215 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.215] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.215 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.215] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:41.215 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1480137348 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:41.216 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:41.217 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:41.221 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:02:41.221 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:02:41.221 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:02:41.222 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-24 10:02:41.226 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@106244202 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:41.227 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.227] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6796962a, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-24 10:02:41.227 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.227] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:41.228 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.228] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:41.228 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.228] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:41.228 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:02:41.231 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@72044494 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:41.231 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.231] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:41.232 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.232] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.234 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:41.235 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.235] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.236 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.236] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:41.237 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@72044494 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:41.238 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:41.239 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.242 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:02:41.242 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:02:41.242 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:02:41.244 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.246 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.248 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.251 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.252 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.255 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.256 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.262 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:02:41.265 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:02:41.270 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.270] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:41.270 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.270] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:02:41.271 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@106244202 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:41.271 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 49ms
2026-02-24 10:02:41.271 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:41.286 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.286] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:41.287 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.287] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:41.290 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@794246689 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:41.290 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.290] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:41.291 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.291] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.292 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:41.294 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.294] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:41.295 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.295] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:41.296 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@794246689 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:41.297 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:41.302 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-24 10:02:41.303 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@636551636 wrapping org.postgresql.jdbc.PgConnection@3cf09697] read-only
2026-02-24 10:02:41.303 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.303] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@22e91e99, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-24 10:02:41.305 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.305] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:41.306 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-24 10:02:41.310 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.313 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.315 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.317 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.319 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.321 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.322 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.325 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:41.334 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:02:41.336 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:02:41.340 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:41.340] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:41.340 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:41.340] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:02:41.341 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@636551636 wrapping org.postgresql.jdbc.PgConnection@3cf09697]
2026-02-24 10:02:41.341 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 39ms
2026-02-24 10:02:41.343 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:44.279 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.279] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:44.280 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.280] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:44.284 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1187885928 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:44.285 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.285] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:44.285 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:44.285] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:44.288 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:44.291 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:44.291] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:44.291 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.291] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:44.292 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1187885928 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:44.293 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:44.301 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 6, 8, productName, ASC]
2026-02-24 10:02:44.301 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@439108442 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:44.302 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.302] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3378cef5, Page request [number: 6, size 8, sort: productName: ASC], productName, ASC]
2026-02-24 10:02:44.304 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:44.304] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:44.311 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name offset ? rows fetch first ? rows only
2026-02-24 10:02:44.312 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.315 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.317 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.318 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.321 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.322 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.323 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.325 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:44.331 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:02:44.332 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:02:44.336 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:44.336] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:02:44.336 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:44.336] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:02:44.337 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@439108442 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:44.337 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 36ms
2026-02-24 10:02:44.337 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:02:45.747 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:45.747] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:45.747 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:45.747] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:45.752 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1938973948 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:45.753 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:45.753] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:45.753 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:45.753] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:45.756 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:45.758 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:45.758] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:45.758 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:45.758] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:45.758 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1938973948 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:45.761 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:46.730 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:46.729] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:46.730 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:46.730] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:46.734 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1931075435 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:46.735 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:46.735] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:46.735 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:46.735] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:46.737 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:46.739 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:46.739] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:46.739 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:46.739] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:46.740 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1931075435 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:46.742 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:46.997 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@6ab26d9d]
2026-02-24 10:02:46.997 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@6559ad27]
2026-02-24 10:02:47.000 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.000] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@6559ad27]
2026-02-24 10:02:47.001 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.001] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@6ab26d9d]
2026-02-24 10:02:47.008 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.008] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.008 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.008] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.012 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.011] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.012 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.011] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.014 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.014] ENTERING: ProductServiceImpl.getProductById with arguments: [61]
2026-02-24 10:02:47.014 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.014] ENTERING: ProductServiceImpl.getProductById with arguments: [85]
2026-02-24 10:02:47.026 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.026] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:47.027 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.026] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:47.031 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:47.031 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:47.040 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:47.043 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.042] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:47.043 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.043] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:02:47.107 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:47.108 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.108] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [85, 1]
2026-02-24 10:02:47.113 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.113] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:47.113 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.113] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:02:47.115 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.115] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [61, 1]
2026-02-24 10:02:47.120 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.120] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:47.120 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.120] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:47.146 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:47.146 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:47.150 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.150] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:47.150 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.150] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:47.151 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.151] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:47.151 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.151] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:47.168 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-24 10:02:47.168 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-24 10:02:47.230 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-24 10:02:47.231 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-24 10:02:47.257 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.256] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.257 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.257] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.257 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.257] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.257 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:47.257] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:47.258 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.257] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-24 10:02:47.258 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:47.258] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-24 10:02:47.411 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 414ms
2026-02-24 10:02:47.411 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 414ms
2026-02-24 10:02:47.411 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-24 10:02:47.411 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-24 10:02:48.113 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.113] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:48.114 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.113] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:48.118 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@739246206 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:48.118 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.118] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:48.118 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.118] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:48.119 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:48.121 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.121] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:48.121 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.121] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:48.122 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@739246206 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:48.123 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:48.129 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@682a1581]
2026-02-24 10:02:48.129 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.129] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@682a1581]
2026-02-24 10:02:48.129 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.129] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:48.130 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.130] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:48.130 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.130] ENTERING: ProductServiceImpl.getProductById with arguments: [15]
2026-02-24 10:02:48.130 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.130] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:48.130 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:48.134 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:48.135 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.135] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:02:48.136 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.136] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:02:48.137 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.137] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [15, 1]
2026-02-24 10:02:48.137 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.137] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:48.138 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:48.140 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.140] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:48.140 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.140] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:48.142 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-24 10:02:48.146 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-24 10:02:48.147 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.147] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:48.148 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:48.148] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-24 10:02:48.149 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:48.149] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-24 10:02:48.151 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 22ms
2026-02-24 10:02:48.152 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-24 10:02:49.994 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.994] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:49.994 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.994] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:49.994 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.994] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:49.994 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.994] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:49.997 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@800152553 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:49.997 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1068447042 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:49.997 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.997] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:49.997 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:49.997] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:49.997 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:49.997] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:49.997 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:49.997] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:49.999 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:49.999 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:50.000 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.000] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.000 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.000] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:50.001 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1068447042 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:50.003 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:50.006 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.006] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.006 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.006] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:50.006 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@800152553 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:50.006 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:50.007 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@337545236 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:50.007 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:50.007 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.007] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:50.008 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.008] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:50.008 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:50.011 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:50.011 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@888798056 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:50.011 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.011] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:50.012 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.011] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:50.012 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:50.012 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:50.015 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:50.017 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.017] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:50.017 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.017] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:50.017 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@337545236 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:50.017 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 11ms
2026-02-24 10:02:50.017 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:50.020 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.020] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:50.020 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.020] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:50.020 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@888798056 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:50.021 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 10ms
2026-02-24 10:02:50.021 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:50.023 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.023] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:50.023 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.023] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:50.026 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1947939692 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:50.026 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.026] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:50.026 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.026] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.027 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.027] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:50.027 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.027] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:50.027 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:50.029 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1543530544 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:50.029 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.029] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.030 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.030] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:50.030 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.030] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:50.030 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.030] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.030 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1947939692 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:50.030 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:50.030 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:50.033 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:50.032] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:50.033 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:50.033] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:50.033 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1543530544 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:50.034 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:50.035 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:50.035 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-24 10:02:50.035 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:50.038 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:50.038 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-24 10:02:50.038 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:51.192 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.192] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.192 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.192] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.197 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@948214169 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.197 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.197] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.197 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.197] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.198 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.200 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.200] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.200 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.200] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.201 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@948214169 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.203 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.213 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [47, 2]
2026-02-24 10:02:51.215 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 2]
2026-02-24 10:02:51.215 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.215] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [47, 2]
2026-02-24 10:02:51.216 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.216] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 2]
2026-02-24 10:02:51.217 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.217] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.217 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.217] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.224 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:51.231 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:51.235 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.235] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [61, 2]
2026-02-24 10:02:51.235 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.235] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:51.237 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:51.238 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.238] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:51.238 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.238] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:51.244 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.244] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.244 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.244] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.244 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.244] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:51.244 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 29ms
2026-02-24 10:02:51.261 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:51.271 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 58ms
2026-02-24 10:02:51.271 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:51.281 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.281] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.281 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.281] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.282 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.282] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.282 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.282] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.284 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@554924225 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.284 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.284] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.284 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1841583505 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:51.285 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.285] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.285 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.285] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.285 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.285] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.285 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.285 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.287 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.287] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.287 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.287] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.287 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.287] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.287 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.287] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.288 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1841583505 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:51.288 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@554924225 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.288 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.288 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.293 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:51.293 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:51.293 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1395842698 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:51.293 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@297914776 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.293 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.293] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:51.293 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.293] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:51.295 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.295] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:51.295 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.295] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:51.296 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:51.296 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:51.297 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:51.297 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:51.299 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.299] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:51.299 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.299] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:51.299 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@297914776 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.299 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.299] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:51.301 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.301] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:51.301 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 8ms
2026-02-24 10:02:51.301 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:51.301 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1395842698 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:51.301 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 8ms
2026-02-24 10:02:51.301 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:51.497 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.497] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.498 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.498] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.499 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1205260491 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.499 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.499] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.500 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.500] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.500 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.501 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.501] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.501 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.501] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.503 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1205260491 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.504 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.506 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [48, 2]
2026-02-24 10:02:51.506 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [48, 2]
2026-02-24 10:02:51.506 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.506] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [48, 2]
2026-02-24 10:02:51.506 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.506] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [48, 2]
2026-02-24 10:02:51.508 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.508] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.508 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.508] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.508 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:51.511 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:51.515 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.515] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [85, 2]
2026-02-24 10:02:51.515 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.515] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:51.515 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:51.518 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.518] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:51.518 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.518] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:51.520 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.519] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.520 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.520] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:51.520 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.520] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:51.520 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 14ms
2026-02-24 10:02:51.521 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:51.523 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 17ms
2026-02-24 10:02:51.523 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:51.532 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.532] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.533 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.533] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:51.533 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.533] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.533 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.533] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:51.534 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@527233379 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.534 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@849891474 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:51.535 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.535] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.535 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.535] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:51.535 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.535] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.535 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.535] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.535 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.536 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:51.538 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.538] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.538 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.538] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:51.538 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.538] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.538 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.538] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:51.538 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@849891474 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:51.538 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@527233379 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.538 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.538 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:51.542 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:51.543 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@576551172 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:51.543 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:51.543 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.543] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:51.543 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.543] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:51.545 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@283963730 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:51.545 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.545] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:51.545 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.545] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:51.546 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:51.546 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:51.547 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:51.547 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:51.551 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.550] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:51.551 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.551] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:51.551 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:51.551] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:51.551 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:51.551] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:51.551 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@576551172 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:51.552 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 10ms
2026-02-24 10:02:51.552 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@283963730 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:51.552 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:51.553 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 10ms
2026-02-24 10:02:51.553 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:53.487 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.487] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:53.487 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.487] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:53.490 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1911768109 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:53.490 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.490] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:53.490 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.490] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.492 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:53.494 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.494] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.494 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.494] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:53.494 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1911768109 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:53.496 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:53.500 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [47, 1]
2026-02-24 10:02:53.500 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 1]
2026-02-24 10:02:53.501 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.500] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [47, 1]
2026-02-24 10:02:53.501 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.501] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 1]
2026-02-24 10:02:53.501 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.501] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:53.501 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.501] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:53.503 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:53.505 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:53.508 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.508] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:53.508 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.508] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:53.508 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.508] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:53.509 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 9ms
2026-02-24 10:02:53.509 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:53.518 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 18ms
2026-02-24 10:02:53.518 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:53.526 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.526] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:53.527 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.527] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:53.527 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.527] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:53.527 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.527] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:53.528 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1651922829 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:53.530 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@382963445 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:53.530 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.530] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:53.530 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.530] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:53.530 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.530] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.530 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.530] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.530 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:53.530 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:53.532 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.532] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.532 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.532] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:53.533 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.533] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:53.533 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.533] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:53.533 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1651922829 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:53.533 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@382963445 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:53.534 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:53.534 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:53.540 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:53.540 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:53.540 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@542837068 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:53.540 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1410697179 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:53.540 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.540] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:53.540 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.540] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:53.540 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.540] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:53.540 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.540] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:53.541 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:53.541 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:53.542 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:53.542 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:53.546 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.546] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:53.546 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.546] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:53.546 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:53.546] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:53.547 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@542837068 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:53.547 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:53.547] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:53.547 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 7ms
2026-02-24 10:02:53.547 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:53.547 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1410697179 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:53.547 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 7ms
2026-02-24 10:02:53.547 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:54.187 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.187] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.187 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.187] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.188 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@821242840 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.189 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.189] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.190 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.190] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.191 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.193 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.193] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.193 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.193] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.194 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@821242840 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.194 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.198 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [48, 3]
2026-02-24 10:02:54.200 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [48, 3]
2026-02-24 10:02:54.200 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.200] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [48, 3]
2026-02-24 10:02:54.200 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.200] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [48, 3]
2026-02-24 10:02:54.200 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.200] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.201 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.201] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.201 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:54.203 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:54.206 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.206] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [85, 3]
2026-02-24 10:02:54.207 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.207] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:54.208 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:54.209 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.209] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:54.210 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.209] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:54.211 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.211] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.211 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.211] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.211 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.211] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:54.211 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 11ms
2026-02-24 10:02:54.212 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:54.220 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 20ms
2026-02-24 10:02:54.220 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:54.228 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.228] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.228 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.228] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.229 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.229] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.229 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.229] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.230 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@21742003 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.230 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1419239234 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:54.230 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.230] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.230 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.230] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.232 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.230] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.232 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.232] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.232 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.232 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.234 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.234] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.234 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.234] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.234 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.234] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.234 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.234] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.235 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1419239234 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:54.235 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@21742003 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.235 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.236 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.240 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:54.240 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:54.240 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@212178353 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:54.240 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@267741174 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.240 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.240] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:54.240 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.240] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:54.240 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.240] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:54.240 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.240] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:54.241 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:54.241 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:54.243 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:54.243 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:54.246 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.245] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:54.246 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.246] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:54.246 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.246] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:54.246 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.246] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:54.246 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@267741174 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.246 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@212178353 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:54.247 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 7ms
2026-02-24 10:02:54.247 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 7ms
2026-02-24 10:02:54.247 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:54.247 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:54.337 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.337] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.337 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.337] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.338 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@898489357 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.339 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.339] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.339 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.339] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.340 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.342 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.342] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.342 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.342] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.342 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@898489357 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.343 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.345 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [47, 2]
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 2]
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.346] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [47, 2]
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.346] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 2]
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.346] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.346] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.346 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:54.348 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:54.351 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.351] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.351 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.351] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:54.352 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.352] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:54.352 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 6ms
2026-02-24 10:02:54.352 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:54.353 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 8ms
2026-02-24 10:02:54.355 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:54.362 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.362] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.362 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.362] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:54.362 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.362] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.362 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.362] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:54.363 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@607313604 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:54.363 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2090797004 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.363 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.363] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.363 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.363] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:54.364 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.363] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.364 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.364] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.365 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.365 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:54.365 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.365] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.365 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.365] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:54.365 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.365] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.365 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.365] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:54.365 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2090797004 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.365 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@607313604 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:54.367 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.367 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:54.370 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:54.370 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:54.370 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1181578221 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:54.370 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1740951939 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:54.370 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.370] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:54.370 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.370] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:54.370 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.370] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:54.370 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.370] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:54.371 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:54.371 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:54.373 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:54.373 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:54.377 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.377] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:54.377 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.377] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:54.377 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:54.377] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:54.377 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:54.377] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:54.377 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1181578221 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:54.378 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1740951939 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:54.378 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 8ms
2026-02-24 10:02:54.378 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:54.378 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 8ms
2026-02-24 10:02:54.378 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:55.296 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.296] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.296 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.296] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.298 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@958101040 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.303 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.303] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.303 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.303] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.303 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.306 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.306] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.306 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.306] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.306 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@958101040 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.307 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.310 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [47, 3]
2026-02-24 10:02:55.311 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 3]
2026-02-24 10:02:55.311 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.311] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [47, 3]
2026-02-24 10:02:55.311 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.311] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 3]
2026-02-24 10:02:55.311 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.311] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.311 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.311] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.312 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:55.314 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:55.315 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.315] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [61, 3]
2026-02-24 10:02:55.315 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.315] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:55.317 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:55.319 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.319] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:55.319 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.319] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:55.319 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.319] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.320 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.320] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.320 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.320] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:55.320 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 9ms
2026-02-24 10:02:55.320 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:55.322 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 12ms
2026-02-24 10:02:55.322 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:55.330 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.330] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.330 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.330] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.330 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.330] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.330 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.330] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.331 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@792924761 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.332 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.332] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.332 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@680502782 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:55.332 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.332] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.332 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.332] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.332 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.332] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.332 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.333 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.334 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.334] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.334 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.334] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.334 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.334] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.334 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.334] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.334 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@792924761 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.334 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@680502782 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:55.335 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.335 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.338 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:55.338 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:55.339 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2138277232 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.339 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1274620079 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:55.339 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.339] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:55.340 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.340] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:55.340 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.340] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:55.340 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.340] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:55.340 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:55.340 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:55.342 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:55.342 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:55.345 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.345] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:55.345 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.345] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:55.346 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.345] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:55.346 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.346] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:55.346 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2138277232 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.346 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1274620079 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:55.346 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 8ms
2026-02-24 10:02:55.346 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:55.347 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 9ms
2026-02-24 10:02:55.347 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:55.443 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.443] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.443 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.443] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.444 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@356493179 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.445 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.445] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.445 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.445] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.445 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.446 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.446] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.446 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.446] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.448 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@356493179 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.449 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.451 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [47, 4]
2026-02-24 10:02:55.452 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 4]
2026-02-24 10:02:55.452 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.452] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [47, 4]
2026-02-24 10:02:55.452 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.452] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [47, 4]
2026-02-24 10:02:55.452 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.452] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.452 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.452] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.453 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-24 10:02:55.455 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-24 10:02:55.457 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.457] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [61, 4]
2026-02-24 10:02:55.458 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.457] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:55.458 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:55.460 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.460] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:55.460 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.460] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:55.461 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.461] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.461 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.461] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-24 10:02:55.461 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.461] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-24 10:02:55.461 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 9ms
2026-02-24 10:02:55.462 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-24 10:02:55.463 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 12ms
2026-02-24 10:02:55.463 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-24 10:02:55.470 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.470] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.470 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.470] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:55.470 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.470] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.470 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.470] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:55.472 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@369553358 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:55.472 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1508697595 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.472 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.472] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.472 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.472] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:55.472 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.472] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.472 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.472] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.473 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.473 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:55.475 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.475] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.475 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.475] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:55.475 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.475] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.475 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.475] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:55.475 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@369553358 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:55.475 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1508697595 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.476 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.476 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:55.479 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:55.480 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@3039912 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:55.480 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:55.480 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.480] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:55.480 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.480] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:55.480 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1308728074 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:55.480 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.480] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:55.481 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.481] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:55.481 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:55.482 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:55.483 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:55.485 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:55.487 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.487] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:55.489 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.489] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:55.489 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:55.489] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:55.489 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:55.489] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:55.489 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@3039912 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:55.489 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1308728074 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:55.490 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 11ms
2026-02-24 10:02:55.490 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:55.490 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 10ms
2026-02-24 10:02:55.490 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:56.644 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:56.644] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:56.644 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:56.644] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:56.648 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1069519437 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:56.648 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:56.648] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:56.648 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:56.648] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:56.650 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:56.655 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:56.655] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:56.658 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:56.658] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:56.658 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1069519437 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:56.661 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:57.181 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@4a67e44c]
2026-02-24 10:02:57.183 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@639267946 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] to 8
2026-02-24 10:02:57.184 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@4a67e44c]
2026-02-24 10:02:57.184 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.184] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@4a67e44c]
2026-02-24 10:02:57.189 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.189] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@4a67e44c]
2026-02-24 10:02:57.190 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.190] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-24 10:02:57.194 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.194] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-24 10:02:57.195 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.195] ENTERING: UserServiceImpl.getUserById with arguments: [24]
2026-02-24 10:02:57.200 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.200] TRANSACTION START: UserServiceImpl.getUserById(Integer)
2026-02-24 10:02:57.201 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:02:57.211 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.211] TRANSACTION COMMIT: UserServiceImpl.getUserById(Integer)
2026-02-24 10:02:57.211 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.211] EXITING: UserServiceImpl.getUserById returned: UserResponse
2026-02-24 10:02:57.212 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.212] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[49, 48, 47]]
2026-02-24 10:02:57.212 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.212] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:02:57.213 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:57.216 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:57.217 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:57.218 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:57.221 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.220] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:02:57.221 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.221] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:02:57.224 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.224] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [49, 1]
2026-02-24 10:02:57.224 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.224] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.225 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.226 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.226] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.226 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.226] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:57.227 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.227] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [48, 3]
2026-02-24 10:02:57.227 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.227] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.230 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.231 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.231] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.231 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.231] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:57.231 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.231] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [47, 4]
2026-02-24 10:02:57.232 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.232] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.233 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.234 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.234] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:02:57.235 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.235] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:02:57.238 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.238] ENTERING: InventoryServiceImpl.reserveStock with arguments: [49, 1]
2026-02-24 10:02:57.238 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.238] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.238 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.238] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.247 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.252 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.252] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.252 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.252] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.261 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.261] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:02:57.262 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.262] ENTERING: InventoryServiceImpl.reserveStock with arguments: [48, 3]
2026-02-24 10:02:57.263 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.263] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.263 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.263] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.271 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:02:57.275 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.276 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.276] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.276 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.276] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.277 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.277] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:02:57.277 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.277] ENTERING: InventoryServiceImpl.reserveStock with arguments: [47, 4]
2026-02-24 10:02:57.277 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.277] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.277 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.277] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.278 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:02:57.280 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:02:57.282 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.282] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.282 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.282] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:02:57.282 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.282] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:02:57.306 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into orders (created_at,notes,order_date,payment_method,payment_status,shipping_address,status,total_amount,updated_at,user_id) values (?,?,?,?,?,?,?,?,?,?)
2026-02-24 10:02:57.346 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:02:57.351 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:02:57.352 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:02:57.361 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.361] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, ORDER_CREATED, Order #32 created with 3 items, total amount: $1213.95, true]
2026-02-24 10:02:57.361 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.361] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:02:57.366 [task-2] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:02:57.369 [task-2] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_CREATED for user: eugene_6177
2026-02-24 10:02:57.369 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.369] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:02:57.369 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.369] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:02:57.369 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:02:57.374 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.374] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-24 10:02:57.374 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.374] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-24 10:02:57.374 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.374] EXITING: OrderServiceImpl.createOrder returned: OrderResponse
2026-02-24 10:02:57.374 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.createOrder(CreateOrderRequest) in 190ms
2026-02-24 10:02:57.375 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:02:57.477 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@639267946 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] to 2
2026-02-24 10:02:57.478 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.createOrder responded in 297ms
2026-02-24 10:02:57.478 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.createOrder returned: ResponseEntity
2026-02-24 10:02:57.551 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.551] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:57.551 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.551] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:57.555 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1985222567 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:57.555 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.555] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:57.556 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.555] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.557 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:57.560 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.560] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.560 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.560] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:57.561 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1985222567 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:57.562 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:57.568 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.clearCart with arguments: [24]
2026-02-24 10:02:57.569 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.569] ENTERING: CartServiceImpl.clearCart with arguments: [24]
2026-02-24 10:02:57.570 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.570] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-24 10:02:57.570 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.570] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-24 10:02:57.615 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:57.616 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:57.646 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.646] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-24 10:02:57.647 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.646] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-24 10:02:57.647 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.647] EXITING: CartServiceImpl.clearCart returned: void
2026-02-24 10:02:57.652 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-24 10:02:57.658 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-24 10:02:57.659 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-24 10:02:57.661 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.clearCart responded in 93ms
2026-02-24 10:02:57.661 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.clearCart returned: ResponseEntity
2026-02-24 10:02:57.668 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.668] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:57.668 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.668] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:57.669 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.669] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:57.669 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.669] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:57.670 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1867055121 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:57.670 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@211315162 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:57.671 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.671] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:57.671 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.671] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:57.671 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.671] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.671 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.671] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.673 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:57.673 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:57.674 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.674] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.674 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.674] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:57.674 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.674] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:57.674 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.674] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:57.675 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1867055121 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:57.675 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@211315162 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:57.675 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:57.675 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:57.679 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-24 10:02:57.680 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1546478643 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:57.680 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.680] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-24 10:02:57.680 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-24 10:02:57.680 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.680] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:57.680 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1212730260 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:02:57.680 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.680] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-24 10:02:57.680 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.680] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:57.680 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:57.681 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-24 10:02:57.682 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.682] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-24 10:02:57.682 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.682] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-24 10:02:57.683 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1546478643 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:57.683 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:57.683] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-24 10:02:57.683 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:57.683] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-24 10:02:57.683 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 4ms
2026-02-24 10:02:57.683 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-24 10:02:57.684 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1212730260 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:02:57.684 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 4ms
2026-02-24 10:02:57.684 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-24 10:02:58.943 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:58.943] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:02:58.943 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:58.943] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:02:58.946 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@226031774 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:58.946 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:58.946] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:02:58.946 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:58.946] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:58.947 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:02:58.948 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:58.948] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:02:58.948 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:58.948] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:02:58.948 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@226031774 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:02:58.950 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:02:59.092 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2035480270 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:02:59.094 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:59.094] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-24 10:02:59.094 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:59.094] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:02:59.098 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:02:59.107 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:59.113 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:59.115 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:59.117 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:02:59.121 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:59.122 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:59.123 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:59.125 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:59.126 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:02:59.129 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:02:59.130 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:02:59.131 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:02:59.132 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:02:59.132] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:02:59.132 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:02:59.132] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:02:59.132 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2035480270 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:05.786 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:05.786] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:05.786 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:05.786] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:06.088 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@764891056 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:06.088 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:06.088] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:06.088 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:06.088] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:06.093 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:06.099 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:06.099] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:06.105 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:06.105] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:06.106 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@764891056 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:06.148 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:09.238 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1202124582 wrapping org.postgresql.jdbc.PgConnection@3f66735b] to 8
2026-02-24 10:03:09.240 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@424e0c8c]
2026-02-24 10:03:09.241 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.241] ENTERING: OrderServiceImpl.updateOrder with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@424e0c8c]
2026-02-24 10:03:09.251 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.250] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@424e0c8c]
2026-02-24 10:03:09.252 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.252] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:09.259 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.259] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:09.263 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:03:09.312 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_item_id,oi1_0.created_at,oi1_0.order_id,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.320 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.320] ENTERING: InventoryServiceImpl.releaseStock with arguments: [49, 1]
2026-02-24 10:03:09.324 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.324] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.328 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.328] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.330 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.334 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.334] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.334 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.334] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.335 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.335] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:09.335 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.335] ENTERING: InventoryServiceImpl.releaseStock with arguments: [48, 3]
2026-02-24 10:03:09.336 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.336] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.336 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.336] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.341 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:03:09.343 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.344 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.347 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.347] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.347 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.347] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.347 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.347] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:09.348 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.348] ENTERING: InventoryServiceImpl.releaseStock with arguments: [47, 4]
2026-02-24 10:03:09.348 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.348] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.349 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.348] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.353 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.355 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.358 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.358] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.358 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.358] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:09.358 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.358] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:09.393 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.393] ENTERING: ProductServiceImpl.getProductById with arguments: [49]
2026-02-24 10:03:09.393 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.393] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.394 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.397 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.400 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.400] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.400 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.400] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:03:09.401 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.401] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [49, 1]
2026-02-24 10:03:09.402 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.402] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.406 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.407 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:09.408 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:09.410 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:09.411 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.411 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.411] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.413 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.413] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:09.413 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.413] ENTERING: InventoryServiceImpl.reserveStock with arguments: [49, 1]
2026-02-24 10:03:09.414 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.414] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.414 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.414] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.416 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.419 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.419] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.419 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.419] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.419 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.419] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:09.420 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.420] ENTERING: ProductServiceImpl.getProductById with arguments: [48]
2026-02-24 10:03:09.421 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.421] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.422 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.425 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.423] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.425 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.425] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:03:09.426 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.426] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [48, 3]
2026-02-24 10:03:09.426 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.426] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.430 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.432 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.434 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.434] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.434 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.434] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:09.435 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.435] ENTERING: InventoryServiceImpl.reserveStock with arguments: [48, 3]
2026-02-24 10:03:09.437 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.437] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.438 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.438] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.440 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.443 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.443] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.444 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.444] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.444 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.444] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:09.446 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.446] ENTERING: ProductServiceImpl.getProductById with arguments: [47]
2026-02-24 10:03:09.447 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.446] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.448 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.451 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.450] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-24 10:03:09.451 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.451] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-24 10:03:09.452 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.452] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [47, 4]
2026-02-24 10:03:09.454 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.454] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.456 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.461 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.462 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.462] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:09.468 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.463] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:09.481 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.481] ENTERING: InventoryServiceImpl.reserveStock with arguments: [47, 4]
2026-02-24 10:03:09.482 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.482] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.482 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.482] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.489 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:09.495 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.493] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.497 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.496] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:09.497 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.497] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:09.505 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:09.509 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:09.512 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:09.517 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.520 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:03:09.522 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.522] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:09.523 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.523] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:09.523 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.523] EXITING: OrderServiceImpl.updateOrder returned: OrderResponse
2026-02-24 10:03:09.523 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) in 283ms
2026-02-24 10:03:09.530 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:03:09.533 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:09.535 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1202124582 wrapping org.postgresql.jdbc.PgConnection@3f66735b] to 2
2026-02-24 10:03:09.564 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.564] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:09.565 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.564] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:09.565 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.565] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:09.565 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.565] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:09.567 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1931765256 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:09.568 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1868825600 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:09.568 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.568] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:09.568 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.568] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:09.568 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.568] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:09.568 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.568] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:09.570 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:09.572 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:09.572 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.572] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:09.572 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.572] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:09.573 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1931765256 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:09.573 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.573] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:09.575 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.575] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:09.575 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:09.575 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1868825600 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:09.576 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:09.598 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@969288795 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:09.600 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.600] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:03:09.600 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.600] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:09.605 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1294231781 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:09.605 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.605] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:03:09.606 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.606] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:09.606 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:09.611 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:09.620 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:03:09.622 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:03:09.623 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.624 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.625 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.627 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.628 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.630 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.630 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:03:09.630 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:03:09.632 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.633 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.634 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.636 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.636 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.637 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.639 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.640 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.640 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.642 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.642 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.643 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.645 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.646 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.646 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.647 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.648 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.649 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.650 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.651 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.652 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.653 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.654 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.656 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.656 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.656 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.658 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.658 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.660 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.660 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.662 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.662 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.664 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.664 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.666 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.666 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.666 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.667 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.669 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.669 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.670 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.670 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.672 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.672 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.674 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.674 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:03:09.675 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.676 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.677 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:03:09.677 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.678 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.679 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.680 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.680 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.682 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.683 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.684 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:09.684 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.685 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.686 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.686 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.687 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.687 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.688 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.688 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.690 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.690 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.691 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.691 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.692 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.692 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.693 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.693 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.695 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.696 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.697 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.697] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:09.698 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.698] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:09.698 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:09.698 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@969288795 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:09.700 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:09.701 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:09.706 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.706] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:09.706 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.706] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:09.707 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1294231781 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:09.795 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1936976463 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:09.796 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.796] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26]]
2026-02-24 10:03:09.801 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.801] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-24 10:03:09.934 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.934] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:09.994 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.935] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:09.996 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1720957897 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:09.997 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:09.996] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:09.997 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.997] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:09.997 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:10.000 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:09.999] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.000 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.000] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:10.000 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1720957897 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:10.001 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:10.004 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?)
2026-02-24 10:03:10.012 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.012] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-24 10:03:10.012 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.012] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-24 10:03:10.012 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1936976463 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:10.022 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1647817060 wrapping org.postgresql.jdbc.PgConnection@3f66735b] to 8
2026-02-24 10:03:10.023 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@72ebbece]
2026-02-24 10:03:10.023 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.023] ENTERING: OrderServiceImpl.updateOrder with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@72ebbece]
2026-02-24 10:03:10.025 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.023] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [32, com.shopjoy.dto.request.UpdateOrderRequest@72ebbece]
2026-02-24 10:03:10.025 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.025] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:10.025 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.025] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:10.026 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:03:10.028 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_item_id,oi1_0.created_at,oi1_0.order_id,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.031 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.031] ENTERING: InventoryServiceImpl.releaseStock with arguments: [49, 1]
2026-02-24 10:03:10.031 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.031] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.031 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.031] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.033 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.034 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.034] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.035 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.035] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.035 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.035] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:10.036 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.036] ENTERING: InventoryServiceImpl.releaseStock with arguments: [48, 3]
2026-02-24 10:03:10.037 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.037] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.037 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.037] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.040 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.043 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.045 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.045] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.045 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.045] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.046 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.045] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:10.046 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.046] ENTERING: InventoryServiceImpl.releaseStock with arguments: [47, 4]
2026-02-24 10:03:10.046 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.046] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.047 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.046] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.049 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.050 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.053 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.053] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.053 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.053] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-24 10:03:10.054 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.054] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-24 10:03:10.056 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.056] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [49, 1]
2026-02-24 10:03:10.056 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.056] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:10.056 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.056] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:10.057 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.057] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.058 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@758435325 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:10.059 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.059] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:10.060 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.060 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.060] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.061 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:10.061 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:10.061 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:10.062 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.062] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.062 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.062] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:10.062 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-24 10:03:10.063 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@758435325 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:10.064 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.064 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:10.064 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.064] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.064 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.064] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:10.066 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.066] ENTERING: InventoryServiceImpl.reserveStock with arguments: [49, 1]
2026-02-24 10:03:10.066 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.066] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.066 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.066] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.068 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.071 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.071] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.071 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.071] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.071 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.071] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:10.072 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.072] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [48, 3]
2026-02-24 10:03:10.072 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.072] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.075 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.076 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.077 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.077] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.077 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.077] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:10.078 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.078] ENTERING: InventoryServiceImpl.reserveStock with arguments: [48, 3]
2026-02-24 10:03:10.078 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.078] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.078 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.078] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.080 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.082 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@650174852 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:10.084 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.084] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.084 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.084] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-24 10:03:10.084 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.084] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.084 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.084] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.084 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.084] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:10.085 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.085] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [47, 4]
2026-02-24 10:03:10.085 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.085] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.089 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.089 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:10.091 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.092 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.092] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-24 10:03:10.092 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.092] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-24 10:03:10.094 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.094] ENTERING: InventoryServiceImpl.reserveStock with arguments: [47, 4]
2026-02-24 10:03:10.094 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.094] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.094 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.094] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.095 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.097 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.097 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:10.100 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.100] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.100 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.100] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-24 10:03:10.100 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.102 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:03:10.102 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.102] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-24 10:03:10.104 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.108 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.110 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:10.111 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.112 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:10.112 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.113 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.114 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-24 10:03:10.116 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.118 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.118 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.119 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.120 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.121 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.121] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.121 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.121 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.121] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:10.121 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@650174852 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:10.122 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.123 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.126 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:03:10.127 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.127] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:10.127 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.127] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-24 10:03:10.128 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.128] EXITING: OrderServiceImpl.updateOrder returned: OrderResponse
2026-02-24 10:03:10.128 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) in 105ms
2026-02-24 10:03:10.133 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:03:10.135 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-24 10:03:10.138 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1647817060 wrapping org.postgresql.jdbc.PgConnection@3f66735b] to 2
2026-02-24 10:03:10.177 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.177] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:10.178 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.178] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:10.178 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.178] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:10.178 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.178] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:10.180 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1466359945 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:10.180 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.180] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:10.181 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@174498983 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:10.181 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.181] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.181 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.181] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:10.182 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.181] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.183 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:10.183 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:10.185 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.185] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.185 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.185] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.185 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.185] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:10.185 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.185] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:10.186 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1466359945 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:10.186 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@174498983 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:10.187 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:10.187 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:10.209 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1172117668 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:10.209 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1757323481 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:10.210 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.210] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:03:10.210 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.210] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:03:10.210 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.210] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.210 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.210] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.213 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:10.214 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:10.222 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:03:10.223 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:03:10.224 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.224 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.227 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.227 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.229 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.230 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.230 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:03:10.230 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:03:10.232 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.232 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.234 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.234 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.235 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.235 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.237 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.237 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.240 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.240 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.243 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.243 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.244 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.244 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.245 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.245 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.247 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.247 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.248 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.248 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.249 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.249 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.250 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.250 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.252 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.252 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.254 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.254 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.255 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.255 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.258 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.258 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.259 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.259 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.260 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.260 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.261 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.261 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.263 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.263 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.264 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.264 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.265 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.265 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.267 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.267 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.269 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:03:10.271 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:03:10.271 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.273 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.273 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.275 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.275 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.277 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.279 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.280 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.280 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.281 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.282 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.282 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.282 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.286 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.286 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.290 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.290 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.291 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.292 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.293 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.293 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.295 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.295 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.297 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.297 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.297 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.297 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.299 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.299 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.301 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.299] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.301 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.301 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.301] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:10.302 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.302] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.302 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1172117668 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:10.302 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.302] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:10.304 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1757323481 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:10.430 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.430] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:10.430 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.430] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:10.432 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@540546155 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:10.433 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.433] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:10.433 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.433] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.434 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:10.437 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.437] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:10.437 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.437] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:10.437 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@540546155 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:10.438 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:10.466 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@579549395 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:10.467 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.467] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-24 10:03:10.467 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.467] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.474 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:10.477 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.478 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.482 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.483 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:03:10.485 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.487 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.488 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.490 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.490 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:10.493 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:10.495 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:10.496 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:10.497 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:10.497] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:10.497 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:10.497] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:10.497 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@579549395 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:23.722 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.722] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:23.722 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.722] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:23.723 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1085909834 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:23.723 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.723] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:23.723 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.723] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:23.725 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:23.727 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.727] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:23.727 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.727] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:23.727 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1085909834 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:23.728 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:23.737 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1925455568 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:23.737 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.737] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:03:23.739 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.739] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:23.740 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:03:23.742 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:23.743 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:23.744 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:23.744 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:03:23.746 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:23.746 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:23.747 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:23.747 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:23.747 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:23.748 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:03:23.750 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:23.750 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:23.751 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.751] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:03:23.751 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.751] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:03:23.753 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1925455568 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:23.761 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@147657730 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:23.761 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.761] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-24 10:03:23.761 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.761] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:03:23.762 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:23.762 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:23.764 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:23.764] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:03:23.764 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:23.764] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:03:23.764 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@147657730 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:26.593 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.593] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:26.593 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.593] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:26.595 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1557225059 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:26.595 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.595] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-24 10:03:26.595 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:26.595] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:26.596 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:26.597 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:26.597] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:26.597 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.597] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:26.597 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1557225059 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:26.598 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-24 10:03:26.608 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@7ca13fc3]]
2026-02-24 10:03:26.608 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.608] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTkyNzMzNSwiZXhwIjoxNzcyMDEzNzM1fQ.D1U6zC2G44HAxVTlxaMRGb8ZgCzwkWL7V0RlazWEEWs-v8nWhnxxg-MSufb2YnXw643OdxN-P_KsGe2r0631vA]
2026-02-24 10:03:26.609 [http-nio-8080-exec-2] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 1
2026-02-24 10:03:26.609 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.609] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-24 10:03:26.609 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.logout responded in 1ms
2026-02-24 10:03:26.609 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-24 10:03:26.610 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.610] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, LOGOUT, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged out successfully, true]
2026-02-24 10:03:26.611 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:26.611] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:03:26.612 [task-3] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:03:26.614 [task-3] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGOUT for user: eugene_6177
2026-02-24 10:03:26.615 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:26.614] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:03:26.615 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:26.615] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:03:40.736 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@34a0257d, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@7ecf3a9a]]
2026-02-24 10:03:40.738 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1678836394 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:40.738 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:40.738] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@34a0257d]
2026-02-24 10:03:40.745 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:40.745] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-24 10:03:40.749 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:40.749] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-24 10:03:40.750 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:40.750] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-24 10:03:40.883 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:40.883] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:40.883 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:40.883] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:40.884 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:40.885 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:40.885] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:40.885 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:40.885] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:41.013 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.013] ENTERING: RateLimitServiceImpl.resetAttempts with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-24 10:03:41.015 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.015] EXITING: RateLimitServiceImpl.resetAttempts returned: void
2026-02-24 10:03:41.068 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.068] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-24 10:03:41.068 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.068] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-24 10:03:41.069 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1678836394 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.070 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 334ms
2026-02-24 10:03:41.070 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-24 10:03:41.071 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.071] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged in successfully, true]
2026-02-24 10:03:41.071 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.071] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:03:41.072 [task-4] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:03:41.074 [task-4] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: admin
2026-02-24 10:03:41.074 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.074] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:03:41.074 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.074] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:03:41.102 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.102] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:41.103 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.103] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:41.104 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@199906820 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.105 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.105] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:41.105 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.105] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:41.105 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.105] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:41.105 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.105] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.106 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:41.106 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2047315611 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:41.106 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.106] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:41.106 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.106] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.107 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.107] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.107 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.107] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:41.108 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@199906820 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.108 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:41.108 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:41.109 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.109] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.109 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.109] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:41.110 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2047315611 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:41.111 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:41.117 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:03:41.120 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 3ms
2026-02-24 10:03:41.120 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:03:41.123 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1790804723 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.123 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.123] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:03:41.125 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.125] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:03:41.125 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.125] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:41.126 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.126] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:41.126 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1517848286 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:41.126 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.126] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:41.127 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.127] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.129 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:41.129 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:03:41.130 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.130] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:41.130 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.130] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:41.130 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1517848286 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:41.132 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:41.134 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.134] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:03:41.134 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.134] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:03:41.134 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:03:41.135 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1790804723 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.137 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 3ms
2026-02-24 10:03:41.137 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:03:41.149 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2018972704 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.150 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.150] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:03:41.150 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.150] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:03:41.168 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:03:41.172 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.176 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.177 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.177 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.178 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.179 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.180 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.181 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.181 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.182 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.182 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.183 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.183 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.184 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.184 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.185 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.185 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.185 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.187 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.187 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:03:41.190 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:03:41.191 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:03:41.192 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.192] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:03:41.192 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.192] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:03:41.193 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2018972704 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.253 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1357202469 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.254 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.254] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-24 10:03:41.254 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.254] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:03:41.260 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-24 10:03:41.267 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:03:41.274 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.274] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:03:41.274 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.274] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-24 10:03:41.274 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1357202469 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.276 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1691839689 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.277 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.277] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-24 10:03:41.283 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.282] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-24 10:03:41.288 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-24 10:03:41.292 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.292] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-24 10:03:41.293 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.293] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-24 10:03:41.293 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1691839689 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:41.330 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@889345644 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:41.331 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.331] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:03:41.331 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.331] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:03:41.332 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.334 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.335 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.336 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.337 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.337 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.338 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.339 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.340 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.341 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.342 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.343 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.345 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.346 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.347 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.349 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.349 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.350 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.352 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.352 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.353 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.353 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.355 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.356 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:03:41.357 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:03:41.359 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:41.358] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:03:41.359 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:41.359] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:03:41.359 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@889345644 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:55.656 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.656] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:55.656 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.656] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:55.657 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@81778507 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:55.658 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.658] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:55.658 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.658] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.658 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:55.661 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.661] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.661 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.661] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:55.661 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.661] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:55.661 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.661] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:55.662 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@81778507 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:55.663 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:55.663 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1081554131 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:55.663 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.663] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:55.664 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.664] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.666 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:55.667 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.667] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.667 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.667] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:55.668 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1081554131 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:55.669 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:55.673 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:03:55.673 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getCacheStats with arguments: []
2026-02-24 10:03:55.675 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getCacheStats responded in 2ms
2026-02-24 10:03:55.676 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getCacheStats returned: ResponseEntity
2026-02-24 10:03:55.679 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 6ms
2026-02-24 10:03:55.679 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:03:55.684 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.684] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:55.684 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.684] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:55.684 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.684] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:55.684 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@170623128 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:55.684 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.684] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:55.686 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.684] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:55.686 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.686] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.686 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1060662201 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:55.686 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.686] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:55.686 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:55.686 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.686] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.687 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:55.687 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.687] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.687 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.687] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:55.688 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@170623128 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:55.688 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:55.688] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:55.688 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:55.688] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:55.688 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:55.688 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1060662201 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:55.689 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:55.690 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getCacheStats with arguments: []
2026-02-24 10:03:55.691 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getCacheStats responded in 1ms
2026-02-24 10:03:55.691 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getCacheStats returned: ResponseEntity
2026-02-24 10:03:55.691 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:03:55.694 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 3ms
2026-02-24 10:03:55.694 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:03:57.905 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.905] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:57.905 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.905] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:57.907 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1016985553 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:57.907 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.907] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:57.908 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:57.907] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:57.908 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:57.911 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:57.911] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:57.911 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.911] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:57.916 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1016985553 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:57.916 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:57.941 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-24 10:03:57.944 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@135487442 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:03:57.946 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.946] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-24 10:03:57.946 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:57.946] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-24 10:03:57.969 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-24 10:03:57.976 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(sal1_0.log_id) from security_audit_logs sal1_0
2026-02-24 10:03:57.977 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:57.977] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-24 10:03:57.977 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:57.977] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-24 10:03:57.977 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@135487442 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:03:58.035 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 94ms
2026-02-24 10:03:58.035 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-24 10:03:58.047 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.047] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:03:58.047 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.047] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:03:58.048 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2024534727 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:58.049 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.049] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:03:58.049 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:58.049] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:58.050 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:03:58.051 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:58.051] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:03:58.051 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.051] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:03:58.051 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2024534727 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:58.052 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:03:58.055 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-24 10:03:58.057 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1608913717 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:03:58.058 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.058] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-24 10:03:58.058 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:58.058] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-24 10:03:58.060 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-24 10:03:58.067 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(sal1_0.log_id) from security_audit_logs sal1_0
2026-02-24 10:03:58.068 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:03:58.067] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-24 10:03:58.068 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:03:58.068] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-24 10:03:58.068 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1608913717 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:03:58.070 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 14ms
2026-02-24 10:03:58.070 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-24 10:04:00.410 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.410] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:00.411 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.411] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:00.412 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2110729292 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:00.412 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.412] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:00.412 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.412] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:00.413 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:00.415 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.415] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:00.415 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.415] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:00.416 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2110729292 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:00.416 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:00.423 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getAllReviews with arguments: []
2026-02-24 10:04:00.423 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@25537201 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:00.423 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.423] ENTERING: ReviewServiceImpl.getAllReviews with arguments: []
2026-02-24 10:04:00.427 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.427] TRANSACTION START: ReviewServiceImpl.getAllReviews()
2026-02-24 10:04:00.432 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0
2026-02-24 10:04:00.440 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:00.444 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:04:00.447 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.447] TRANSACTION COMMIT: ReviewServiceImpl.getAllReviews()
2026-02-24 10:04:00.447 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.447] EXITING: ReviewServiceImpl.getAllReviews returned: ArrayList
2026-02-24 10:04:00.447 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@25537201 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:00.447 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getAllReviews responded in 24ms
2026-02-24 10:04:00.447 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getAllReviews returned: ResponseEntity
2026-02-24 10:04:00.455 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.455] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:00.456 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.456] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:00.458 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2058247738 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:00.458 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.458] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:00.458 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.458] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:00.459 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:00.460 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:00.460] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:00.461 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:00.461] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:00.461 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2058247738 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:00.461 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:00.463 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getAllReviews with arguments: []
2026-02-24 10:04:00.463 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getAllReviews responded in 0ms
2026-02-24 10:04:00.463 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getAllReviews returned: ResponseEntity
2026-02-24 10:04:01.911 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.911] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:01.911 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.911] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:01.912 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1293446522 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:01.912 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.912] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:01.912 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.912] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:01.915 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:01.915 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.915] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:01.915 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.915] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:01.915 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1293446522 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:01.916 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:01.919 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-24 10:04:01.920 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1225377164 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:01.921 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.920] ENTERING: ProductServiceImpl.getAllProducts with arguments: []
2026-02-24 10:04:01.921 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.921] TRANSACTION START: ProductServiceImpl.getAllProducts()
2026-02-24 10:04:01.924 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 join categories c1_0 on c1_0.category_id=p1_0.category_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id
2026-02-24 10:04:01.942 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.942] TRANSACTION COMMIT: ProductServiceImpl.getAllProducts()
2026-02-24 10:04:01.942 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.942] EXITING: ProductServiceImpl.getAllProducts returned: ArrayList
2026-02-24 10:04:01.942 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1225377164 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:01.943 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getAllProducts responded in 23ms
2026-02-24 10:04:01.943 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-24 10:04:01.949 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.949] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:01.949 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.949] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:01.950 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1821330016 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:01.950 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.950] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:01.950 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.950] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:01.952 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:01.954 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:01.952] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:01.954 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:01.954] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:01.954 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1821330016 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:01.954 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:01.957 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-24 10:04:01.958 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getAllProducts responded in 1ms
2026-02-24 10:04:01.958 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-24 10:04:03.118 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.118] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:03.118 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.118] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:03.121 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1127039148 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:03.121 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.121] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:03.121 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.121] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:03.122 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:03.123 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.123] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:03.123 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.123] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:03.123 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1127039148 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:03.124 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:03.131 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: UserController.getAllUsers with arguments: []
2026-02-24 10:04:03.131 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1992361020 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:03.132 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.132] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:04:03.132 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.132] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:04:03.134 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:04:03.142 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.142] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:04:03.142 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.142] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:04:03.143 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1992361020 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:03.143 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint UserController.getAllUsers responded in 12ms
2026-02-24 10:04:03.143 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: UserController.getAllUsers returned: ResponseEntity
2026-02-24 10:04:03.153 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.153] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:03.153 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.153] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:03.154 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1256889807 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:03.155 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.155] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:03.155 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.155] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:03.155 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:03.157 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.157] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:03.157 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.157] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:03.157 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1256889807 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:03.157 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:03.159 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: UserController.getAllUsers with arguments: []
2026-02-24 10:04:03.159 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1121936238 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:03.159 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.159] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:04:03.160 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.159] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:04:03.161 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:04:03.165 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:03.164] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:04:03.165 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:03.165] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:04:03.165 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1121936238 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:03.166 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint UserController.getAllUsers responded in 7ms
2026-02-24 10:04:03.166 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: UserController.getAllUsers returned: ResponseEntity
2026-02-24 10:04:08.220 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.220] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:08.220 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.220] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:08.221 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@81156508 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:08.221 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.221] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:08.221 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:08.221] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:08.222 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:08.223 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:08.223] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:08.223 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.223] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:08.224 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@81156508 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:08.225 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:08.237 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1556722120 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:08.238 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.238] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:04:08.238 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:08.238] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:04:08.240 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:04:08.246 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:04:08.247 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.250 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:08.251 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.251 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:04:08.253 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.253 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.255 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.256 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.256 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:08.257 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.258 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.258 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.258 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.260 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.261 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.262 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:08.263 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.266 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.266 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.267 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.268 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.268 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.268 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.270 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.271 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.271 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.272 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:08.273 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:04:08.274 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.275 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.277 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.278 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:08.280 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.281 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.282 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.282 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.282 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.283 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.284 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.284 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.284 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:08.286 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:08.286 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:08.287 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:08.286] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:04:08.287 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:08.287] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:04:08.287 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1556722120 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:12.635 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.635] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:12.637 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.637] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:12.639 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1781945876 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:12.639 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.639] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:12.639 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.639] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:12.640 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:12.641 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.641] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:12.641 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.641] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:12.642 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1781945876 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:12.643 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:12.647 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.processPayment with arguments: [31, TXN-U6A7KWO7F]
2026-02-24 10:04:12.647 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.647] ENTERING: OrderServiceImpl.processPayment with arguments: [31, TXN-U6A7KWO7F]
2026-02-24 10:04:12.650 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.650] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:12.653 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.653] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:12.655 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:04:12.660 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:12.661 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.661] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #31 status changed from PENDING to PROCESSING, true]
2026-02-24 10:04:12.661 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.661] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:04:12.661 [task-5] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:04:12.662 [task-5] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-24 10:04:12.662 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.662] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:04:12.662 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.662] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:04:12.662 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:12.664 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:12.666 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:04:12.666 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.666] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:12.666 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.666] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:12.667 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.667] EXITING: OrderServiceImpl.processPayment returned: OrderResponse
2026-02-24 10:04:12.668 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:04:12.671 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.processPayment responded in 24ms
2026-02-24 10:04:12.671 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.processPayment returned: ResponseEntity
2026-02-24 10:04:12.681 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.681] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:12.681 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.681] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:12.684 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1434975744 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:12.685 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.685] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:12.685 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.685] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:12.689 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:12.690 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:12.690] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:12.694 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:12.694] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:12.695 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1434975744 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:12.696 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:18.199 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.199] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:18.199 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.199] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:18.201 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@593434605 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:18.201 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.201] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:18.201 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.201] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:18.202 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:18.204 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.203] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:18.204 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.204] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:18.204 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@593434605 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:18.205 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:18.206 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.processPayment with arguments: [32, TXN-A1CQZ6L4M]
2026-02-24 10:04:18.207 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.207] ENTERING: OrderServiceImpl.processPayment with arguments: [32, TXN-A1CQZ6L4M]
2026-02-24 10:04:18.208 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.208] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:18.208 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.208] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:18.208 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:04:18.212 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:04:18.214 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.214] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #32 status changed from PENDING to PROCESSING, true]
2026-02-24 10:04:18.215 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.215] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:04:18.215 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:04:18.216 [task-6] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:04:18.217 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:18.218 [task-6] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-24 10:04:18.218 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.218] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:04:18.218 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.218] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:04:18.218 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:04:18.219 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.219] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:18.220 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.220] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:18.220 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.220] EXITING: OrderServiceImpl.processPayment returned: OrderResponse
2026-02-24 10:04:18.222 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:04:18.223 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.processPayment responded in 16ms
2026-02-24 10:04:18.223 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.processPayment returned: ResponseEntity
2026-02-24 10:04:18.230 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.230] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:18.232 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.230] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:18.232 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@492111060 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f] read-only
2026-02-24 10:04:18.232 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.232] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:18.233 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.232] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:18.233 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:18.234 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:18.234] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:18.234 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:18.234] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:18.234 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@492111060 wrapping org.postgresql.jdbc.PgConnection@7ba37d9f]
2026-02-24 10:04:18.236 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:20.307 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.307] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:20.307 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.307] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:20.308 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1399591147 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:20.308 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.308] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:20.308 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.308] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:20.309 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:20.310 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.310] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:20.310 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.310] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:20.311 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1399591147 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:20.311 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:20.318 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:04:20.318 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.318] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:04:20.318 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.318] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:04:20.320 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.320] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:04:20.320 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.320] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:04:20.321 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:04:20.447 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.447] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:20.447 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:20.447] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:20.447 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 129ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:20.448 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:20.448] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:04:20.448 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:04:20.448 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:20.448 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:04:20.508 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 190ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:21.585 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.585] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:21.585 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.585] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:21.589 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1786414041 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:21.589 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.589] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:21.590 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.590] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:21.591 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:21.593 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.593] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:21.593 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.593] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:21.594 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1786414041 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:21.595 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:21.605 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, PROCESSING]
2026-02-24 10:04:21.605 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.605] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [31, PROCESSING]
2026-02-24 10:04:21.605 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.605] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, PROCESSING]
2026-02-24 10:04:21.606 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.605] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:04:21.606 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.606] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:04:21.606 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:04:21.608 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.608] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:21.609 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:21.609] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:21.609 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 4ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:21.610 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:21.610] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [31, PROCESSING]
2026-02-24 10:04:21.610 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:04:21.611 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:21.611 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:04:21.614 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 9ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:04:32.276 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.276] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:32.276 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.276] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:32.277 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@438942335 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:32.278 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.278] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:32.278 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:32.278] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:32.279 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:32.282 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:32.282] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:32.282 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.282] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:32.282 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@438942335 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:32.283 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:32.286 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:04:32.287 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-24 10:04:32.287 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:04:32.292 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.291] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:32.292 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.292] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:32.293 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1781745393 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:32.293 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.293] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:32.293 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:32.293] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:32.293 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:32.295 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:32.295] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:32.295 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:32.295] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:32.296 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1781745393 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:32.297 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:32.300 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:04:32.300 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:04:32.300 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:04:34.119 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.119] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:34.119 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.119] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:34.120 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2066387151 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:34.121 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.120] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:34.121 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.121] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.121 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:34.122 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.122] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.122 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.122] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:34.123 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.123] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:34.123 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.123] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:34.123 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2066387151 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:34.124 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:34.124 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1922027439 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:34.125 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.125] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:34.125 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.125] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.126 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:34.126 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:04:34.127 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:04:34.127 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:04:34.127 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.127] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.127 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.127] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:34.127 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1922027439 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:34.128 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:34.132 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.132] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:34.133 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.132] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:34.133 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-24 10:04:34.133 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@515300685 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:34.134 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.134] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:34.134 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.134] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.134 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2059247329 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:34.134 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.134] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3dbb564b, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-24 10:04:34.134 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.134] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:34.135 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:34.135 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:04:34.136 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.136] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.136 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.136] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:34.137 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@515300685 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:34.137 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:34.139 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:04:34.139 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-24 10:04:34.139 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:04:34.146 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.150 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.151 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.152 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.153 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.154 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.155 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.155 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.157 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.158 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.162 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:04:34.164 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:04:34.168 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.168] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:34.168 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.168] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:04:34.168 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2059247329 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:34.168 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 35ms
2026-02-24 10:04:34.168 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:04:34.186 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.186] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:34.187 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.187] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:34.192 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1561898890 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:34.193 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.193] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:34.194 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.194] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.196 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:34.198 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.198] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:34.198 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.198] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:34.199 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1561898890 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:34.200 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:34.207 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-24 10:04:34.211 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1266660986 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:34.211 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.211] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@7b80aeb1, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-24 10:04:34.212 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.212] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:34.213 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:04:34.216 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.218 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.219 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.220 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.222 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.224 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.229 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.231 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.232 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.233 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:34.239 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:04:34.240 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:04:34.242 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:34.242] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:34.242 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:34.242] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:04:34.243 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1266660986 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:34.243 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 36ms
2026-02-24 10:04:34.243 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:04:35.315 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.315] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:35.315 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.315] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:35.316 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.316] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:35.316 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.316] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:35.320 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1780075869 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:35.320 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.320] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:35.321 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.321] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.321 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@690042070 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:35.322 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:35.322 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.322] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:35.322 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.322] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.325 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:35.329 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.329] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.329 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.329] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:35.330 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@690042070 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:35.331 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:35.332 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.332] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.332 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.332] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:35.333 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1780075869 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:35.334 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:35.337 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:04:35.338 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-24 10:04:35.338 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:04:35.347 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.347] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:35.347 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.347] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:35.348 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@820094080 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:35.348 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.348] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:35.348 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.348] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.349 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:35.350 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.350] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:35.350 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.350] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:35.350 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@820094080 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:35.350 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1302383840 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:35.352 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.352] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:04:35.352 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.352] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:04:35.352 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:35.354 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:04:35.354 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:04:35.355 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-24 10:04:35.355 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:04:35.361 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.361] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:04:35.362 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.362] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:04:35.362 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1302383840 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:35.368 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@37263706 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:35.369 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.369] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:04:35.369 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.369] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:35.370 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:04:35.371 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.373 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.374 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.375 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.376 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.377 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.377 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.378 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.379 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.379 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.382 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.383 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.383 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.384 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.385 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.385 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.386 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.387 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:35.393 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:04:35.395 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:04:35.397 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.397] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:35.397 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.397] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:04:35.397 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@37263706 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:35.484 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1942185431 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:35.484 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.484] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:04:35.484 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.484] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:04:35.486 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.488 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.490 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.493 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.494 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.495 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.496 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.498 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.499 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.501 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.502 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.503 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.505 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.506 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.508 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.509 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.510 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.511 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.513 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.514 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.515 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.516 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.517 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.519 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:35.520 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:35.520 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:35.520] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:04:35.520 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:35.520] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:04:35.521 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1942185431 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:36.490 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:36.490] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:36.492 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:36.492] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:36.493 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1439822675 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:36.493 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:36.493] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:36.494 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:36.493] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:36.494 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:36.496 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:36.496] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:36.496 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:36.496] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:36.497 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1439822675 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:36.497 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:41.897 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.897] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:41.898 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.898] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:41.896 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.896] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:41.898 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.898] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:41.900 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@374774033 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:41.901 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@746182079 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:04:41.901 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.901] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:41.901 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.901] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:41.901 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.901] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.901 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.901] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.902 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:41.902 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:41.902 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.902] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.902 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.902] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.902 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.902] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:41.902 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.902] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:41.902 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@746182079 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:04:41.902 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@374774033 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:41.904 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:41.904 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:41.906 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:04:41.908 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 2ms
2026-02-24 10:04:41.908 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:04:41.914 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.914] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:41.914 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.914] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:41.915 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@838552854 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:41.915 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.915] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:41.915 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.915] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.916 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:41.917 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.917] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:41.917 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.917] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:41.918 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@838552854 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:41.919 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:41.920 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2000366889 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:41.920 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.920] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:04:41.920 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.920] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:04:41.922 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:04:41.922 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:04:41.926 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 4ms
2026-02-24 10:04:41.926 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:04:41.927 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.927] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:04:41.927 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.927] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:04:41.928 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2000366889 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:41.938 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@69181662 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:41.938 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.938] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:04:41.938 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.938] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:41.939 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:04:41.941 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.941 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.942 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.942 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.944 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.945 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.945 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.946 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.946 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.947 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.948 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.949 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.950 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.951 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.951 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.953 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.954 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.954 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.955 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.955 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:04:41.959 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:04:41.961 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:04:41.962 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:41.962] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:04:41.962 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:41.962] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:04:41.964 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@69181662 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:42.034 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1998482075 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:42.034 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:42.034] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:04:42.035 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:42.034] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:04:42.035 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.037 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.038 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.040 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.040 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.041 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.042 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.043 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.044 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.044 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.046 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.047 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.048 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.050 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.051 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.053 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.053 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.056 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.057 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.058 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.058 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.060 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.060 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.061 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:04:42.062 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:04:42.064 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:42.064] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:04:42.064 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:42.064] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:04:42.065 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1998482075 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:43.647 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:43.647] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:43.649 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:43.649] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:43.650 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@771912106 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:43.650 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:43.650] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:43.650 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:43.650] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:43.651 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:43.652 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:43.652] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:43.652 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:43.652] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:43.652 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@771912106 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:43.654 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:44.815 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.815] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:04:44.815 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.815] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:04:44.816 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@601497695 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:04:44.817 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.817] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:04:44.817 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.817] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:44.818 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:04:44.819 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.819] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:04:44.819 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.819] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:04:44.819 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@601497695 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:04:44.819 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:04:44.822 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.processPayment with arguments: [32, TXN-K5CR7PZ1R]
2026-02-24 10:04:44.823 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.823] ENTERING: OrderServiceImpl.processPayment with arguments: [32, TXN-K5CR7PZ1R]
2026-02-24 10:04:44.823 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.823] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:44.823 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.823] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:04:44.823 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.874] TRANSACTION ROLLBACK: OrderServiceImpl.processPayment(Integer, String) - Exception: Order is already paid
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:04:44.875] TRANSACTION ROLLBACK: OrderServiceImpl.processPayment(Integer, String) - Exception: Order is already paid
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.processPayment(Integer, String) failed after 52ms with exception: Order is already paid
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:04:44.875] EXCEPTION in OrderServiceImpl.processPayment with arguments: [32, TXN-K5CR7PZ1R]
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: ValidationException
2026-02-24 10:04:44.875 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Order is already paid
2026-02-24 10:04:44.876 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Order is already paid
	at com.shopjoy.service.impl.OrderServiceImpl.processPayment(OrderServiceImpl.java:518)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.processPayment(<generated>)
	at com.shopjoy.controller.OrderController.processPayment(OrderController.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.processPayment(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:877)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:04:44.879 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.processPayment with arguments: [32, TXN-K5CR7PZ1R]
2026-02-24 10:04:44.879 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Order is already paid
2026-02-24 10:04:44.879 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Order is already paid
	at com.shopjoy.service.impl.OrderServiceImpl.processPayment(OrderServiceImpl.java:518)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.processPayment(<generated>)
	at com.shopjoy.controller.OrderController.processPayment(OrderController.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.processPayment(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:877)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:04:44.890 [http-nio-8080-exec-4] WARN  c.s.exception.GlobalExceptionHandler - Business validation failed: Order is already paid
2026-02-24 10:05:02.429 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.429] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:05:02.429 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.429] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:05:02.431 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@151572975 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:05:02.431 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.431] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:05:02.431 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.431] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:05:02.433 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:05:02.434 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.434] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:05:02.435 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.435] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:05:02.435 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@151572975 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:05:02.436 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:05:02.445 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:05:02.446 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.446] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:05:02.446 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.446] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:05:02.447 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.447] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:05:02.447 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.447] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:05:02.447 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:05:02.457 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.456] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:05:02.457 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:05:02.457] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:05:02.457 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 11ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:05:02.458 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:05:02.458] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:05:02.458 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:05:02.458 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:05:02.458 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:05:02.461 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 16ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:06:39.343 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-24 10:06:39.344 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getAllProducts responded in 1ms
2026-02-24 10:06:39.344 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-24 10:07:53.591 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.591] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:07:53.591 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.591] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:07:53.594 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@974613927 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:07:53.596 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.596] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:07:53.596 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.596] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:53.599 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:07:53.602 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.602] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:53.602 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.602] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:07:53.604 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@974613927 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:07:53.605 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:07:53.625 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:07:53.625 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.625] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:07:53.626 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.626] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:07:53.626 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.626] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:07:53.626 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.626] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:07:53.649 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:07:53.653 [http-nio-8080-exec-10] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.653] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:07:53.653 [http-nio-8080-exec-10] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:53.653] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:07:53.653 [http-nio-8080-exec-10] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 27ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:07:53.654 [http-nio-8080-exec-10] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:53.654] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:07:53.654 [http-nio-8080-exec-10] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:07:53.654 [http-nio-8080-exec-10] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:07:53.654 [http-nio-8080-exec-10] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:07:53.769 [http-nio-8080-exec-10] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 143ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:07:57.476 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.476] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:07:57.477 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.477] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:07:57.479 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@447532802 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:07:57.480 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.480] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:07:57.480 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.480] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.481 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:07:57.481 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.481] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:07:57.483 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.483] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:07:57.483 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.483] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.483 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.483] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:07:57.484 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@447532802 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:07:57.485 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:07:57.485 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@232722820 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:07:57.485 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.485] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:07:57.485 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.485] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.489 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:07:57.489 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:07:57.494 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 3ms
2026-02-24 10:07:57.494 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:07:57.499 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.497] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.499 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.499] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:07:57.502 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@232722820 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:07:57.503 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:07:57.520 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.520] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:07:57.521 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.521] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:07:57.523 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@308094445 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:07:57.524 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.523] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:07:57.524 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.524] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.533 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:07:57.535 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.535] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:07:57.535 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.535] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:07:57.536 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@308094445 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:07:57.537 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:07:57.544 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:07:57.552 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 7ms
2026-02-24 10:07:57.552 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:07:57.592 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@415524809 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:07:57.592 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.592] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:07:57.592 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.592] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:07:57.615 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:07:57.622 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.622] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:07:57.623 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.623] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:07:57.623 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@415524809 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:07:57.645 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1839868701 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:07:57.645 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:57.645] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:07:57.645 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:57.645] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:07:57.777 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:07:57.780 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.782 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.783 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.784 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.785 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.787 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.789 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.791 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.871 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.872 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.876 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.877 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.880 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.882 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.883 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.893 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.915 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.938 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.964 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:57.992 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:07:58.000 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:07:58.006 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:07:58.013 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:58.012] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:07:58.013 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:58.013] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:07:58.014 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1839868701 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:07:59.073 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1653431903 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:07:59.073 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:59.073] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-24 10:07:59.074 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:59.073] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:07:59.074 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-24 10:07:59.081 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:07:59.088 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:07:59.088] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:07:59.089 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:07:59.089] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-24 10:07:59.090 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1653431903 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:08:04.686 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:04.686] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:04.686 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:04.686] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:04.690 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@13555906 wrapping org.postgresql.jdbc.PgConnection@46a3be68] read-only
2026-02-24 10:08:04.690 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:04.690] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:04.690 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:04.690] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:04.691 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:04.694 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:04.694] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:04.694 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:04.694] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:04.694 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@13555906 wrapping org.postgresql.jdbc.PgConnection@46a3be68]
2026-02-24 10:08:04.695 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:06.829 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.829] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:06.829 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.829] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:06.833 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@585365311 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:06.833 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.833] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:06.834 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.834] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:06.835 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:06.837 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.837] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:06.837 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.837] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:06.838 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@585365311 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:06.839 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:06.844 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.processPayment with arguments: [32, TXN-L76O91IWQ]
2026-02-24 10:08:06.845 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.845] ENTERING: OrderServiceImpl.processPayment with arguments: [32, TXN-L76O91IWQ]
2026-02-24 10:08:06.846 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.846] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:08:06.846 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.846] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-24 10:08:06.848 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.850] TRANSACTION ROLLBACK: OrderServiceImpl.processPayment(Integer, String) - Exception: Order is already paid
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:06.851] TRANSACTION ROLLBACK: OrderServiceImpl.processPayment(Integer, String) - Exception: Order is already paid
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.processPayment(Integer, String) failed after 5ms with exception: Order is already paid
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:06.851] EXCEPTION in OrderServiceImpl.processPayment with arguments: [32, TXN-L76O91IWQ]
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: ValidationException
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Order is already paid
2026-02-24 10:08:06.851 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Order is already paid
	at com.shopjoy.service.impl.OrderServiceImpl.processPayment(OrderServiceImpl.java:518)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.processPayment(<generated>)
	at com.shopjoy.controller.OrderController.processPayment(OrderController.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.processPayment(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:877)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:08:06.857 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.processPayment with arguments: [32, TXN-L76O91IWQ]
2026-02-24 10:08:06.857 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Order is already paid
2026-02-24 10:08:06.857 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Order is already paid
	at com.shopjoy.service.impl.OrderServiceImpl.processPayment(OrderServiceImpl.java:518)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.processPayment(<generated>)
	at com.shopjoy.controller.OrderController.processPayment(OrderController.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.processPayment(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:877)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:08:06.861 [http-nio-8080-exec-1] WARN  c.s.exception.GlobalExceptionHandler - Business validation failed: Order is already paid
2026-02-24 10:08:10.087 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.087] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:10.087 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.087] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:10.089 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1772305707 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:10.090 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.090] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:10.090 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.090] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:10.091 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:10.094 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.094] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:10.094 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.094] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:10.095 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1772305707 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:10.095 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:10.107 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:08:10.110 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.109] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:08:10.110 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.110] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, PROCESSING]
2026-02-24 10:08:10.110 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.110] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:10.111 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.111] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:10.112 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:08:10.114 [http-nio-8080-exec-6] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.114] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:10.114 [http-nio-8080-exec-6] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.114] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:10.114 [http-nio-8080-exec-6] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 4ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:10.115 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.115] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [32, PROCESSING]
2026-02-24 10:08:10.115 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:08:10.115 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:10.115 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:08:10.119 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 12ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:10.284 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.284] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:10.284 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.284] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:10.286 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1719343584 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:10.286 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.286] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:10.287 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.287] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:10.288 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:10.289 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:10.289] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:10.289 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:10.289] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:10.290 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1719343584 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:10.291 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:12.658 [http-nio-8080-exec-3] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW GRAPHQL RESOLVER: InventoryQueryResolver.lowStockProducts took 13.59s
2026-02-24 10:08:12.708 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@225762857 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:12.709 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:12.709] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:08:12.710 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:12.709] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:08:12.711 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.713 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.715 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.717 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.719 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.721 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.723 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.726 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.727 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.729 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.730 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.733 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.734 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.736 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.738 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.740 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.743 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.745 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.747 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.749 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.750 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.752 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.754 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.758 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:12.759 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:12.760 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:12.760] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:08:12.761 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:12.761] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:08:12.761 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@225762857 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:13.415 [http-nio-8080-exec-3] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
jakarta.servlet.ServletException: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.web.servlet.function.ErrorHandlingServerResponse.handleError(ErrorHandlingServerResponse.java:69)
	at org.springframework.web.servlet.function.AbstractServerResponse.writeTo(AbstractServerResponse.java:97)
	at org.springframework.web.servlet.function.CompletedAsyncServerResponse.writeTo(CompletedAsyncServerResponse.java:74)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:110)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.http.converter.AbstractJacksonHttpMessageConverter.writeInternal(AbstractJacksonHttpMessageConverter.java:444)
	at org.springframework.http.converter.AbstractSmartHttpMessageConverter.write(AbstractSmartHttpMessageConverter.java:117)
	at org.springframework.web.servlet.function.DefaultEntityResponseBuilder$DefaultEntityResponse.writeEntityWithMessageConverters(DefaultEntityResponseBuilder.java:310)
	at org.springframework.web.servlet.function.DefaultEntityResponseBuilder$DefaultEntityResponse.writeToInternal(DefaultEntityResponseBuilder.java:267)
	at org.springframework.web.servlet.function.AbstractServerResponse.writeTo(AbstractServerResponse.java:93)
	... 131 common frames omitted
Caused by: tools.jackson.core.exc.JacksonIOException: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
 at [No location information]
	at tools.jackson.core.exc.JacksonIOException.construct(JacksonIOException.java:39)
	at tools.jackson.core.JsonGenerator._wrapIOFailure(JsonGenerator.java:2476)
	at tools.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2343)
	at tools.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1235)
	at tools.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:975)
	at org.springframework.http.converter.AbstractJacksonHttpMessageConverter.writeInternal(AbstractJacksonHttpMessageConverter.java:436)
	... 135 common frames omitted
Caused by: org.springframework.web.context.request.async.AsyncRequestNotUsableException: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse.handleIOException(StandardServletAsyncWebRequest.java:340)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:399)
	at org.springframework.util.StreamUtils$NonClosingOutputStream.write(StreamUtils.java:284)
	at tools.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2341)
	... 138 common frames omitted
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:328)
	at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:764)
	at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:661)
	at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:363)
	at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:341)
	at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:99)
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.write(OnCommittedResponseWrapper.java:639)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:396)
	... 140 common frames omitted
Caused by: java.io.IOException: An established connection was aborted by the software in your host machine
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:57)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:562)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:614)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1418)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:747)
	at org.apache.tomcat.util.net.SocketWrapperBase.writeBlocking(SocketWrapperBase.java:587)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:535)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.doWrite(Http11OutputBuffer.java:537)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:109)
	at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:193)
	at org.apache.coyote.Response.doWrite(Response.java:633)
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:316)
	... 147 common frames omitted
2026-02-24 10:08:13.853 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.852] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:13.853 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.853] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:13.856 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@896706782 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:13.857 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.857] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:13.857 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.857] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:13.858 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:13.859 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.859] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:13.860 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.860] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:13.860 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@896706782 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:13.861 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:13.877 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, PROCESSING]
2026-02-24 10:08:13.877 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.877] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [31, PROCESSING]
2026-02-24 10:08:13.878 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.878] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, PROCESSING]
2026-02-24 10:08:13.878 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.878] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:13.879 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.879] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:13.880 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.883] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:13.883] TRANSACTION ROLLBACK: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) - Exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) failed after 5ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:13.883] EXCEPTION in OrderServiceImpl.updateOrderStatus with arguments: [31, PROCESSING]
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: InvalidOrderStateException
2026-02-24 10:08:13.883 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:13.884 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.InvalidOrderStateException: Cannot Can only process PENDING orders order 0 in state: PROCESSING
	at com.shopjoy.service.impl.OrderServiceImpl.validateStatusTransition(OrderServiceImpl.java:470)
	at com.shopjoy.service.impl.OrderServiceImpl.updateOrderStatus(OrderServiceImpl.java:252)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver.updateOrderStatus(OrderMutationResolver.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorGraphQLPerformance(PerformanceAspect.java:129)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.graphql.resolver.mutation.OrderMutationResolver$$SpringCGLIB$$0.updateOrderStatus(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.graphql.data.method.InvocableHandlerMethodSupport.doInvoke(InvocableHandlerMethodSupport.java:120)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.validateAndInvoke(DataFetcherHandlerMethod.java:144)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:128)
	at org.springframework.graphql.data.method.annotation.support.DataFetcherHandlerMethod.invoke(DataFetcherHandlerMethod.java:107)
	at org.springframework.graphql.data.method.annotation.support.AnnotatedControllerConfigurer$SchemaMappingDataFetcher.get(AnnotatedControllerConfigurer.java:522)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.lambda$get$0(ContextDataFetcherDecorator.java:92)
	at io.micrometer.context.ContextSnapshot.lambda$wrap$1(ContextSnapshot.java:106)
	at org.springframework.graphql.execution.ContextDataFetcherDecorator.get(ContextDataFetcherDecorator.java:92)
	at org.springframework.graphql.observation.GraphQlObservationInstrumentation.lambda$instrumentDataFetcher$0(GraphQlObservationInstrumentation.java:209)
	at graphql.execution.ExecutionStrategy.invokeDataFetcher(ExecutionStrategy.java:512)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:466)
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:404)
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:360)
	at graphql.execution.AsyncSerialExecutionStrategy.resolveSerialField(AsyncSerialExecutionStrategy.java:73)
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$0(AsyncSerialExecutionStrategy.java:57)
	at graphql.execution.Async.eachSequentiallyPolymorphicImpl(Async.java:332)
	at graphql.execution.Async.eachSequentially(Async.java:320)
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:52)
	at graphql.execution.Execution.executeOperation(Execution.java:220)
	at graphql.execution.Execution.execute(Execution.java:139)
	at graphql.GraphQL.execute(GraphQL.java:620)
	at graphql.GraphQL.lambda$parseValidateAndExecute$5(GraphQL.java:549)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:544)
	at graphql.GraphQL.lambda$executeAsync$1(GraphQL.java:504)
	at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1208)
	at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2368)
	at graphql.EngineRunningState.compose(EngineRunningState.java:91)
	at graphql.GraphQL.lambda$executeAsync$2(GraphQL.java:493)
	at graphql.EngineRunningState.engineRun(EngineRunningState.java:202)
	at graphql.GraphQL.executeAsync(GraphQL.java:485)
	at org.springframework.graphql.execution.DefaultExecutionGraphQlService.lambda$execute$0(DefaultExecutionGraphQlService.java:95)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:48)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4569)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:4634)
	at reactor.core.publisher.Mono.toFuture(Mono.java:5146)
	at org.springframework.graphql.server.webmvc.GraphQlHttpHandler.prepareResponse(GraphQlHttpHandler.java:119)
	at org.springframework.graphql.server.webmvc.AbstractGraphQlHttpHandler.handleRequest(AbstractGraphQlHttpHandler.java:135)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:106)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:08:13.891 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) after 13ms with exception: Cannot Can only process PENDING orders order 0 in state: PROCESSING
2026-02-24 10:08:14.150 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:14.150] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:14.150 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:14.150] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:14.152 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1177868243 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:14.153 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:14.153] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:14.154 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:14.154] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:14.156 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:14.158 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:14.158] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:14.158 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:14.158] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:14.160 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1177868243 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:14.161 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:19.677 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.677] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:19.679 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.677] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:19.681 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@714957240 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:19.682 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.681] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:19.682 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.682] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:19.684 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:19.686 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.686] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:19.686 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.686] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:19.687 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@714957240 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:19.687 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:19.700 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, CANCELLED]
2026-02-24 10:08:19.700 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.700] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [32, CANCELLED]
2026-02-24 10:08:19.700 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.700] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [32, CANCELLED]
2026-02-24 10:08:19.700 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.700] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:19.700 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.700] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:19.703 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:08:19.706 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:19.709 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:19.710 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.710] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #32 status changed from PROCESSING to CANCELLED, true]
2026-02-24 10:08:19.718 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.718] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:08:19.719 [task-7] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:08:19.726 [task-7] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-24 10:08:19.727 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.727] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:08:19.727 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.727] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:08:19.741 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:19.743 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:08:19.745 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.745] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:19.745 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.745] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:08:19.746 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.746] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-24 10:08:19.746 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 46ms
2026-02-24 10:08:19.747 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:08:19.949 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.949] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:08:19.950 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.950] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:08:19.953 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1368533901 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:19.955 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.955] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:08:19.955 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.955] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:19.957 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:08:19.960 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:19.960] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:08:19.960 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:19.960] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:08:19.964 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1368533901 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:08:19.965 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:08:20.020 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1633087356 wrapping org.postgresql.jdbc.PgConnection@3f66735b] read-only
2026-02-24 10:08:20.020 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:20.020] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:08:20.021 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:20.021] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:08:20.034 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:08:20.045 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:08:20.047 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.052 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:20.055 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.058 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:08:20.066 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.069 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.070 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.072 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.074 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:20.078 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.082 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.084 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.086 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.088 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.089 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.092 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:20.098 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.100 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.104 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.105 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.107 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.108 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.110 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.112 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.115 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.117 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.119 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:20.122 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:08:20.126 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.128 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.133 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.136 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:08:20.139 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.141 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.142 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.144 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.147 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.151 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.152 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.155 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.156 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:08:20.158 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:08:20.160 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:08:20.166 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:08:20.166] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:08:20.167 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:08:20.167] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:08:20.167 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1633087356 wrapping org.postgresql.jdbc.PgConnection@3f66735b]
2026-02-24 10:09:32.930 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:32.930] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:09:32.931 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:32.931] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:09:32.937 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1525546365 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:32.937 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:32.937] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:09:32.937 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:32.937] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:32.940 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:09:32.955 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:32.955] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:32.956 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:32.956] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:09:32.957 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1525546365 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:09:32.958 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:09:32.977 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, SHIPPED]
2026-02-24 10:09:32.977 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:32.977] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [31, SHIPPED]
2026-02-24 10:09:32.980 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:32.979] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, SHIPPED]
2026-02-24 10:09:32.980 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:32.980] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:32.980 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:32.980] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:32.981 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:09:32.997 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.008 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.030 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.037 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:09:33.041 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.041] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:33.041 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.041] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:33.042 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.042] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-24 10:09:33.042 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 65ms
2026-02-24 10:09:33.044 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:09:33.077 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.077] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #31 status changed from PROCESSING to SHIPPED, true]
2026-02-24 10:09:33.077 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.077] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:09:33.078 [task-8] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:09:33.081 [task-8] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-24 10:09:33.081 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.081] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:09:33.081 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.081] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:09:33.306 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.306] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:09:33.306 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.306] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:09:33.308 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1954409646 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:33.308 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.308] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:09:33.308 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.308] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:33.309 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:09:33.311 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.311] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:33.312 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.312] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:09:33.312 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1954409646 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:09:33.313 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:09:33.336 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1753711311 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:33.337 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.337] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:09:33.337 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.337] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:09:33.346 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:09:33.355 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:09:33.357 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.359 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:33.363 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.365 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:09:33.368 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.371 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.373 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.374 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.376 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:33.379 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.384 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.386 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.387 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.390 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.392 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:33.395 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.396 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.399 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.400 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.402 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.404 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.406 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.406 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.409 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.411 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.413 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:33.416 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:09:33.418 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.420 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.422 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.423 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:33.427 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.428 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.430 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.431 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.434 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.437 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.438 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.440 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.441 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:33.442 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:33.444 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:33.447 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:33.445] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:09:33.447 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:33.447] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:09:33.448 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1753711311 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:09:34.932 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:34.932] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:09:34.932 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:34.932] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:09:34.941 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1385688337 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:34.941 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:34.941] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:09:34.943 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:34.943] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:34.944 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:09:34.961 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:34.961] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:34.962 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:34.962] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:09:34.984 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1385688337 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:09:34.985 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:09:34.997 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, DELIVERED]
2026-02-24 10:09:34.997 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:34.997] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [31, DELIVERED]
2026-02-24 10:09:34.998 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:34.998] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [31, DELIVERED]
2026-02-24 10:09:34.998 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:34.998] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:34.998 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:34.998] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:34.999 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-24 10:09:35.012 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.027 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.052 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.074 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-24 10:09:35.078 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.078] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:35.079 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.079] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-24 10:09:35.080 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.079] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-24 10:09:35.080 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 83ms
2026-02-24 10:09:35.083 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-24 10:09:35.609 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.609] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:09:35.609 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.609] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:09:35.614 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@284680858 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:35.614 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.614] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:09:35.615 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.615] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:35.615 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:09:35.619 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.619] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:09:35.619 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.619] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:09:35.620 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@284680858 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:09:35.621 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:09:35.621 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.621] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #31 status changed from SHIPPED to DELIVERED, true]
2026-02-24 10:09:35.622 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.621] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:09:35.623 [task-9] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:09:35.625 [task-9] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-24 10:09:35.625 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.625] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-24 10:09:35.626 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.626] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:09:35.676 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1524166259 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:09:35.677 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.676] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:09:35.677 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.677] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:09:35.684 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:09:35.696 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:09:35.698 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.700 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:35.706 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.707 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:09:35.710 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.712 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.715 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.716 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.718 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:35.720 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.723 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.724 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.725 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.727 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.730 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.732 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:35.734 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.736 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.737 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.739 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.740 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.742 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.743 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.745 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.747 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.750 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.751 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:35.754 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:09:35.756 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.757 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.758 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.760 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:09:35.771 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.773 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.774 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.776 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.777 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.780 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.782 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.784 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.785 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:09:35.786 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:09:35.788 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:09:35.790 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:09:35.790] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:09:35.791 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:09:35.791] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:09:35.791 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1524166259 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:15:25.731 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:15:25.730] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 10:15:25.731 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:15:25.731] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 10:20:52.741 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:20:51.460] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:20:55.156 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:20:55.156] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:20:53.008 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:20:52.625] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:20:58.127 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:20:58.127] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:07.954 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:07.954] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:21:08.627 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:08.627] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:22.123 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1598793037 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:21:33.635 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1847633092 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:21:34.408 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:34.408] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:34.447 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:34.447] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:35.985 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:35.985] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:21:36.033 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.033] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:21:36.034 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1040299047 wrapping org.postgresql.jdbc.PgConnection@574061f1] read-only
2026-02-24 10:21:36.158 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.158] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:36.159 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.159] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:36.159 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.159] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:36.248 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:36.248] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:36.248 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:36.248] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:36.296 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1046753627 wrapping org.postgresql.jdbc.PgConnection@47ccb323] read-only
2026-02-24 10:21:36.296 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@76526396 wrapping org.postgresql.jdbc.PgConnection@5ef81c32] read-only
2026-02-24 10:21:36.340 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.340] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:36.340 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:36.340] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:36.382 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:36.294] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:36.473 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:36.473] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:36.657 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:36.657] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:40.267 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:40.268 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:40.268 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:40.268 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:40.268 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:45.351 [http-nio-8080-exec-5] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 8.88s
2026-02-24 10:21:45.351 [http-nio-8080-exec-10] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 8.97s
2026-02-24 10:21:45.759 [http-nio-8080-exec-2] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 8.52s
2026-02-24 10:21:45.800 [http-nio-8080-exec-9] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 8.80s
2026-02-24 10:21:45.886 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:45.886] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:21:45.886 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:45.886] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:45.886 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:45.886] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:45.887 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:45.886] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:45.887 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:45.887] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:45.887 [http-nio-8080-exec-5] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 9.68s
2026-02-24 10:21:45.887 [http-nio-8080-exec-9] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 9.64s
2026-02-24 10:21:45.887 [http-nio-8080-exec-10] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 9.64s
2026-02-24 10:21:45.887 [http-nio-8080-exec-5] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 10.83s
2026-02-24 10:21:45.887 [http-nio-8080-exec-2] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 9.46s
2026-02-24 10:21:45.887 [http-nio-8080-exec-9] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 9.73s
2026-02-24 10:21:45.888 [http-nio-8080-exec-10] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 11.44s
2026-02-24 10:21:45.888 [http-nio-8080-exec-2] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 9.46s
2026-02-24 10:21:45.972 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:45.972] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:45.972 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:45.972] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:45.972 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:45.972] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:45.972 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:45.972] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:46.140 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:46.140] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:47.129 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1099853314 wrapping org.postgresql.jdbc.PgConnection@59745af] read-only
2026-02-24 10:21:47.210 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1046753627 wrapping org.postgresql.jdbc.PgConnection@47ccb323]
2026-02-24 10:21:47.499 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:47.499] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:21:47.829 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1040299047 wrapping org.postgresql.jdbc.PgConnection@574061f1]
2026-02-24 10:21:47.968 [http-nio-8080-exec-4] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 10.23s
2026-02-24 10:21:48.112 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:48.112] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:48.112 [http-nio-8080-exec-4] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 11.64s
2026-02-24 10:21:48.114 [http-nio-8080-exec-4] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 11.69s
2026-02-24 10:21:48.256 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1598793037 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:21:48.326 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:48.326] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:48.741 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:48.741] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:52.615 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:21:53.312 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:53.674 [http-nio-8080-exec-7] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 3.16s
2026-02-24 10:21:54.568 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:54.699 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:21:54.699] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:21:54.700 [http-nio-8080-exec-7] WARN  c.shopjoy.aspect.TransactionAspect - LONG RUNNING TRANSACTION: CustomUserDetailsService.loadUserByUsername(String) took 6.49s
2026-02-24 10:21:54.700 [http-nio-8080-exec-7] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 6.69s
2026-02-24 10:21:55.097 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:55.097] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:21:55.097 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1847633092 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:21:55.097 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@76526396 wrapping org.postgresql.jdbc.PgConnection@5ef81c32]
2026-02-24 10:21:55.135 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:55.136 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:55.136] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:21:55.139 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1099853314 wrapping org.postgresql.jdbc.PgConnection@59745af]
2026-02-24 10:21:55.140 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:55.140 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:55.143 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:21:55.189 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:55.188] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:21:58.430 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@698524356 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:21:59.200 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:21:59.200] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:22:02.311 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:02.311] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:22:03.633 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:22:04.165 [http-nio-8080-exec-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy190.findByUsername took 1.29s
2026-02-24 10:22:04.835 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:04.833] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:22:05.394 [http-nio-8080-exec-1] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: CustomUserDetailsService.loadUserByUsername took 4.91s
2026-02-24 10:22:05.690 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:05.690] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:22:06.010 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@698524356 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:22:06.016 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:22:08.412 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@77260a1f]]
2026-02-24 10:22:12.537 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:12.537] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI3NDIxLCJleHAiOjE3NzIwMTM4MjF9.ZQ8Wgnneky_F65N82T7yUHdZriwXf_1pfWXdfPl3FTEYGXitAxAWXTNuPCZXi2NgDuyFbnl1OdDTFUGbbpEv7g]
2026-02-24 10:22:12.956 [http-nio-8080-exec-7] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 2
2026-02-24 10:22:15.086 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:15.086] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-24 10:22:17.562 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-24 10:22:18.943 [task-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:18.943] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGOUT, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged out successfully, true]
2026-02-24 10:22:22.547 [http-nio-8080-exec-7] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW API ENDPOINT: AuthController.logout took 12.76s
2026-02-24 10:22:22.548 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-24 10:22:22.548 [task-10] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.548] EXCEPTION in SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGOUT, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged out successfully, true]
2026-02-24 10:22:22.548 [task-10] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: NullPointerException
2026-02-24 10:22:22.550 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:22:22.550 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:22:22.551 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:22:22.552 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-24 10:22:22.556 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 5ms
2026-02-24 10:22:22.556 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:22:22.556 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:22:22.553 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 3ms
2026-02-24 10:22:22.557 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:22:22.557 [task-10] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Cannot invoke "java.util.WeakHashMap.containsKey(Object)" because "org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.reflectMethods" is null
2026-02-24 10:22:22.557 [task-10] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
java.lang.NullPointerException: Cannot invoke "java.util.WeakHashMap.containsKey(Object)" because "org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.reflectMethods" is null
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.reflectiveMethodInvokeHook(ProfilerInterface.java:1367)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.access$1700(ProfilerInterface.java:56)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface$1.handleReflectiveInvoke(ProfilerInterface.java:577)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerRuntimeCPU.handleJavaLangReflectMethodInvoke(ProfilerRuntimeCPU.java:153)
	at java.base/java.lang.reflect.Method.invoke(Method.java:546)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(Unknown Source)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(Unknown Source)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(Unknown Source)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:22:22.564 [task-10] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(java.lang.String,com.shopjoy.entity.SecurityEventType,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean)
java.lang.NullPointerException: Cannot invoke "java.util.WeakHashMap.containsKey(Object)" because "org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.reflectMethods" is null
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.reflectiveMethodInvokeHook(ProfilerInterface.java:1367)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface.access$1700(ProfilerInterface.java:56)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerInterface$1.handleReflectiveInvoke(ProfilerInterface.java:577)
	at org.graalvm.visualvm.lib.jfluid.server.ProfilerRuntimeCPU.handleJavaLangReflectMethodInvoke(ProfilerRuntimeCPU.java:153)
	at java.base/java.lang.reflect.Method.invoke(Method.java:546)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(Unknown Source)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(Unknown Source)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(Unknown Source)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(Unknown Source)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(Unknown Source)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(Unknown Source)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 10:22:22.575 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1008676177 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:22:22.576 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.576] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:22:22.579 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.579] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:22:22.580 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-24 10:22:22.586 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@76d3a433, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@44596add]]
2026-02-24 10:22:22.590 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1058636454 wrapping org.postgresql.jdbc.PgConnection@15c70c07] read-only
2026-02-24 10:22:22.590 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:22:22.591 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.591] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@76d3a433]
2026-02-24 10:22:22.591 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.591] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-24 10:22:22.593 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.593] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-24 10:22:22.595 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.595] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-24 10:22:22.597 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.597] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:22:22.598 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.598] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:22:22.611 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:22:22.618 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.618] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:22:22.618 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.618] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:22:22.618 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.618] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:22:22.618 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.618] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:22:22.622 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1008676177 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:22:22.637 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1448249976 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:22:22.638 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.638] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:22:22.639 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.639] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:22:22.644 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:22:22.646 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@564211897 wrapping org.postgresql.jdbc.PgConnection@47ccb323] read-only
2026-02-24 10:22:22.646 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.646] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@2d52ef08, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-24 10:22:22.648 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.648] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:22:22.649 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:22:22.657 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.662 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.665 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.666 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.666 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.667 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.667 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.670 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.671 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.673 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.673 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.675 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.675 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.677 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.677 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.679 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.679 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.680 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.681 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.683 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.683 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.684 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.686 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.688 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:22:22.688 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.690 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.693 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:22:22.693 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.695 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.696 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.698 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.698 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.698] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:22:22.698 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.698] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:22:22.700 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@564211897 wrapping org.postgresql.jdbc.PgConnection@47ccb323]
2026-02-24 10:22:22.700 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:22:22.700 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 120ms
2026-02-24 10:22:22.700 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:22:22.705 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:22:22.710 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:22:22.714 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.714] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:22:22.715 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.715] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:22:22.715 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1448249976 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:22:22.727 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@312534307 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:22:22.728 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.728] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:22:22.728 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.728] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:22:22.734 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:22:22.747 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:22:22.750 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.758 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.781 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.781] ENTERING: RateLimitServiceImpl.resetAttempts with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-24 10:22:22.781 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.781] EXITING: RateLimitServiceImpl.resetAttempts returned: void
2026-02-24 10:22:22.782 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.782] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-24 10:22:22.782 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.782] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-24 10:22:22.784 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1058636454 wrapping org.postgresql.jdbc.PgConnection@15c70c07]
2026-02-24 10:22:22.785 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 198ms
2026-02-24 10:22:22.785 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-24 10:22:22.789 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.788] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged in successfully, true]
2026-02-24 10:22:22.789 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.789] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:22:22.801 [task-11] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 10:22:22.810 [task-11] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: admin
2026-02-24 10:22:22.811 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.811] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 10:22:22.811 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.811] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 10:22:22.845 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.848 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:22:22.851 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.856 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.859 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.860 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.863 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.866 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.868 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.872 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.875 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.876 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.879 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.881 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.884 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.887 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.892 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.893 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.896 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.897 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.899 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.900 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.902 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.908 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.910 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.914 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:22:22.917 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.919 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.921 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.923 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.926 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.928 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.929 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.931 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.933 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.934 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.936 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.939 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.941 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:22:22.942 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:22.946 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:22.947 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.947] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:22:22.947 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.947] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:22:22.948 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@312534307 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:22:22.966 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1793485623 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:22:22.966 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.966] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-24 10:22:22.967 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.967] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:22:22.968 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-24 10:22:22.973 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:22:22.979 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:22.979] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:22:22.980 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:22.980] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-24 10:22:22.980 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1793485623 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:22:23.002 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@545908220 wrapping org.postgresql.jdbc.PgConnection@694c82e1] read-only
2026-02-24 10:22:23.002 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:23.002] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:22:23.002 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:23.002] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:22:23.011 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.016 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.042 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.051 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.058 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.063 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.067 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.071 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.074 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.076 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.082 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.087 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.091 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.093 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.097 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.099 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.101 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.104 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.107 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.109 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.111 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.114 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.115 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.118 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:22:23.121 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:22:23.123 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:23.122] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:22:23.123 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:23.123] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:22:23.124 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@545908220 wrapping org.postgresql.jdbc.PgConnection@694c82e1]
2026-02-24 10:22:23.141 [http-nio-8080-exec-10] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
jakarta.servlet.ServletException: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.web.servlet.function.ErrorHandlingServerResponse.handleError(ErrorHandlingServerResponse.java:69)
	at org.springframework.web.servlet.function.AbstractServerResponse.writeTo(AbstractServerResponse.java:97)
	at org.springframework.web.servlet.function.CompletedAsyncServerResponse.writeTo(CompletedAsyncServerResponse.java:74)
	at org.springframework.web.servlet.function.support.HandlerFunctionAdapter.handle(Unknown Source)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(Unknown Source)
	at org.springframework.web.servlet.DispatcherServlet.doService(Unknown Source)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(Unknown Source)
	at org.springframework.web.servlet.FrameworkServlet.doPost(Unknown Source)
	at jakarta.servlet.http.HttpServlet.service(Unknown Source)
	at org.springframework.web.servlet.FrameworkServlet.service(Unknown Source)
	at jakarta.servlet.http.HttpServlet.service(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(Unknown Source)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(Unknown Source)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(Unknown Source)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(Unknown Source)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(Unknown Source)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(Unknown Source)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(Unknown Source)
	at org.springframework.security.web.FilterChainProxy.doFilter(Unknown Source)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(Unknown Source)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.CompositeFilter.doFilter(Unknown Source)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(Unknown Source)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(Unknown Source)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(Unknown Source)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(Unknown Source)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Unknown Source)
	at org.apache.coyote.AbstractProcessorLight.process(Unknown Source)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(Unknown Source)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(Unknown Source)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(Unknown Source)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.http.converter.AbstractJacksonHttpMessageConverter.writeInternal(AbstractJacksonHttpMessageConverter.java:444)
	at org.springframework.http.converter.AbstractSmartHttpMessageConverter.write(AbstractSmartHttpMessageConverter.java:117)
	at org.springframework.web.servlet.function.DefaultEntityResponseBuilder$DefaultEntityResponse.writeEntityWithMessageConverters(DefaultEntityResponseBuilder.java:310)
	at org.springframework.web.servlet.function.DefaultEntityResponseBuilder$DefaultEntityResponse.writeToInternal(DefaultEntityResponseBuilder.java:267)
	at org.springframework.web.servlet.function.AbstractServerResponse.writeTo(AbstractServerResponse.java:93)
	... 131 common frames omitted
Caused by: tools.jackson.core.exc.JacksonIOException: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
 at [No location information]
	at tools.jackson.core.exc.JacksonIOException.construct(JacksonIOException.java:39)
	at tools.jackson.core.JsonGenerator._wrapIOFailure(JsonGenerator.java:2476)
	at tools.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2343)
	at tools.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1235)
	at tools.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:975)
	at org.springframework.http.converter.AbstractJacksonHttpMessageConverter.writeInternal(AbstractJacksonHttpMessageConverter.java:436)
	... 135 common frames omitted
Caused by: org.springframework.web.context.request.async.AsyncRequestNotUsableException: ServletOutputStream failed to write: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse.handleIOException(StandardServletAsyncWebRequest.java:340)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:399)
	at org.springframework.util.StreamUtils$NonClosingOutputStream.write(StreamUtils.java:284)
	at tools.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2341)
	... 138 common frames omitted
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:328)
	at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:764)
	at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:661)
	at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:363)
	at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:341)
	at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:99)
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.write(OnCommittedResponseWrapper.java:639)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:396)
	... 140 common frames omitted
Caused by: java.io.IOException: An established connection was aborted by the software in your host machine
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:57)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:562)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:614)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1418)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:747)
	at org.apache.tomcat.util.net.SocketWrapperBase.writeBlocking(SocketWrapperBase.java:587)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:535)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.doWrite(Http11OutputBuffer.java:537)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:109)
	at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:193)
	at org.apache.coyote.Response.doWrite(Response.java:633)
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:316)
	... 147 common frames omitted
2026-02-24 10:22:23.194 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-24 10:22:23.228 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:22:23.235 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-24 10:22:23.242 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-24 10:22:37.433 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 38244 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 10:22:37.436 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 10:22:37.437 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 10:22:38.147 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 10:22:39.573 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 10:22:39.860 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 276 ms. Found 10 JPA repository interfaces.
2026-02-24 10:22:41.541 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 10:22:41.557 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 10:22:41.559 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 10:22:41.559 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 10:22:41.673 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 4150 ms
2026-02-24 10:22:42.521 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 10:22:42.617 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 10:22:43.381 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 10:22:43.426 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 10:22:43.692 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@cc41d2d
2026-02-24 10:22:43.695 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 10:22:43.805 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 10:22:45.782 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 10:22:45.942 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:22:46.551 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 10:22:47.988 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 10:22:48.415 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 10:22:55.764 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 10:22:56.062 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 10:22:56.121 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 10:22:58.761 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 10:22:58.953 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 10:22:58.969 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 10:22:58.988 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 22.614 seconds (process running for 24.276)
2026-02-24 10:22:58.999 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 10:22:59.001 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.001] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 10:22:59.002 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 10:22:59.003 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.003] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 10:22:59.007 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.007] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 10:22:59.007 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.007] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 10:22:59.010 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@67789002 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:22:59.015 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.015] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 10:22:59.023 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:59.022] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:22:59.189 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 10:22:59.221 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:22:59.221] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:22:59.221 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:22:59.221] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 10:22:59.229 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@67789002 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:22:59.230 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 10:22:59.230 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 10:25:54.563 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-24 10:25:54.564 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-24 10:25:54.568 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-02-24 10:25:54.654 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.654] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:25:54.654 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.654] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:25:54.655 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.655] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:25:54.655 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.655] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:25:54.879 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@730791079 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:54.879 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@999746551 wrapping org.postgresql.jdbc.PgConnection@71c2383d] read-only
2026-02-24 10:25:54.879 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.879] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:25:54.879 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.879] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:25:54.881 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:54.881] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:54.881 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:54.881] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:54.894 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:25:54.894 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:25:54.944 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:54.944] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:54.944 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:54.944] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:54.945 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.945] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:25:54.945 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:54.945] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:25:54.945 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@730791079 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:54.945 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@999746551 wrapping org.postgresql.jdbc.PgConnection@71c2383d]
2026-02-24 10:25:54.952 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:25:54.952 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:25:55.006 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:25:55.011 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 5ms
2026-02-24 10:25:55.011 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:25:55.536 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.536] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:25:55.536 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.536] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:25:55.539 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1821395225 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:55.540 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.540] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:25:55.540 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.540] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:55.543 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:25:55.545 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.545] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:25:55.545 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.545] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:25:55.547 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1821395225 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:55.547 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:25:55.550 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-24 10:25:55.550 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-24 10:25:55.550 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-24 10:25:55.689 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1560236800 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:55.689 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.689] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-24 10:25:55.694 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.694] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-24 10:25:55.722 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-24 10:25:55.738 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.738] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-24 10:25:55.739 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.739] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-24 10:25:55.739 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1560236800 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:55.782 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@754798688 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:55.782 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.782] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-24 10:25:55.784 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.784] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:25:55.820 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:25:55.849 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.860 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.862 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.864 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.867 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.869 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.873 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.876 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.878 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.879 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.882 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.884 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.886 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.887 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.889 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.892 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.894 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.896 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.898 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.899 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:25:55.913 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:25:55.921 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:25:55.944 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.944] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:25:55.944 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.944] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:25:55.945 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@754798688 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:55.984 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@711330900 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:55.984 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:55.984] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-24 10:25:55.991 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:55.991] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:25:56.008 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-24 10:25:56.026 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-24 10:25:56.030 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.444 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.452 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.456 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-24 10:25:56.461 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.464 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.466 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.469 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.471 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.476 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.479 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.481 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.484 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.485 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.488 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.491 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.496 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.498 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.500 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.502 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.505 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.509 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.511 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.512 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.514 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.515 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.518 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.522 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:25:56.527 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.528 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.530 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.531 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.535 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.537 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.538 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.541 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.543 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.544 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.546 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.549 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.549 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-24 10:25:56.551 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.552 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.553 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.553] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-24 10:25:56.555 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.555] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-24 10:25:56.556 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@711330900 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:56.594 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@625864666 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:56.594 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.594] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-24 10:25:56.597 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.597] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:25:56.600 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-24 10:25:56.607 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-24 10:25:56.616 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.616] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-24 10:25:56.616 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.616] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-24 10:25:56.617 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@625864666 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:56.625 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1851065678 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:56.625 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.625] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-24 10:25:56.629 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.629] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-24 10:25:56.643 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-24 10:25:56.646 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.646] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-24 10:25:56.647 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.647] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-24 10:25:56.647 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1851065678 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:56.664 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1199607108 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:56.664 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.664] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26]]
2026-02-24 10:25:56.665 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.665] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-24 10:25:56.668 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?)
2026-02-24 10:25:56.671 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.671] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-24 10:25:56.671 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.671] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-24 10:25:56.673 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1199607108 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:25:56.688 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@541861944 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:25:56.688 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.688] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 56, 63, 69, 75, 77, 70, 14, 39, 42, 49]]
2026-02-24 10:25:56.690 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.690] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:25:56.698 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.701 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.703 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.705 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.708 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.711 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.713 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.714 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.715 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.717 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.718 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.720 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.722 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.725 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.727 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.729 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.730 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.733 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.735 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.736 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.738 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.742 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.743 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.746 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-24 10:25:56.747 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-24 10:25:56.748 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:25:56.748] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-24 10:25:56.748 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:25:56.748] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-24 10:25:56.749 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@541861944 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.404 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.404] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:26:02.404 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.404] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:26:02.405 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.405] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:26:02.405 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.405] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:26:02.407 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1449334810 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:26:02.407 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2132896729 wrapping org.postgresql.jdbc.PgConnection@71c2383d] read-only
2026-02-24 10:26:02.408 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.407] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:26:02.408 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.407] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:26:02.408 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.408] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.408 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.408] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.409 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:26:02.409 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:26:02.411 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.410] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.411 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.410] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.411 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.411] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:26:02.411 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.411] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:26:02.411 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1449334810 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.411 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2132896729 wrapping org.postgresql.jdbc.PgConnection@71c2383d]
2026-02-24 10:26:02.412 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:26:02.412 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:26:02.417 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:26:02.419 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@758176539 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:26:02.419 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.419] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-24 10:26:02.419 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.419] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-24 10:26:02.422 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-24 10:26:02.427 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.427] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-24 10:26:02.428 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.428] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-24 10:26:02.429 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@758176539 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.430 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 13ms
2026-02-24 10:26:02.430 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:26:02.441 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.441] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:26:02.441 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.441] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:26:02.444 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@839638447 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:26:02.444 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.444] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:26:02.446 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.446] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.447 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:26:02.449 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.449] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.451 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.450] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:26:02.451 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@839638447 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.453 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:26:02.455 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-24 10:26:02.456 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-24 10:26:02.457 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-24 10:26:02.457 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-24 10:26:02.514 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@230672586 wrapping org.postgresql.jdbc.PgConnection@71c2383d] read-only
2026-02-24 10:26:02.515 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.515] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3899e0df, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-24 10:26:02.515 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.515] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:26:02.517 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:26:02.528 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.534 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.535 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.537 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.538 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.540 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.542 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.543 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.545 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.546 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.551 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:26:02.554 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:26:02.558 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.558] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:26:02.558 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.558] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:26:02.559 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@230672586 wrapping org.postgresql.jdbc.PgConnection@71c2383d]
2026-02-24 10:26:02.560 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 104ms
2026-02-24 10:26:02.561 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:26:02.564 [http-nio-8080-exec-4] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-24 10:26:02.587 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.587] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxOTI4NTQyLCJleHAiOjE3NzIwMTQ5NDJ9.CvrkuFM2wQjNZsfnGjXlRUjLSAH7Z2GuxP2BiHSB6-epks_h5LIJGGSoc8UviTaDiEhak7OE-q7ExBPtgi_9yw]
2026-02-24 10:26:02.587 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.587] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-24 10:26:02.589 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1279459813 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:26:02.590 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.590] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-24 10:26:02.590 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.590] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.590 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 10:26:02.593 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.593] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 10:26:02.593 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.593] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 10:26:02.594 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1279459813 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.595 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-24 10:26:02.598 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-24 10:26:02.599 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2048396806 wrapping org.postgresql.jdbc.PgConnection@cc41d2d] read-only
2026-02-24 10:26:02.599 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.599] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@b88e5e5, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-24 10:26:02.601 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.601] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:26:02.602 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-24 10:26:02.604 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.606 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.607 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.608 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.610 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.611 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.611 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.614 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.618 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.619 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-24 10:26:02.624 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-24 10:26:02.625 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-24 10:26:02.627 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:26:02.627] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-24 10:26:02.628 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:26:02.628] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-24 10:26:02.628 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2048396806 wrapping org.postgresql.jdbc.PgConnection@cc41d2d]
2026-02-24 10:26:02.629 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 31ms
2026-02-24 10:26:02.629 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-24 10:28:35.978 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-24 10:28:35.986 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-24 10:28:36.007 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:28:36.011 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-24 10:28:36.022 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-24 10:28:44.953 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 12108 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 10:28:44.957 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 10:28:44.958 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 10:28:45.723 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 10:28:47.489 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 10:28:47.834 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 331 ms. Found 10 JPA repository interfaces.
2026-02-24 10:28:49.881 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 10:28:49.897 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 10:28:49.899 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 10:28:49.899 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 10:28:50.018 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 4935 ms
2026-02-24 10:28:51.028 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 10:28:51.116 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 10:28:51.965 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 10:28:52.027 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 10:28:52.353 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4e8e0052
2026-02-24 10:28:52.358 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 10:28:52.519 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 10:28:55.265 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 10:28:55.367 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:28:56.351 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 10:28:58.331 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 10:28:58.765 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 10:29:08.284 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 10:29:08.660 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 10:29:08.733 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 10:29:11.613 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 10:29:11.847 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 10:29:11.863 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 10:29:11.882 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 28.117 seconds (process running for 30.153)
2026-02-24 10:29:11.894 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 10:29:11.895 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:11.895] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 10:29:11.897 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 10:29:11.899 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:11.899] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 10:29:11.903 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:11.903] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 10:29:11.903 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:11.903] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 10:29:11.905 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@316884572 wrapping org.postgresql.jdbc.PgConnection@4e8e0052] read-only
2026-02-24 10:29:11.909 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:11.909] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 10:29:11.917 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:29:11.917] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:29:12.048 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 10:29:12.083 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:29:12.082] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:29:12.084 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:29:12.084] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 10:29:12.090 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@316884572 wrapping org.postgresql.jdbc.PgConnection@4e8e0052]
2026-02-24 10:29:12.090 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 10:29:12.091 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 10:50:38.290 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-24 10:50:38.322 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-24 10:50:38.362 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:50:38.365 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-24 10:50:38.371 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-24 10:52:44.981 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 20596 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 10:52:44.986 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 10:52:44.988 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 10:52:46.029 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 10:52:48.762 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 10:52:49.359 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 569 ms. Found 10 JPA repository interfaces.
2026-02-24 10:52:52.720 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 10:52:52.753 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 10:52:52.758 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 10:52:52.760 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 10:52:53.005 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 7879 ms
2026-02-24 10:52:54.858 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 10:52:55.036 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 10:52:56.437 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 10:52:56.530 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 10:52:57.040 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@414b785c
2026-02-24 10:52:57.045 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 10:52:57.248 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 10:53:00.899 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 10:53:01.196 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:53:02.571 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 10:53:05.641 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 10:53:06.369 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 10:53:19.576 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 10:53:20.203 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 10:53:20.389 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 10:53:26.144 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 10:53:26.531 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 10:53:26.558 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 10:53:26.590 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 43.094 seconds (process running for 46.509)
2026-02-24 10:53:26.611 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 10:53:26.617 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.617] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 10:53:26.622 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 10:53:26.626 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.626] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 10:53:26.633 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2095551843 wrapping org.postgresql.jdbc.PgConnection@414b785c] read-only
2026-02-24 10:53:26.633 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.633] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 10:53:26.633 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.633] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 10:53:26.640 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.640] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 10:53:26.651 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:53:26.651] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:53:26.890 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 10:53:26.933 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:53:26.933] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:53:26.933 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:53:26.933] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 10:53:26.945 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2095551843 wrapping org.postgresql.jdbc.PgConnection@414b785c]
2026-02-24 10:53:26.946 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 10:53:26.947 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 10:55:42.632 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-24 10:55:44.021 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-24 10:55:44.067 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:55:44.096 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-24 10:55:44.201 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-24 10:56:24.545 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 37832 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-24 10:56:24.552 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-24 10:56:24.555 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-24 10:56:26.248 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-24 10:56:30.593 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-24 10:56:31.843 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1137 ms. Found 10 JPA repository interfaces.
2026-02-24 10:56:38.451 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-24 10:56:38.485 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-24 10:56:38.490 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-24 10:56:38.490 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-24 10:56:38.773 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13872 ms
2026-02-24 10:56:41.274 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-24 10:56:41.472 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-24 10:56:43.285 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-24 10:56:43.417 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-24 10:56:44.023 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@620ba2b0
2026-02-24 10:56:44.031 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-24 10:56:44.471 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-24 10:56:49.667 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-24 10:56:49.873 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-24 10:56:51.884 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-24 10:56:56.375 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-24 10:56:57.611 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-24 10:57:16.133 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-24 10:57:17.322 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-24 10:57:17.519 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-24 10:57:27.383 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-24 10:57:28.156 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-24 10:57:28.190 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-24 10:57:28.236 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 66.277 seconds (process running for 70.746)
2026-02-24 10:57:28.264 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-24 10:57:28.271 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.271] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 10:57:28.273 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 10:57:28.277 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.276] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 10:57:28.285 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.285] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 10:57:28.287 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.287] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 10:57:28.297 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@192098252 wrapping org.postgresql.jdbc.PgConnection@620ba2b0] read-only
2026-02-24 10:57:28.308 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.308] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-24 10:57:28.324 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:57:28.324] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:57:28.619 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-24 10:57:28.676 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 10:57:28.675] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-24 10:57:28.676 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 10:57:28.676] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-24 10:57:28.685 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@192098252 wrapping org.postgresql.jdbc.PgConnection@620ba2b0]
2026-02-24 10:57:28.688 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-24 10:57:28.690 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-24 11:34:25.855 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=14m11s521ms908µs400ns).
2026-02-24 11:46:43.089 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=12m17s233ms883µs700ns).
2026-02-24 11:53:20.246 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:53:18.594] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 11:53:31.766 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:53:31.766] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 11:57:28.230 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:57:28.230] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-24 11:57:28.562 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-24 11:57:28.565 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:57:28.565] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-24 11:57:28.567 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:57:28.567] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 11:57:28.569 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 11:57:28.569] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 12:27:28.233 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:27:28.233] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-24 12:27:28.236 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:27:28.236] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-24 12:34:28.382 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-24 12:34:28.383 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-24 12:34:28.395 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 12 ms
2026-02-24 12:34:28.726 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1d88eea, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@36c6ce9a]]
2026-02-24 12:34:28.728 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2019778276 wrapping org.postgresql.jdbc.PgConnection@9ae8868] read-only
2026-02-24 12:34:28.729 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.729] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1d88eea]
2026-02-24 12:34:28.732 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:28.732] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-24 12:34:28.732 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.732] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [adukorankye16, 0:0:0:0:0:0:0:1]
2026-02-24 12:34:28.735 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.735] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-24 12:34:28.866 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.866] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [adukorankye16]
2026-02-24 12:34:28.869 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:28.868] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 12:34:28.885 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 12:34:28.935 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:28.935] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 12:34:28.937 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.937] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 12:34:28.943 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.943] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [adukorankye16, 0:0:0:0:0:0:0:1]
2026-02-24 12:34:28.943 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: adukorankye16. Count: 1
2026-02-24 12:34:28.943 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 1
2026-02-24 12:34:28.945 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.945] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-24 12:34:28.946 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:28.946] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-24 12:34:28.946 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 217ms with exception: Invalid username or password
2026-02-24 12:34:28.946 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.946] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1d88eea]
2026-02-24 12:34:28.946 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-24 12:34:28.946 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-24 12:34:28.949 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:116)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(Unknown Source)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 12:34:28.961 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2019778276 wrapping org.postgresql.jdbc.PgConnection@9ae8868]
2026-02-24 12:34:28.965 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1d88eea, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@36c6ce9a]]
2026-02-24 12:34:28.965 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-24 12:34:28.965 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:28.965] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [adukorankye16, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, PostmanRuntime/7.51.1, ***REDACTED***, false]
2026-02-24 12:34:28.967 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:28.967] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 12:34:28.965 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:116)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:100)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(Unknown Source)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-24 12:34:28.974 [http-nio-8080-exec-1] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-24 12:34:29.036 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 12:34:29.082 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: adukorankye16
2026-02-24 12:34:29.084 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:34:29.082] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 12:34:29.086 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:34:29.084] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@4b31b81, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@a74e567]]
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@239825137 wrapping org.postgresql.jdbc.PgConnection@4b49ef5c] read-only
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:37.993] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@4b31b81]
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:37.993] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:37.993] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [jane_smith, 0:0:0:0:0:0:0:1]
2026-02-24 12:36:37.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:37.993] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-24 12:36:37.995 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:37.995] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [jane_smith]
2026-02-24 12:36:37.995 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:37.995] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 12:36:37.995 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-24 12:36:38.005 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:38.005] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-24 12:36:38.005 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.005] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-24 12:36:38.208 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.208] ENTERING: RateLimitServiceImpl.resetAttempts with arguments: [jane_smith, 0:0:0:0:0:0:0:1]
2026-02-24 12:36:38.210 [http-nio-8080-exec-8] DEBUG c.s.s.impl.RateLimitServiceImpl - Reset login attempts for IP: 0:0:0:0:0:0:0:1. Previous count: 1
2026-02-24 12:36:38.210 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.210] EXITING: RateLimitServiceImpl.resetAttempts returned: void
2026-02-24 12:36:38.211 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:38.211] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-24 12:36:38.211 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.211] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-24 12:36:38.213 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@239825137 wrapping org.postgresql.jdbc.PgConnection@4b49ef5c]
2026-02-24 12:36:38.213 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 220ms
2026-02-24 12:36:38.215 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-24 12:36:38.215 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.215] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [jane_smith, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, PostmanRuntime/7.51.1, User logged in successfully, true]
2026-02-24 12:36:38.215 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:38.215] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 12:36:38.217 [task-2] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-24 12:36:38.219 [task-2] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: jane_smith
2026-02-24 12:36:38.221 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-24 12:36:38.221] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-24 12:36:38.221 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-24 12:36:38.221] EXITING: SecurityAuditServiceImpl.logEvent returned: void
