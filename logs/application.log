2026-02-20 10:05:48.435 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 36348 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 10:05:48.448 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 10:05:48.449 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 10:05:49.339 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 10:05:52.464 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 10:05:52.963 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 483 ms. Found 9 JPA repository interfaces.
2026-02-20 10:05:56.562 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 10:05:56.607 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 10:05:56.614 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 10:05:56.615 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 10:05:56.812 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 8229 ms
2026-02-20 10:05:58.276 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 10:05:58.438 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 10:05:59.667 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 10:05:59.732 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 10:06:00.240 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4ebe6c24
2026-02-20 10:06:00.244 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 10:06:00.504 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 10:06:03.350 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 10:06:03.577 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 10:06:04.486 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 10:06:05.706 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 10:06:06.151 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 10:06:14.252 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 10:06:14.709 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 10:06:14.785 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 10:06:16.665 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 10:06:16.820 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 10:06:16.858 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 10:06:16.881 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 29.735 seconds (process running for 31.08)
2026-02-20 10:06:17.014 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 10:06:17.025 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@365194469 wrapping org.postgresql.jdbc.PgConnection@4ebe6c24] read-only
2026-02-20 10:06:17.034 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:17.034] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 10:06:17.040 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:17.040] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 10:06:17.176 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 10:06:17.204 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:17.203] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 10:06:17.204 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:17.204] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 10:06:17.210 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@365194469 wrapping org.postgresql.jdbc.PgConnection@4ebe6c24]
2026-02-20 10:06:17.211 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 10:06:17.211 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 10:06:56.698 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 10:06:56.699 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 10:06:56.701 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-20 10:06:56.972 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@44e40947]
2026-02-20 10:06:56.973 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1731459464 wrapping org.postgresql.jdbc.PgConnection@4ebe6c24] read-only
2026-02-20 10:06:56.973 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:56.973] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@44e40947]
2026-02-20 10:06:56.973 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:56.973] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 10:06:57.108 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:57.107] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 10:06:57.110 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:57.110] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 10:06:57.118 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 10:06:57.156 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:57.156] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 10:06:57.157 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:57.157] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 10:06:57.444 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:06:57.444] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 10:06:57.445 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:06:57.445] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 10:06:57.445 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1731459464 wrapping org.postgresql.jdbc.PgConnection@4ebe6c24]
2026-02-20 10:06:57.448 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 476ms
2026-02-20 10:06:57.450 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 10:53:26.016 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 10:53:26.036 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 10:53:26.068 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 10:53:26.081 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 10:53:26.099 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 10:58:54.786 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 20284 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 10:58:54.803 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 10:58:54.805 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 10:58:56.687 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 10:59:01.600 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 10:59:02.358 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 728 ms. Found 9 JPA repository interfaces.
2026-02-20 10:59:08.044 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 10:59:08.102 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 10:59:08.113 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 10:59:08.114 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 10:59:08.480 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13500 ms
2026-02-20 10:59:10.772 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 10:59:11.185 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 10:59:12.953 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 10:59:13.090 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 10:59:13.800 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@106e6dfe
2026-02-20 10:59:13.804 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 10:59:14.043 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 10:59:19.035 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 10:59:19.373 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 10:59:21.045 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 10:59:22.690 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 10:59:23.505 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 10:59:37.548 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 10:59:38.265 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 10:59:38.396 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 10:59:41.999 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 10:59:42.298 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 10:59:42.322 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 10:59:42.355 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 49.124 seconds (process running for 50.538)
2026-02-20 10:59:42.631 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 10:59:42.652 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1755163228 wrapping org.postgresql.jdbc.PgConnection@106e6dfe] read-only
2026-02-20 10:59:42.666 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:59:42.665] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 10:59:42.681 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:59:42.680] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 10:59:42.964 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 10:59:43.020 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 10:59:43.018] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 10:59:43.023 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 10:59:43.023] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 10:59:43.033 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1755163228 wrapping org.postgresql.jdbc.PgConnection@106e6dfe]
2026-02-20 10:59:43.035 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 10:59:43.037 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 11:00:09.185 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 11:00:09.185 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 11:00:09.188 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-20 11:15:58.554 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 11:15:58.570 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 11:15:58.593 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 11:15:58.600 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 11:15:58.607 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 11:16:08.242 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 21284 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 11:16:08.249 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 11:16:08.251 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 11:16:10.358 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 11:16:14.730 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 11:16:15.482 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 724 ms. Found 9 JPA repository interfaces.
2026-02-20 11:16:21.961 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 11:16:22.015 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 11:16:22.021 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 11:16:22.023 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 11:16:22.339 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13916 ms
2026-02-20 11:16:24.392 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 11:16:24.576 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 11:16:26.404 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 11:16:26.504 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 11:16:27.209 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1cd4082a
2026-02-20 11:16:27.217 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 11:16:28.055 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 11:16:32.024 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 11:16:32.401 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 11:16:33.906 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 11:16:35.439 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 11:16:36.246 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 11:16:51.130 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 11:16:51.757 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 11:16:51.885 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 11:16:55.466 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 11:16:55.830 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 11:16:55.868 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 11:16:55.915 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 49.563 seconds (process running for 51.62)
2026-02-20 11:16:56.143 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 11:16:56.166 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@49027117 wrapping org.postgresql.jdbc.PgConnection@1cd4082a] read-only
2026-02-20 11:16:56.182 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:16:56.180] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 11:16:56.195 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:16:56.195] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 11:16:56.429 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 11:16:56.477 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:16:56.477] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 11:16:56.478 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:16:56.478] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 11:16:56.486 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@49027117 wrapping org.postgresql.jdbc.PgConnection@1cd4082a]
2026-02-20 11:16:56.487 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 11:16:56.488 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 11:17:13.508 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 11:17:13.509 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 11:17:13.517 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2026-02-20 11:21:39.120 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 11:21:39.150 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 11:21:39.182 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 11:21:39.195 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 11:21:39.243 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 11:21:53.849 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 38180 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 11:21:53.858 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 11:21:53.859 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 11:21:55.298 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 11:22:00.825 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 11:22:01.925 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 984 ms. Found 9 JPA repository interfaces.
2026-02-20 11:22:09.040 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 11:22:09.115 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 11:22:09.139 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 11:22:09.154 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 11:22:09.703 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 15582 ms
2026-02-20 11:22:14.899 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 11:22:18.752 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 11:22:20.986 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 11:22:21.143 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 11:22:22.016 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@539570b8
2026-02-20 11:22:22.020 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 11:22:22.481 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 11:22:27.429 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 11:22:27.640 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 11:22:29.190 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 11:22:30.564 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 11:22:31.423 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 11:22:46.296 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 11:22:47.221 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 11:22:47.393 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 11:22:51.039 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 11:22:51.399 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 11:22:51.430 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 11:22:51.466 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 59.74 seconds (process running for 61.792)
2026-02-20 11:22:51.749 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 11:22:51.771 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@588114075 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:22:51.786 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:22:51.786] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 11:22:51.798 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:22:51.798] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 11:22:52.040 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 11:22:52.102 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:22:52.101] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 11:22:52.104 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:22:52.104] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 11:22:52.111 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@588114075 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:22:52.112 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 11:22:52.114 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 11:23:51.844 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 11:23:51.844 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 11:23:51.850 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-02-20 11:23:52.178 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:23:52.201 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:23:52.215 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@225780089 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:23:52.216 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:52.216] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 11:23:52.223 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:52.222] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 11:23:52.387 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@697932918 wrapping org.postgresql.jdbc.PgConnection@3735a03a] read-only
2026-02-20 11:23:52.388 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:52.388] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@1243098b, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:23:52.393 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:52.393] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:23:52.451 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 11:23:52.484 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:23:52.539 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:52.539] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 11:23:52.541 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:52.541] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 11:23:52.542 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@225780089 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:23:52.545 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.551 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 349ms
2026-02-20 11:23:52.552 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:23:52.577 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.580 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.585 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.590 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.594 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.600 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.604 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.608 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.611 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.615 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.618 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.641 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:23:52.657 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:23:52.693 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:52.693] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:23:52.695 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:52.695] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:23:52.697 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@697932918 wrapping org.postgresql.jdbc.PgConnection@3735a03a]
2026-02-20 11:23:52.700 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 519ms
2026-02-20 11:23:52.700 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:23:52.875 [http-nio-8080-exec-1] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 11:23:52.926 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:23:52.927 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:23:52.927 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1747687835 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:23:52.928 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:52.928] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6c141046, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:23:52.928 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:52.928] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:23:52.929 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 2ms
2026-02-20 11:23:52.929 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:23:52.934 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:23:52.951 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.962 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.966 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.969 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.973 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.977 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.979 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.983 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.986 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.991 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.995 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:52.999 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:23:53.006 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:23:53.009 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:23:53.014 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:23:53.014] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:23:53.014 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:23:53.014] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:23:53.016 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1747687835 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:23:53.017 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 90ms
2026-02-20 11:23:53.017 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:24:08.108 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:24:08.108 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 11:24:08.110 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:24:08.114 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:24:08.117 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1812077189 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:24:08.119 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:24:08.119] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@683d83dd, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:24:08.120 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:24:08.120] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:24:08.122 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:24:08.127 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.133 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.136 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.140 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.144 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:24:08.144 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.144 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 11:24:08.144 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:24:08.147 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.152 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.155 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.159 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.164 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.168 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.172 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.183 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:24:08.188 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:24:08.193 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:24:08.193] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:24:08.194 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:24:08.194] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:24:08.194 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1812077189 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:24:08.195 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 79ms
2026-02-20 11:24:08.196 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:24:08.217 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:24:08.219 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1206994896 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:24:08.219 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:24:08.219] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@389de406, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:24:08.220 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:24:08.220] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:24:08.221 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:24:08.224 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.227 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.228 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.231 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.233 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.237 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.238 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.240 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.242 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.245 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.248 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.251 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:24:08.256 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:24:08.259 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:24:08.263 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:24:08.263] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:24:08.264 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:24:08.264] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:24:08.265 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1206994896 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:24:08.266 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 48ms
2026-02-20 11:24:08.267 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:30:13.013 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:30:13.014 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 11:30:13.014 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:30:13.016 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:30:13.019 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@37891175 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:30:13.021 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:30:13.021] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6e56220a, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:30:13.021 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:30:13.021] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:30:13.027 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:30:13.032 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 11:30:13.032 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.034 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 11:30:13.035 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 11:30:13.037 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.042 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.045 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.048 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.051 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.054 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.058 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.064 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.067 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.070 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.073 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.082 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:30:13.086 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:30:13.096 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:30:13.096] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:30:13.096 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:30:13.096] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:30:13.098 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@37891175 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:30:13.098 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 82ms
2026-02-20 11:30:13.098 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:30:13.131 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 11:30:13.132 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1175472083 wrapping org.postgresql.jdbc.PgConnection@539570b8] read-only
2026-02-20 11:30:13.133 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:30:13.133] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@69bb6253, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 11:30:13.133 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:30:13.133] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:30:13.136 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 11:30:13.140 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.144 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.147 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.150 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.152 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.156 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.159 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.160 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.162 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.167 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.168 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.172 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 11:30:13.178 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 11:30:13.182 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 11:30:13.185 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:30:13.185] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 11:30:13.185 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 11:30:13.185] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 11:30:13.188 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1175472083 wrapping org.postgresql.jdbc.PgConnection@539570b8]
2026-02-20 11:30:13.188 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 57ms
2026-02-20 11:30:13.188 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 11:40:36.376 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:40:36.376] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 11:40:36.378 [http-nio-8080-exec-1] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 11:40:36.378 [http-nio-8080-exec-1] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 11:40:36.382 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 11:40:36.402 [http-nio-8080-exec-1] INFO  c.s.s.OAuth2LoginSuccessHandler - Updated existing user eugene_6177 with OAuth2 provider: google
2026-02-20 11:40:36.536 [http-nio-8080-exec-1] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 11:40:36.536 [http-nio-8080-exec-1] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:3000/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU4NzYzNiwiZXhwIjoxNzcxNjc0MDM2fQ.bVLdD3ZZfo9QjHdrqBdNu54Ad6qLE4j1vyjS5pA6lWJSIZS3hQNI_a4Nhc1nBzumKx2IOnoDi58H2f5zNZm4Lg&provider=google
2026-02-20 11:40:36.537 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 11:40:36.537] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 11:40:36.567 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - update users set created_at=?,email=?,first_name=?,last_name=?,oauth_provider=?,oauth_provider_id=?,password_hash=?,phone=?,updated_at=?,user_type=?,username=? where user_id=?
2026-02-20 12:53:27.614 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=26m2s583ms838s500ns).
2026-02-20 13:17:51.973 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 13:17:52.092 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 13:17:52.151 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:17:52.188 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 13:17:52.245 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 13:19:40.009 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 28060 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 13:19:40.014 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 13:19:40.014 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 13:19:42.191 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 13:19:48.751 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 13:19:49.815 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 997 ms. Found 10 JPA repository interfaces.
2026-02-20 13:19:57.591 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 13:19:57.647 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 13:19:57.696 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 13:19:57.696 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 13:19:58.502 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 18246 ms
2026-02-20 13:20:03.008 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 13:20:03.338 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 13:20:05.100 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 13:20:05.212 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 13:20:05.960 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@87276c4
2026-02-20 13:20:05.963 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 13:20:06.288 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 13:20:14.325 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 13:20:14.782 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:20:19.580 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 13:20:33.703 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 13:20:46.626 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 13:20:54.680 [main] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/shopjoy/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'securityFilterChain' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration': Unsatisfied dependency expressed through method 'setContentNegotiationStrategy' parameter 0: Error creating bean with name 'org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
2026-02-20 13:20:54.687 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:20:54.694 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 13:20:54.749 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 13:20:54.766 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-02-20 13:20:54.817 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-02-20 13:20:54.854 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/shopjoy/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'securityFilterChain' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration': Unsatisfied dependency expressed through method 'setContentNegotiationStrategy' parameter 0: Error creating bean with name 'org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:871)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:826)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1446)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1184)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1121)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:993)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:620)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:756)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1365)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at com.shopjoy.ShopjoyEcommerceSystemApplication.main(ShopjoyEcommerceSystemApplication.java:10)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/shopjoy/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'securityFilterChain' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration': Unsatisfied dependency expressed through method 'setContentNegotiationStrategy' parameter 0: Error creating bean with name 'org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:2008)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1971)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1711)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:863)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration': Unsatisfied dependency expressed through method 'setContentNegotiationStrategy' parameter 0: Error creating bean with name 'org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:871)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:826)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1446)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:413)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:351)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:912)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 39 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:871)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:826)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1446)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:413)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:863)
	... 61 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:2008)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1971)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1711)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:863)
	... 84 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:220)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:129)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 101 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'OAuth2AuthorizedClientManager': Failed to instantiate [org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager]: Factory method 'getAuthorizedClientManager' threw exception with message: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/security/oauth2/client/autoconfigure/OAuth2ClientConfigurations$ClientRegistrationRepositoryConfiguration.class]: Unsatisfied dependency expressed through method 'clientRegistrationRepository' parameter 0: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties': Client id of registration 'google' must not be empty.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:2611)
	at org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration.<init>(OAuth2ClientConfiguration.java:129)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:207)
	... 103 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager]: Factory method 'getAuthorizedClientManager' threw exception with message: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/security/oauth2/client/autoconfigure/OAuth2ClientConfigurations$ClientRegistrationRepositoryConfiguration.class]: Unsatisfied dependency expressed through method 'clientRegistrationRepository' parameter 0: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties': Client id of registration 'google' must not be empty.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:183)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:72)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:152)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 120 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/security/oauth2/client/autoconfigure/OAuth2ClientConfigurations$ClientRegistrationRepositoryConfiguration.class]: Unsatisfied dependency expressed through method 'clientRegistrationRepository' parameter 0: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties': Client id of registration 'google' must not be empty.
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:740)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:373)
	at org.springframework.beans.factory.BeanFactoryUtils.beanOfTypeIncludingAncestors(BeanFactoryUtils.java:451)
	at org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2AuthorizedClientManagerRegistrar.getAuthorizedClientManager(OAuth2ClientConfiguration.java:221)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:155)
	... 123 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties': Client id of registration 'google' must not be empty.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1817)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:229)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:912)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 139 common frames omitted
Caused by: java.lang.IllegalStateException: Client id of registration 'google' must not be empty.
	at org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties.validateRegistration(OAuth2ClientProperties.java:71)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties.validate(OAuth2ClientProperties.java:66)
	at org.springframework.boot.security.oauth2.client.autoconfigure.OAuth2ClientProperties.afterPropertiesSet(OAuth2ClientProperties.java:62)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1864)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1813)
	... 150 common frames omitted
2026-02-20 13:23:29.330 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 33104 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 13:23:29.397 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 13:23:29.398 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 13:23:30.316 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 13:23:44.316 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 13:23:45.903 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1546 ms. Found 10 JPA repository interfaces.
2026-02-20 13:23:55.386 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 13:23:55.478 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 13:23:55.483 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 13:23:55.483 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 13:23:56.201 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 26235 ms
2026-02-20 13:24:01.984 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 13:24:02.258 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 13:24:05.645 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 13:24:05.894 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 13:24:06.760 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@9677f54
2026-02-20 13:24:06.763 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 13:24:07.136 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 13:24:14.935 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 13:24:15.128 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:24:17.065 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 13:24:23.353 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 13:24:24.584 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 13:24:42.862 [main] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/shopjoy/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2026-02-20 13:24:42.876 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:24:42.898 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 13:24:42.923 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 13:24:42.942 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-02-20 13:24:43.000 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-02-20 13:24:43.147 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2026-02-20 13:29:19.539 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 28096 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 13:29:19.545 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 13:29:19.546 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 13:29:21.434 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 13:29:28.461 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 13:29:29.235 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 751 ms. Found 10 JPA repository interfaces.
2026-02-20 13:29:34.181 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 13:29:34.224 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 13:29:34.229 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 13:29:34.229 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 13:29:34.465 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 14701 ms
2026-02-20 13:29:36.311 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 13:29:36.480 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 13:29:38.078 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 13:29:38.180 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 13:29:38.672 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c925ae1
2026-02-20 13:29:38.674 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 13:29:38.896 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 13:29:42.562 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 13:29:42.706 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:29:44.842 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 13:29:49.772 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 13:29:50.733 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 13:30:00.198 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 13:30:00.677 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 13:30:00.777 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 13:30:03.504 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 13:30:03.757 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 13:30:03.791 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 13:30:03.825 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 46.59 seconds (process running for 48.97)
2026-02-20 13:30:04.031 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 13:30:04.048 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1716732150 wrapping org.postgresql.jdbc.PgConnection@c925ae1] read-only
2026-02-20 13:30:04.060 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:04.060] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 13:30:04.070 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:04.070] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 13:30:04.312 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 13:30:04.354 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:04.354] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 13:30:04.356 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:04.356] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 13:30:04.362 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1716732150 wrapping org.postgresql.jdbc.PgConnection@c925ae1]
2026-02-20 13:30:04.363 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 13:30:04.364 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 13:30:24.773 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 13:30:24.774 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 13:30:24.778 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-20 13:30:25.037 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:30:25.045 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@782441895 wrapping org.postgresql.jdbc.PgConnection@c925ae1] read-only
2026-02-20 13:30:25.046 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.046] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 13:30:25.049 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:30:25.050 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.050] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 13:30:25.094 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 13:30:25.143 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.143] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 13:30:25.143 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.143] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 13:30:25.144 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@782441895 wrapping org.postgresql.jdbc.PgConnection@c925ae1]
2026-02-20 13:30:25.150 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 112ms
2026-02-20 13:30:25.151 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:30:25.180 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@841403074 wrapping org.postgresql.jdbc.PgConnection@c925ae1] read-only
2026-02-20 13:30:25.182 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.182] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@5891395a, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:30:25.186 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.186] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:30:25.238 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:30:25.288 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.315 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.329 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.331 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.335 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.339 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.344 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.346 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.349 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.352 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.356 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.358 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.378 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:30:25.391 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:30:25.413 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.413] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:30:25.413 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.413] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:30:25.414 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@841403074 wrapping org.postgresql.jdbc.PgConnection@c925ae1]
2026-02-20 13:30:25.417 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 366ms
2026-02-20 13:30:25.417 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:30:25.459 [http-nio-8080-exec-2] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 13:30:25.491 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:30:25.495 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 3ms
2026-02-20 13:30:25.496 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:30:25.515 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:30:25.516 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2073970634 wrapping org.postgresql.jdbc.PgConnection@c925ae1] read-only
2026-02-20 13:30:25.518 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.518] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@7fa1dc61, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:30:25.521 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.521] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:30:25.523 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:30:25.533 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.538 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.540 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.543 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.547 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.550 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.554 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.576 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.579 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.582 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.584 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.589 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:30:25.594 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:30:25.597 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:30:25.603 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:25.602] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:30:25.604 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:30:25.604] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:30:25.606 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2073970634 wrapping org.postgresql.jdbc.PgConnection@c925ae1]
2026-02-20 13:30:25.606 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 90ms
2026-02-20 13:30:25.607 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:30:38.798 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:38.797] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:30:38.800 [http-nio-8080-exec-10] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 13:30:38.800 [http-nio-8080-exec-10] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 13:30:38.807 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 13:30:38.976 [http-nio-8080-exec-10] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 13:30:38.976 [http-nio-8080-exec-10] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5NDIzOCwiZXhwIjoxNzcxNjgwNjM4fQ.d2v4_24rBGyh0lk95qChBXQhBWsZcPpVA7p6n2oYA4Bg2w-a4Sz7WXNROtsqA0jBg7K29SqeE-9KNtldu1l8Jg&provider=google
2026-02-20 13:30:38.976 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:30:38.976] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:36:05.254 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 13:36:05.297 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 13:36:05.325 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:36:05.331 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 13:36:05.368 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 13:36:50.634 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 868 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 13:36:50.640 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 13:36:50.640 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 13:36:52.072 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 13:36:57.784 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 13:36:58.522 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 692 ms. Found 10 JPA repository interfaces.
2026-02-20 13:37:03.889 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 13:37:03.919 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 13:37:03.924 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 13:37:03.924 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 13:37:04.204 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13340 ms
2026-02-20 13:37:06.727 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 13:37:07.027 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 13:37:08.941 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 13:37:09.057 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 13:37:09.949 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@19cad9f0
2026-02-20 13:37:09.953 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 13:37:10.327 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 13:37:16.537 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 13:37:16.699 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 13:37:20.502 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 13:37:27.456 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 13:37:28.351 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 13:37:43.272 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 13:37:44.249 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 13:37:44.470 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 13:37:52.932 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 13:37:53.490 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 13:37:53.553 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 13:37:53.587 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 65.244 seconds (process running for 67.808)
2026-02-20 13:37:54.682 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 13:37:54.743 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@387938448 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:37:54.805 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:37:54.766] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 13:37:54.864 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:37:54.864] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 13:37:55.356 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 13:37:55.440 [main] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy187.existsByUsername took 573ms
2026-02-20 13:37:55.441 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:37:55.441] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 13:37:55.446 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:37:55.446] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 13:37:55.456 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@387938448 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:37:55.463 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 13:37:55.465 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 13:42:26.150 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 13:42:26.151 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 13:42:26.155 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-02-20 13:42:45.104 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:42:45.104] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:42:45.107 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 13:42:45.108 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 13:42:45.123 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 13:42:45.455 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 13:42:45.455 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5NDk2NSwiZXhwIjoxNzcxNjgxMzY1fQ.1_t1N6TpDuJtgJH0KFa-ByzEFa2aAnSnrcWr0-Pjh7cIKZ3mNb1PVgyHpAFRzD9nH2rh2BxWDIzJWbzz89ayFA&provider=google
2026-02-20 13:42:45.456 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:42:45.456] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:45:14.952 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:45:14.952] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:45:14.952 [http-nio-8080-exec-3] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 13:45:14.952 [http-nio-8080-exec-3] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 13:45:14.954 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 13:45:14.959 [http-nio-8080-exec-3] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 13:45:14.959 [http-nio-8080-exec-3] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5NTExNCwiZXhwIjoxNzcxNjgxNTE0fQ.1tBzeRY-K9Xt-YvkwpnrDhfsjXsa4EZbguICCmbfpVn_C3ucU3-11S4BOfG7W6ljiZ9z8muefGt7rnzUdm4s0g&provider=google
2026-02-20 13:45:14.959 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:45:14.959] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:46:20.534 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:46:20.541 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1914894359 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:46:20.542 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:20.542] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 13:46:20.545 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:20.545] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 13:46:20.550 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:46:20.578 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 13:46:20.594 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:20.593] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 13:46:20.594 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:20.594] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 13:46:20.599 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1914894359 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:46:20.604 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 68ms
2026-02-20 13:46:20.604 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:46:20.753 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1831775671 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:46:20.754 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:20.754] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@657fa220, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:46:20.852 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:20.851] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:20.934 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:46:20.938 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 3ms
2026-02-20 13:46:20.939 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:46:20.961 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:46:21.011 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.032 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.036 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.039 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.043 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.047 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.052 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.056 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.058 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.061 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.066 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.069 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.088 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:46:21.100 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:46:21.124 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:21.123] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:21.124 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:21.124] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:46:21.126 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1831775671 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:46:21.127 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 576ms
2026-02-20 13:46:21.127 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:46:21.135 [http-nio-8080-exec-5] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 13:46:21.175 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:46:21.176 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1496508888 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:46:21.177 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:21.177] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3896b25c, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:46:21.177 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:21.177] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:21.184 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:46:21.188 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.192 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.200 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.203 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.207 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.210 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.217 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.234 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.237 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.240 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.244 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.250 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:21.259 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:46:21.264 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:46:21.273 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:21.273] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:21.274 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:21.274] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:46:21.277 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1496508888 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:46:21.278 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 103ms
2026-02-20 13:46:21.279 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:46:49.794 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:46:49.790 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:46:49.796 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 13:46:49.797 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:46:49.797 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1449374192 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:46:49.799 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:49.799] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@525c2fe4, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:46:49.799 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:49.799] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:49.801 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:46:49.806 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.813 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.816 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.818 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.821 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.823 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.828 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.831 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.834 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.835 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.838 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.840 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.840 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:46:49.841 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-20 13:46:49.842 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:46:49.846 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:46:49.848 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:46:49.851 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:49.851] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:49.852 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:49.852] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:46:49.852 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1449374192 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:46:49.853 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 57ms
2026-02-20 13:46:49.853 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:46:49.864 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 13:46:49.865 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1462108801 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:46:49.866 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:49.866] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6c1eca17, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 13:46:49.866 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:49.866] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:49.867 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:46:49.870 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.873 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.877 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.880 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.883 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.885 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.888 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.891 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.893 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.896 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.898 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.901 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:46:49.906 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:46:49.909 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:46:49.913 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:46:49.913] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:46:49.913 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:46:49.913] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:46:49.914 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1462108801 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:46:49.915 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 51ms
2026-02-20 13:46:49.916 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:50:07.818 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:50:07.818] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:50:07.819 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 13:50:07.819 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 13:50:07.820 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 13:50:07.825 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 13:50:07.825 [http-nio-8080-exec-5] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5NTQwNywiZXhwIjoxNzcxNjgxODA3fQ.VxNenBnnzmmqkH6CL-IHKYYbcRPvuVEUk9vozuJEFkx5y9Bollt7UqJ-Xsovni_NRgbcxqGJtBC4YL6L8XfBcA&provider=google
2026-02-20 13:50:07.825 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:50:07.825] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 13:52:13.081 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1822377325 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:13.082 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.082] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:13.089 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.089] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:13.107 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:13.113 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.112] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:13.126 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.126] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:13.127 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1822377325 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:13.132 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:13.573 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@390465456 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:13.574 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.574] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 13:52:13.578 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.578] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:52:13.608 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 13:52:13.627 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.627] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:52:13.627 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.627] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 13:52:13.628 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@390465456 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:13.671 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1851854770 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:13.672 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.672] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 13:52:13.676 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.676] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 13:52:13.682 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 13:52:13.699 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.699] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 13:52:13.700 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.700] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 13:52:13.701 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1851854770 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:13.705 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@468763836 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:13.705 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.705] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-20 13:52:13.708 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.708] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 13:52:13.713 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 13:52:13.734 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:52:13.739 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 13:52:13.742 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.742] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 13:52:13.743 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.743] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 13:52:13.744 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@468763836 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:13.771 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1445462482 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:13.772 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.772] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 13:52:13.772 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.772] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:52:13.893 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:52:13.897 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:52:13.901 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:13.901] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:52:13.901 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:13.901] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 13:52:13.902 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1445462482 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:25.902 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1303759833 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:25.904 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.904] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:25.904 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.904] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.905 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:25.908 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.908] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.908 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.908] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:25.908 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@87003404 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:25.908 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.908] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:25.908 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1303759833 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:25.908 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.908] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.909 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:25.910 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:25.915 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 13:52:25.916 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1455905762 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:25.917 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.917] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@271d3c81, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 13:52:25.917 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.917] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:25.919 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:52:25.921 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.922 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.922] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.922 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.922] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:25.925 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.927 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@87003404 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:25.928 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.930 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:25.931 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.933 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.933 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:52:25.936 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 3ms
2026-02-20 13:52:25.937 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:52:25.937 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.938 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.941 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.943 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@955641970 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:25.945 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.945] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:25.945 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.945] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.946 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:25.947 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:52:25.948 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.948] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.948 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:52:25.949 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.949] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:25.950 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@955641970 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:25.952 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:25.952 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.952] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:25.952 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.952] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:52:25.953 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1455905762 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:25.954 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 39ms
2026-02-20 13:52:25.954 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:52:25.954 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:52:25.955 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 13:52:25.955 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:52:25.964 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@715539535 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:25.965 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.965] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:25.965 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.965] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.966 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:25.969 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.969] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:25.969 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.969] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:25.970 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@715539535 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:25.973 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:25.976 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 13:52:25.977 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2098643380 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:25.977 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:25.977] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@12734b74, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 13:52:25.978 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:25.978] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:25.979 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:52:25.981 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.983 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.986 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.989 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.991 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.993 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.994 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:25.997 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:26.002 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:52:26.005 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:52:26.008 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:26.007] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:26.008 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:26.008] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:52:26.009 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2098643380 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:26.009 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 33ms
2026-02-20 13:52:26.009 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:52:28.037 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1787418413 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:28.037 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.037] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:28.038 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.038] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.038 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@281266233 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:28.038 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.038] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:28.038 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.038] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.039 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:28.039 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:28.041 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.041] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.041 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.041] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.041 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.041] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:28.041 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.041] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:28.042 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1787418413 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:28.042 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@281266233 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:28.043 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:28.043 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:28.054 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 13:52:28.054 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 13:52:28.055 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 1ms
2026-02-20 13:52:28.055 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 13:52:28.055 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1567385969 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:28.055 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.055] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 13:52:28.055 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.055] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 13:52:28.059 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 13:52:28.061 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.061] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 13:52:28.062 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1613996612 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:28.062 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.062] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 13:52:28.062 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.062] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:28.062 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.062] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.062 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1567385969 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:28.063 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 8ms
2026-02-20 13:52:28.063 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 13:52:28.063 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:28.066 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.065] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.066 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.066] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:28.067 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1613996612 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:28.069 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:28.069 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@370457822 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:28.071 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.071] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:28.071 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.071] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.071 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:28.073 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 13:52:28.073 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 13:52:28.073 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 13:52:28.075 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:28.075] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:28.075 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:28.075] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:28.076 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@370457822 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:28.079 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:28.083 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 13:52:28.083 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-20 13:52:28.083 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 13:52:29.433 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@420584579 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:29.433 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:29.433] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:29.434 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:29.434] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:29.435 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:29.438 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:29.438] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:29.438 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:29.438] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:29.439 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@420584579 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:29.441 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:29.489 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2088759125 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:29.491 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:29.491] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-20 13:52:29.492 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:29.492] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:52:29.495 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 13:52:29.499 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:29.498] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:52:29.499 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:29.499] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 13:52:29.500 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2088759125 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:34.701 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@949516762 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:34.701 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.701] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:34.701 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.701] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:34.702 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:34.705 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.705] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:34.706 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.706] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:34.706 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@949516762 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:34.709 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:34.714 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AddressController.getAddressesByUser with arguments: [24]
2026-02-20 13:52:34.716 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1506711550 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:34.716 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.716] ENTERING: AddressServiceImpl.getAddressesByUser with arguments: [24]
2026-02-20 13:52:34.719 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.719] TRANSACTION START: AddressServiceImpl.getAddressesByUser(Integer)
2026-02-20 13:52:34.725 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select a1_0.address_id,a1_0.address_type,a1_0.city,a1_0.country,a1_0.created_at,a1_0.is_default,a1_0.postal_code,a1_0.state,a1_0.street_address,a1_0.user_id from addresses a1_0 where a1_0.user_id=?
2026-02-20 13:52:34.735 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.735] TRANSACTION COMMIT: AddressServiceImpl.getAddressesByUser(Integer)
2026-02-20 13:52:34.735 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.735] EXITING: AddressServiceImpl.getAddressesByUser returned: ArrayList
2026-02-20 13:52:34.736 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1506711550 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:34.736 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AddressController.getAddressesByUser responded in 22ms
2026-02-20 13:52:34.737 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AddressController.getAddressesByUser returned: ResponseEntity
2026-02-20 13:52:34.751 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1476914685 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:34.752 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.752] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:34.752 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.752] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:34.753 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:34.756 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:34.756] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:34.757 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:34.757] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:34.758 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1476914685 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:34.760 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:34.763 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AddressController.getAddressesByUser with arguments: [24]
2026-02-20 13:52:34.764 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AddressController.getAddressesByUser responded in 1ms
2026-02-20 13:52:34.764 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AddressController.getAddressesByUser returned: ResponseEntity
2026-02-20 13:52:37.647 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@244220258 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:37.647 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@73221941 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:37.648 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.648] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:37.648 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.648] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:37.648 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.648] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.648 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.648] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.649 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:37.649 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:37.653 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.652] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.654 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.654] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:37.653 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.653] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.654 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.654] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:37.654 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@244220258 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:37.656 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@73221941 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:37.657 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:37.659 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:37.661 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:52:37.662 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 13:52:37.662 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-20 13:52:37.662 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:52:37.663 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1312267254 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:37.663 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.663] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@90512f, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 13:52:37.663 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.663] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:37.666 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:52:37.670 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@955480074 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:37.673 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.673] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:37.675 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.675] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.676 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:37.671 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.678 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.678 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.678] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.678 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.678] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:37.679 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@955480074 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:37.680 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.681 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:37.682 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.683 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:52:37.684 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.685 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-20 13:52:37.686 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:52:37.689 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.692 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.693 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.698 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:52:37.701 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:52:37.705 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.704] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:37.705 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.705] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:52:37.705 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1312267254 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:37.705 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 43ms
2026-02-20 13:52:37.706 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:52:37.713 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@825639433 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:37.713 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.713] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:37.713 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.713] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.713 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:37.716 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.715] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:37.716 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.716] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:37.717 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@825639433 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:37.718 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:37.723 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 13:52:37.723 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@639411517 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:52:37.724 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.724] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@568afeba, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 13:52:37.724 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.724] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:37.725 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 13:52:37.727 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.730 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.732 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.735 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.738 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.739 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.742 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.743 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:52:37.749 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:52:37.751 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:52:37.753 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:37.753] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:52:37.754 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:37.754] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:52:37.754 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@639411517 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:52:37.755 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 32ms
2026-02-20 13:52:37.755 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:52:40.650 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@159078195 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:40.650 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:40.650] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 13:52:40.650 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:40.650] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:40.651 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:52:40.655 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:40.655] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:52:40.655 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:40.655] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:52:40.656 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@159078195 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:52:40.657 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 13:52:40.673 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1068519403 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:52:40.673 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:40.673] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 13:52:40.673 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:40.673] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:52:40.674 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:52:40.694 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:52:40.701 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:52:40.701] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:52:40.701 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:52:40.701] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 13:52:40.702 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1068519403 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:04.871 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@7f2cb570]
2026-02-20 13:56:04.940 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1833623425 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:04.941 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:04.941] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@7f2cb570]
2026-02-20 13:56:04.945 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:04.944] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 13:56:05.187 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:05.187] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [Peprahaugustina16@gmail.com]
2026-02-20 13:56:05.187 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:05.187] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:05.188 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:05.191 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:05.191] TRANSACTION ROLLBACK: CustomUserDetailsService.loadUserByUsername(String) - Exception: User not found with username: Peprahaugustina16@gmail.com
2026-02-20 13:56:05.191 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - Transaction CustomUserDetailsService.loadUserByUsername(String) failed after 4ms with exception: User not found with username: Peprahaugustina16@gmail.com
2026-02-20 13:56:05.192 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:05.192] EXCEPTION in CustomUserDetailsService.loadUserByUsername with arguments: [Peprahaugustina16@gmail.com]
2026-02-20 13:56:05.192 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: UsernameNotFoundException
2026-02-20 13:56:05.192 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: User not found with username: Peprahaugustina16@gmail.com
2026-02-20 13:56:05.192 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found with username: Peprahaugustina16@gmail.com
	at com.shopjoy.service.CustomUserDetailsService.lambda$0(CustomUserDetailsService.java:40)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.shopjoy.service.CustomUserDetailsService.loadUserByUsername(CustomUserDetailsService.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.CustomUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:104)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:143)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:183)
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:109)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:52)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:05.368] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 425ms with exception: Invalid username or password
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:05.368] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@7f2cb570]
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 13:56:05.368 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:94)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:109)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:52)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 13:56:05.375 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1833623425 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:05.376 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@7f2cb570]
2026-02-20 13:56:05.377 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 13:56:05.377 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:94)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:109)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:52)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 13:56:05.383 [http-nio-8080-exec-5] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 13:56:24.209 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@44e91197]
2026-02-20 13:56:24.210 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1733633091 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.211 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.211] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@44e91197]
2026-02-20 13:56:24.211 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.211] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 13:56:24.212 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.212] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:24.212 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.212] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.213 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:24.217 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.217] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.217 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.217] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:24.360 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.360] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 13:56:24.361 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.361] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 13:56:24.361 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1733633091 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.361 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 152ms
2026-02-20 13:56:24.361 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 13:56:24.471 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1190404530 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.472 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.472] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:24.472 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.472] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.473 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2021359876 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:24.473 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:24.473 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.473] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:24.474 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.474] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.474 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:24.475 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.475] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.475 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.475] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:24.476 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1190404530 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.477 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.477] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.477 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.477] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:24.477 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:24.478 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2021359876 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:24.479 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:24.483 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 13:56:24.484 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 13:56:24.484 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 13:56:24.489 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@871996830 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.489 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.489] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 13:56:24.492 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.492] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 13:56:24.498 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 13:56:24.499 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@555695605 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:24.499 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.499] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:24.499 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.499] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.500 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:24.502 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.502] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:24.502 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.502] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:24.504 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@555695605 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:24.505 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.505] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 13:56:24.506 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:24.506 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.506] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 13:56:24.506 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@871996830 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.508 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 13:56:24.509 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 13:56:24.509 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 13:56:24.523 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@43850617 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.523 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.523] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 13:56:24.523 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.523] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:24.537 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 13:56:24.540 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.542 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.544 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.546 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.547 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.549 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.551 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.553 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.556 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.557 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.559 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.561 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.562 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.564 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.566 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.567 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.569 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.570 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.573 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.574 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:24.578 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:56:24.580 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:56:24.582 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.582] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:24.583 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.583] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:56:24.583 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@43850617 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.605 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@328651764 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.605 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.605] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 13:56:24.605 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.605] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:56:24.609 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 13:56:24.619 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.637 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.640 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.642 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 13:56:24.645 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.647 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:24.679 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.681 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.684 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.685 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.689 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.691 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.693 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.695 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.697 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.699 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.702 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:24.705 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:56:24.707 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.709 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.711 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.714 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:24.716 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.718 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.722 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.723 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.726 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.727 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.729 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.731 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.733 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.735 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.737 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.739 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.742 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.743 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.744 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:24.746 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.746] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:56:24.747 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.747] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 13:56:24.748 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@328651764 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.783 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1652554237 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.783 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.783] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-20 13:56:24.792 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.791] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-20 13:56:24.796 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-20 13:56:24.805 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:24.815 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.815] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-20 13:56:24.816 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.816] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-20 13:56:24.817 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1652554237 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.819 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@228131752 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.820 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.820] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-20 13:56:24.823 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.823] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 13:56:24.833 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-20 13:56:24.836 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.836] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 13:56:24.837 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.837] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-20 13:56:24.837 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@228131752 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.846 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1960200307 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.846 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.846] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[3, 26, 18]]
2026-02-20 13:56:24.846 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.846] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-20 13:56:24.850 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?)
2026-02-20 13:56:24.854 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.854] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-20 13:56:24.854 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.854] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-20 13:56:24.854 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1960200307 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:24.870 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1107838563 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:24.870 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.870] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 42, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39]]
2026-02-20 13:56:24.870 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.870] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:56:24.871 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.873 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.875 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.877 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.879 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.882 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.883 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.885 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.888 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.890 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.891 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.893 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.896 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.897 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.899 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.901 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.904 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.906 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.908 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.910 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.912 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.913 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.916 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.919 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:24.921 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:24.923 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:24.923] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 13:56:24.923 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:24.923] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 13:56:24.924 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1107838563 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:28.231 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@328846106 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:28.231 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.231] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:28.231 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.231] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.232 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:28.234 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.234] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.234 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.234] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:28.235 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@328846106 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:28.235 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2029403390 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:28.236 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.236] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:28.236 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.236] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.237 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:28.238 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:28.239 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.239] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.239 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.239] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:28.239 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2029403390 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:28.240 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:56:28.240 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 13:56:28.240 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:56:28.241 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:28.245 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-20 13:56:28.245 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1406416691 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:28.246 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.246] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@5cd7c767, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-20 13:56:28.246 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.246] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:28.246 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@235259506 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:28.246 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.246] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:28.246 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.246] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.246 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 13:56:28.252 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.255 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:28.255 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.257 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.258 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.258] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.258 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.258] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:28.259 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@235259506 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:28.260 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.261 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:28.261 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.263 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.263 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:56:28.265 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-20 13:56:28.265 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:56:28.266 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.267 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.269 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.271 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.275 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:56:28.277 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:56:28.280 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.279] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:28.280 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.280] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:56:28.281 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1406416691 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:28.282 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 37ms
2026-02-20 13:56:28.282 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:56:28.288 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1045510332 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:28.288 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.288] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:28.288 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.288] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.289 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:28.291 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.291] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:28.291 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.291] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:28.291 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1045510332 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:28.293 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:28.296 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, null, 0, 10, id, ASC]
2026-02-20 13:56:28.297 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2004360493 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:28.298 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.298] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@2be0c22f, Page request [number: 0, size 10, sort: id: ASC], id, ASC]
2026-02-20 13:56:28.298 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.298] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:28.299 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 13:56:28.301 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.303 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.304 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.306 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.308 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.309 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.311 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.312 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.313 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.316 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 13:56:28.320 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 13:56:28.322 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:56:28.324 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:28.324] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 13:56:28.325 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:28.325] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 13:56:28.325 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2004360493 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:28.326 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 30ms
2026-02-20 13:56:28.326 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 13:56:31.407 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1727835343 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:31.408 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:31.407] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:31.408 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:31.408] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:31.409 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:31.412 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:31.412] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:31.413 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:31.413] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:31.413 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1727835343 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:31.414 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:31.417 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:56:31.418 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 13:56:31.418 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:56:31.425 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2083296845 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:31.425 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:31.425] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:31.426 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:31.426] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:31.430 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:31.431 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:31.431] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:31.432 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:31.432] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:31.432 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2083296845 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:31.434 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:31.436 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 13:56:31.436 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 13:56:31.436 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 13:56:32.836 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1820249847 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:32.836 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:32.836] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:32.836 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:32.836] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:32.837 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:32.839 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:32.839] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:32.839 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:32.839] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:32.839 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1820249847 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:32.841 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:32.849 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@533359265 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:32.850 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:32.850] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 13:56:32.850 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:32.850] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:56:32.852 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 13:56:32.872 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.881 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.883 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.886 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 13:56:32.888 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.890 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:32.894 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.898 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.899 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.901 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.904 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.905 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.907 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.909 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.911 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.914 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.917 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:32.920 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 13:56:32.921 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.923 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.925 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.927 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:32.930 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.932 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.933 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.936 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.937 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.938 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.939 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.941 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.943 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.946 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.947 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.948 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 13:56:32.950 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 13:56:32.952 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.953 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 13:56:32.954 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:32.953] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 13:56:32.954 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:32.954] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 13:56:32.955 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@533359265 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:37.730 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@518529713 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:37.730 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.730] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:37.730 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.730] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:37.731 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:37.733 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.733] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:37.733 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.733] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:37.733 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@518529713 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:37.737 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:37.741 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: UserController.getAllUsers with arguments: []
2026-02-20 13:56:37.742 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1433985367 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:37.742 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.742] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 13:56:37.742 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.742] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 13:56:37.744 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 13:56:37.747 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.747] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 13:56:37.748 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.748] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 13:56:37.748 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1433985367 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:37.749 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint UserController.getAllUsers responded in 8ms
2026-02-20 13:56:37.749 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: UserController.getAllUsers returned: ResponseEntity
2026-02-20 13:56:37.760 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@888103944 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:37.760 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.760] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:37.760 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.760] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:37.761 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:37.762 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.762] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:37.762 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.762] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:37.764 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@888103944 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:37.766 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:37.768 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: UserController.getAllUsers with arguments: []
2026-02-20 13:56:37.768 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2085702640 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:37.768 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.768] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 13:56:37.768 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.768] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 13:56:37.771 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 13:56:37.773 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:37.773] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 13:56:37.775 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:37.775] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 13:56:37.775 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2085702640 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:37.775 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint UserController.getAllUsers responded in 7ms
2026-02-20 13:56:37.775 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: UserController.getAllUsers returned: ResponseEntity
2026-02-20 13:56:39.240 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@560160579 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:39.240 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.240] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:39.241 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.241] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:39.242 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:39.243 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.243] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:39.243 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.243] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:39.245 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@560160579 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:39.247 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:39.251 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-20 13:56:39.252 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1985419853 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:39.252 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.252] ENTERING: ProductServiceImpl.getAllProducts with arguments: []
2026-02-20 13:56:39.252 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.252] TRANSACTION START: ProductServiceImpl.getAllProducts()
2026-02-20 13:56:39.261 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 join categories c1_0 on c1_0.category_id=p1_0.category_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id
2026-02-20 13:56:39.310 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.310] TRANSACTION COMMIT: ProductServiceImpl.getAllProducts()
2026-02-20 13:56:39.311 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.311] EXITING: ProductServiceImpl.getAllProducts returned: ArrayList
2026-02-20 13:56:39.311 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1985419853 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:39.312 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getAllProducts responded in 61ms
2026-02-20 13:56:39.312 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-20 13:56:39.326 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@761178489 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:39.326 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.326] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:39.326 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.326] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:39.328 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:39.330 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:39.330] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:39.330 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:39.330] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:39.331 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@761178489 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:39.332 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:39.336 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getAllProducts with arguments: []
2026-02-20 13:56:39.336 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getAllProducts responded in 0ms
2026-02-20 13:56:39.336 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getAllProducts returned: ResponseEntity
2026-02-20 13:56:41.504 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@744700775 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:41.504 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.504] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:41.504 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.504] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:41.505 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:41.507 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.507] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:41.508 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.508] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:41.508 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@744700775 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:41.510 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:41.514 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getAllReviews with arguments: []
2026-02-20 13:56:41.516 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1404534617 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:41.516 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.516] ENTERING: ReviewServiceImpl.getAllReviews with arguments: []
2026-02-20 13:56:41.517 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.517] TRANSACTION START: ReviewServiceImpl.getAllReviews()
2026-02-20 13:56:41.519 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0
2026-02-20 13:56:41.530 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 13:56:41.533 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 13:56:41.535 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.535] TRANSACTION COMMIT: ReviewServiceImpl.getAllReviews()
2026-02-20 13:56:41.535 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.535] EXITING: ReviewServiceImpl.getAllReviews returned: ArrayList
2026-02-20 13:56:41.537 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1404534617 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:41.537 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getAllReviews responded in 22ms
2026-02-20 13:56:41.537 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getAllReviews returned: ResponseEntity
2026-02-20 13:56:41.544 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@725460253 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:41.545 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.545] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:41.545 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.545] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:41.547 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:41.549 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:41.549] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:41.549 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:41.549] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:41.549 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@725460253 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:41.551 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:41.553 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getAllReviews with arguments: []
2026-02-20 13:56:41.554 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getAllReviews responded in 0ms
2026-02-20 13:56:41.554 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getAllReviews returned: ResponseEntity
2026-02-20 13:56:43.714 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1555321455 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:43.715 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.715] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:43.715 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.715] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:43.716 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:43.717 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.717] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:43.717 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.717] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:43.718 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1555321455 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:43.719 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:43.730 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 13:56:43.731 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1418777480 wrapping org.postgresql.jdbc.PgConnection@19cad9f0] read-only
2026-02-20 13:56:43.731 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.731] ENTERING: SecurityAuditService.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 13:56:43.732 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.732] TRANSACTION START: SecurityAuditService.getAllLogs(Pageable)
2026-02-20 13:56:43.736 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 13:56:43.745 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.745] TRANSACTION COMMIT: SecurityAuditService.getAllLogs(Pageable)
2026-02-20 13:56:43.745 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.745] EXITING: SecurityAuditService.getAllLogs returned: PageImpl
2026-02-20 13:56:43.747 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1418777480 wrapping org.postgresql.jdbc.PgConnection@19cad9f0]
2026-02-20 13:56:43.748 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 18ms
2026-02-20 13:56:43.748 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 13:56:43.754 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@379358698 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:43.754 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.754] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 13:56:43.754 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.754] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:43.756 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 13:56:43.757 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.757] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 13:56:43.757 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.757] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 13:56:43.758 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@379358698 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:43.760 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 13:56:43.763 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 13:56:43.764 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1510871937 wrapping org.postgresql.jdbc.PgConnection@4a0500eb] read-only
2026-02-20 13:56:43.764 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.764] ENTERING: SecurityAuditService.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 13:56:43.764 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.764] TRANSACTION START: SecurityAuditService.getAllLogs(Pageable)
2026-02-20 13:56:43.767 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 13:56:43.775 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 13:56:43.774] TRANSACTION COMMIT: SecurityAuditService.getAllLogs(Pageable)
2026-02-20 13:56:43.775 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 13:56:43.775] EXITING: SecurityAuditService.getAllLogs returned: PageImpl
2026-02-20 13:56:43.775 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1510871937 wrapping org.postgresql.jdbc.PgConnection@4a0500eb]
2026-02-20 13:56:43.776 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 12ms
2026-02-20 13:56:43.776 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 14:04:07.123 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:07.123] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 14:04:07.123 [http-nio-8080-exec-6] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 14:04:07.123 [http-nio-8080-exec-6] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 14:04:07.125 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 14:04:07.138 [http-nio-8080-exec-6] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 14:04:07.138 [http-nio-8080-exec-6] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5NjI0NywiZXhwIjoxNzcxNjgyNjQ3fQ.-kCEh1OrEBoNpQPUmCQAzj8xIBskgxSuSsgsWMkX68WUs6Zw5RjrkBZYjWkZuDlEXUCr2dXnBXvSy3c1Gatxng&provider=google
2026-02-20 14:04:07.138 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:07.138] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 14:04:41.024 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@592737375 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:41.025 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.025] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:41.025 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.025] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:41.025 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:41.028 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.028] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:41.028 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.028] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:41.029 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@592737375 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:41.037 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:41.061 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@717802635 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:41.063 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.063] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 14:04:41.064 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.064] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:04:41.075 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:04:41.088 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.088] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:04:41.088 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.088] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:04:41.088 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@717802635 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:41.091 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1109808622 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:41.091 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.091] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:04:41.091 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.091] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:04:41.092 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:04:41.102 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.102] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:04:41.102 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.102] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:04:41.103 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1109808622 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:41.105 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1816045307 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:41.106 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.106] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-20 14:04:41.106 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.106] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:04:41.111 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 14:04:41.123 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:04:41.142 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:04:41.143 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.143] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:04:41.143 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.143] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 14:04:41.143 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1816045307 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:41.147 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@508448178 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:41.147 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.147] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 14:04:41.147 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.147] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:04:41.153 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:04:41.156 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:04:41.161 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:41.161] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:04:41.161 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:41.161] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:04:41.161 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@508448178 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:45.034 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1099356017 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:45.035 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.035] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:45.035 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.035] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.035 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:45.035 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1507269058 wrapping org.postgresql.jdbc.PgConnection@50dd7398] read-only
2026-02-20 14:04:45.036 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.036] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:45.036 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.036] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.036 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:45.038 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.038] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.038 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.038] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:45.039 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1099356017 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:45.039 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:45.047 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:04:45.047 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 14:04:45.047 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:04:45.054 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.054] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.054 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.054] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:45.054 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1369012564 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:45.055 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.055] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:45.055 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.055] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.055 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1507269058 wrapping org.postgresql.jdbc.PgConnection@50dd7398]
2026-02-20 14:04:45.056 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:45.057 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:45.073 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 14:04:45.077 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.077] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.077 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.077] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:45.082 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1369012564 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:45.083 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@242800479 wrapping org.postgresql.jdbc.PgConnection@50dd7398] read-only
2026-02-20 14:04:45.084 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.084] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@7370de1d, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 14:04:45.084 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.084] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:04:45.085 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:04:45.088 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:45.093 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:04:45.098 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 5ms
2026-02-20 14:04:45.098 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:04:45.102 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.109 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.117 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.119 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.121 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.122 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.124 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.126 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.138 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:04:45.142 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:04:45.149 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.149] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:04:45.149 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.149] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:04:45.150 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@242800479 wrapping org.postgresql.jdbc.PgConnection@50dd7398]
2026-02-20 14:04:45.150 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 73ms
2026-02-20 14:04:45.150 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:04:45.170 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@262955405 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:45.170 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.170] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:45.171 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.171] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.171 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:45.174 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.174] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:45.174 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.174] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:45.175 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@262955405 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:45.180 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:45.185 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 14:04:45.189 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1437975275 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:45.189 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.189] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3a8261c6, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 14:04:45.189 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.189] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:04:45.193 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:04:45.198 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.200 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.201 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.203 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.204 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.206 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.208 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.209 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:04:45.215 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:04:45.218 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:04:45.220 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:45.220] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:04:45.220 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:45.220] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:04:45.221 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1437975275 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:45.221 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 33ms
2026-02-20 14:04:45.221 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:04:47.273 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1610266338 wrapping org.postgresql.jdbc.PgConnection@777549b1] read-only
2026-02-20 14:04:47.274 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:47.274] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:04:47.274 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:47.274] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:47.277 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:04:47.278 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:04:47.278] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:04:47.280 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:04:47.280] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:04:47.281 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1610266338 wrapping org.postgresql.jdbc.PgConnection@777549b1]
2026-02-20 14:04:47.284 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:04:47.346 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@316cc447]
2026-02-20 14:04:47.348 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@316cc447]
2026-02-20 14:04:47.348 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Cannot find cache named 'cartItems' for Builder[public com.shopjoy.dto.response.CartItemResponse com.shopjoy.service.impl.CartServiceImpl.addToCart(com.shopjoy.dto.request.AddToCartRequest)] caches=[cartItems] | key='#request.userId' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',false,false
2026-02-20 14:04:47.349 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
java.lang.IllegalArgumentException: Cannot find cache named 'cartItems' for Builder[public com.shopjoy.dto.response.CartItemResponse com.shopjoy.service.impl.CartServiceImpl.addToCart(com.shopjoy.dto.request.AddToCartRequest)] caches=[cartItems] | key='#request.userId' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',false,false
	at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92)
	at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:312)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.<init>(CacheAspectSupport.java:880)
	at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:325)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.<init>(CacheAspectSupport.java:770)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.CartServiceImpl$$SpringCGLIB$$0.addToCart(<generated>)
	at com.shopjoy.controller.CartController.addToCart(CartController.java:73)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.CartController$$SpringCGLIB$$0.addToCart(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:04:47.352 [http-nio-8080-exec-3] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: Cannot find cache named 'cartItems' for Builder[public com.shopjoy.dto.response.CartItemResponse com.shopjoy.service.impl.CartServiceImpl.addToCart(com.shopjoy.dto.request.AddToCartRequest)] caches=[cartItems] | key='#request.userId' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',false,false
	at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92)
	at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:312)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.<init>(CacheAspectSupport.java:880)
	at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:325)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.<init>(CacheAspectSupport.java:770)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.CartServiceImpl$$SpringCGLIB$$0.addToCart(<generated>)
	at com.shopjoy.controller.CartController.addToCart(CartController.java:73)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.CartController$$SpringCGLIB$$0.addToCart(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:09:00.761 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 14:09:00.967 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 14:09:00.991 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:09:00.999 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 14:09:01.030 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 14:09:57.343 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 28768 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 14:09:57.348 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 14:09:57.350 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 14:09:58.658 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 14:10:03.230 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 14:10:04.068 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 815 ms. Found 10 JPA repository interfaces.
2026-02-20 14:10:10.668 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 14:10:10.711 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 14:10:10.718 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 14:10:10.721 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 14:10:10.958 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13410 ms
2026-02-20 14:10:13.907 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 14:10:14.118 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 14:10:15.969 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 14:10:16.090 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 14:10:16.711 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7fb02869
2026-02-20 14:10:16.717 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 14:10:16.971 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 14:10:20.957 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 14:10:21.269 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:10:23.194 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 14:10:26.519 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 14:10:27.130 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 14:10:38.689 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 14:10:39.218 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 14:10:39.304 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 14:10:42.331 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 14:10:42.610 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 14:10:42.638 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 14:10:42.665 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 48.399 seconds (process running for 50.988)
2026-02-20 14:10:42.852 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 14:10:42.889 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2142523099 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:42.901 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:42.901] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 14:10:42.911 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:42.911] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:10:43.124 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 14:10:43.163 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:43.163] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:10:43.169 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:43.169] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 14:10:43.175 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2142523099 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:43.176 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 14:10:43.178 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 14:10:45.957 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 14:10:45.958 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 14:10:45.961 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-20 14:10:46.525 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1460562056 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:46.526 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:46.526] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:46.529 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:46.529] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:46.552 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:46.607 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:46.607] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:46.608 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:46.608] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:46.610 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1460562056 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:46.618 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:47.020 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@7ef25ab9]
2026-02-20 14:10:47.025 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.025] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@7ef25ab9]
2026-02-20 14:10:47.026 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.026] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:10:47.028 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.028] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:10:47.033 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.033] ENTERING: ProductServiceImpl.getProductById with arguments: [41]
2026-02-20 14:10:47.037 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.037] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:10:47.072 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:10:47.110 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:10:47.118 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.118] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:10:47.118 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.118] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 14:10:47.125 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.125] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [41, 1]
2026-02-20 14:10:47.129 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.128] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:10:47.164 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:10:47.168 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.168] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:10:47.168 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.168] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:10:47.179 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-20 14:10:47.227 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-20 14:10:47.295 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.295] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:10:47.296 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:47.296] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:10:47.296 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:47.296] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-20 14:10:47.320 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 299ms
2026-02-20 14:10:47.321 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-20 14:10:50.224 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1826902858 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:50.226 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.225] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:50.226 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.226] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.228 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:50.228 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@859857707 wrapping org.postgresql.jdbc.PgConnection@377ff19b] read-only
2026-02-20 14:10:50.229 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.229] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:50.229 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.229] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.230 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:50.232 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.232] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.233 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.233] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:50.234 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1826902858 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:50.238 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:50.243 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.242] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.243 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.243] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:50.244 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@859857707 wrapping org.postgresql.jdbc.PgConnection@377ff19b]
2026-02-20 14:10:50.249 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:50.251 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:10:50.251 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@508063355 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:50.252 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.252] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:10:50.253 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.253] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:10:50.255 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:10:50.256 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@276456594 wrapping org.postgresql.jdbc.PgConnection@377ff19b] read-only
2026-02-20 14:10:50.257 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.256] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 14:10:50.257 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.257] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:10:50.263 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:10:50.269 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:10:50.271 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:10:50.273 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:10:50.277 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.277] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:10:50.277 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.277] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:10:50.278 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@508063355 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:50.279 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 28ms
2026-02-20 14:10:50.280 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:10:50.294 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.294] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:10:50.294 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.294] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 14:10:50.295 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@276456594 wrapping org.postgresql.jdbc.PgConnection@377ff19b]
2026-02-20 14:10:50.296 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 41ms
2026-02-20 14:10:50.296 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:10:50.296 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@859746880 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:50.297 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.297] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:50.297 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.297] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.299 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:50.304 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.303] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.304 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.304] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:50.305 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@859746880 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:50.308 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:50.308 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1777644498 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:50.308 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.308] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:50.309 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.308] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.310 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:50.312 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:10:50.312 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:50.312] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:50.312 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:50.312] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:50.312 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 14:10:50.312 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:10:50.313 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1777644498 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:50.317 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:50.321 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:10:50.322 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-20 14:10:50.323 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:10:51.901 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1197824619 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:51.903 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.903] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:51.903 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.903] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.905 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:51.907 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.907] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.908 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.908] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:51.908 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1197824619 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:51.911 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:51.919 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [42, 2]
2026-02-20 14:10:51.920 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [42, 2]
2026-02-20 14:10:51.920 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.920] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [42, 2]
2026-02-20 14:10:51.921 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.921] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [42, 2]
2026-02-20 14:10:51.921 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.921] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 14:10:51.921 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.921] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 14:10:51.928 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-20 14:10:51.932 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-20 14:10:51.957 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.957] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [41, 2]
2026-02-20 14:10:51.957 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.957] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:10:51.959 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:10:51.960 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.960] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:10:51.960 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.960] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:10:51.964 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.964] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 14:10:51.964 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.964] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 14:10:51.965 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.965] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-20 14:10:51.965 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 45ms
2026-02-20 14:10:51.972 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-20 14:10:51.980 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 61ms
2026-02-20 14:10:51.980 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-20 14:10:51.991 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@388229768 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:51.991 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1908448458 wrapping org.postgresql.jdbc.PgConnection@377ff19b] read-only
2026-02-20 14:10:51.991 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.991] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:51.992 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.992] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:51.992 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.992] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.993 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.993] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.993 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:51.993 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:51.995 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.995] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.996 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.996] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:51.997 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1908448458 wrapping org.postgresql.jdbc.PgConnection@377ff19b]
2026-02-20 14:10:51.997 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:51.997] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:51.997 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:51.997] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:51.998 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@388229768 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:52.000 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:52.001 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:52.004 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:10:52.004 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:10:52.004 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@114306997 wrapping org.postgresql.jdbc.PgConnection@377ff19b] read-only
2026-02-20 14:10:52.004 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2089960161 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:52.004 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:52.004] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 14:10:52.004 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:52.004] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:10:52.005 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:52.005] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:10:52.005 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:52.005] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:10:52.005 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:10:52.005 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:10:52.008 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:10:52.008 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:10:52.012 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:52.012] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:10:52.011 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:52.011] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:10:52.012 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:52.012] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 14:10:52.012 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:52.012] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:10:52.012 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@114306997 wrapping org.postgresql.jdbc.PgConnection@377ff19b]
2026-02-20 14:10:52.012 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2089960161 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:52.013 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 9ms
2026-02-20 14:10:52.013 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:10:52.013 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 9ms
2026-02-20 14:10:52.013 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:10:53.337 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@53334529 wrapping org.postgresql.jdbc.PgConnection@7fb02869] read-only
2026-02-20 14:10:53.338 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:53.338] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:10:53.339 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:53.339] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:53.339 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:10:53.342 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:10:53.342] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:10:53.343 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:10:53.342] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:10:53.343 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@53334529 wrapping org.postgresql.jdbc.PgConnection@7fb02869]
2026-02-20 14:10:53.345 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:10:53.412 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@766b556d]
2026-02-20 14:10:53.413 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@766b556d]
2026-02-20 14:10:53.415 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Cannot find cache named 'orders' for Builder[public com.shopjoy.dto.response.OrderResponse com.shopjoy.service.impl.OrderServiceImpl.createOrder(com.shopjoy.dto.request.CreateOrderRequest)] caches=[orders] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',true,false
2026-02-20 14:10:53.415 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
java.lang.IllegalArgumentException: Cannot find cache named 'orders' for Builder[public com.shopjoy.dto.response.OrderResponse com.shopjoy.service.impl.OrderServiceImpl.createOrder(com.shopjoy.dto.request.CreateOrderRequest)] caches=[orders] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',true,false
	at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92)
	at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:312)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.<init>(CacheAspectSupport.java:880)
	at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:325)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.<init>(CacheAspectSupport.java:770)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:10:53.423 [http-nio-8080-exec-1] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: Cannot find cache named 'orders' for Builder[public com.shopjoy.dto.response.OrderResponse com.shopjoy.service.impl.OrderServiceImpl.createOrder(com.shopjoy.dto.request.CreateOrderRequest)] caches=[orders] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',true,false
	at org.springframework.cache.interceptor.AbstractCacheResolver.resolveCaches(AbstractCacheResolver.java:92)
	at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:312)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.<init>(CacheAspectSupport.java:880)
	at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:325)
	at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContexts.<init>(CacheAspectSupport.java:770)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:16:34.515 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 14:16:34.796 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 14:16:34.818 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:16:34.825 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 14:16:34.896 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 14:17:18.720 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 32260 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 14:17:18.726 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 14:17:18.727 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 14:17:19.616 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 14:17:23.718 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 14:17:24.427 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 668 ms. Found 10 JPA repository interfaces.
2026-02-20 14:17:28.470 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 14:17:28.513 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 14:17:28.518 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 14:17:28.518 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 14:17:28.812 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 9959 ms
2026-02-20 14:17:30.725 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 14:17:30.910 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 14:17:32.382 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 14:17:32.479 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 14:17:33.000 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5f59b6c5
2026-02-20 14:17:33.003 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 14:17:33.310 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 14:17:37.864 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 14:17:38.019 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:17:39.563 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 14:17:43.505 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 14:17:44.258 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 14:17:53.986 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 14:17:54.625 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 14:17:54.709 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 14:17:57.464 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 14:17:57.707 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 14:17:57.737 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 14:17:57.760 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 40.628 seconds (process running for 42.114)
2026-02-20 14:17:57.963 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 14:17:57.981 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1759515620 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:17:57.993 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:17:57.993] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 14:17:58.003 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:17:58.003] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:17:58.221 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 14:17:58.258 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:17:58.258] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:17:58.260 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:17:58.260] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 14:17:58.266 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1759515620 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:17:58.267 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 14:17:58.269 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 14:20:04.844 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 14:20:04.845 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 14:20:04.848 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-20 14:20:05.223 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1378182180 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:05.224 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.224] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:20:05.227 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.227] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:05.242 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:20:05.299 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.299] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:05.299 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.299] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:20:05.300 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1378182180 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:20:05.310 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:20:05.766 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@977450a]
2026-02-20 14:20:05.771 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1142079940 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] to 8
2026-02-20 14:20:05.773 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@977450a]
2026-02-20 14:20:05.773 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.773] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@977450a]
2026-02-20 14:20:05.777 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.777] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@977450a]
2026-02-20 14:20:05.777 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.777] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:20:05.780 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.779] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:20:05.785 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.785] ENTERING: UserServiceImpl.getUserById with arguments: [24]
2026-02-20 14:20:05.789 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.788] TRANSACTION START: UserServiceImpl.getUserById(Integer)
2026-02-20 14:20:05.818 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:20:05.825 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.825] TRANSACTION COMMIT: UserServiceImpl.getUserById(Integer)
2026-02-20 14:20:05.827 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.827] EXITING: UserServiceImpl.getUserById returned: UserResponse
2026-02-20 14:20:05.832 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.830] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[42]]
2026-02-20 14:20:05.835 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.835] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:20:05.838 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:20:05.872 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:20:05.882 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.881] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:20:05.882 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.882] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:20:05.885 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.885] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [42, 2]
2026-02-20 14:20:05.889 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.889] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:20:05.923 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:20:05.928 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.928] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:20:05.928 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.928] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:20:05.930 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.930] ENTERING: InventoryServiceImpl.reserveStock with arguments: [42, 2]
2026-02-20 14:20:05.932 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.932] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:20:05.933 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.933] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:20:05.941 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:20:05.951 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.951] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:20:05.952 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:05.952] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:20:05.960 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:05.960] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 14:20:06.010 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into orders (created_at,notes,order_date,payment_method,payment_status,shipping_address,status,total_amount,updated_at,user_id) values (?,?,?,?,?,?,?,?,?,?)
2026-02-20 14:20:06.095 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 14:20:06.121 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 14:20:06.127 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.127] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:20:06.127 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.127] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:20:06.129 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.129] EXITING: OrderServiceImpl.createOrder returned: OrderResponse
2026-02-20 14:20:06.129 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.createOrder(CreateOrderRequest) in 356ms
2026-02-20 14:20:06.139 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 14:20:06.152 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1142079940 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] to 2
2026-02-20 14:20:06.164 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.createOrder responded in 397ms
2026-02-20 14:20:06.164 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.createOrder returned: ResponseEntity
2026-02-20 14:20:06.348 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@348399481 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:06.349 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.349] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:20:06.349 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.349] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.350 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:20:06.355 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.355] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.355 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.355] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:20:06.356 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@348399481 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:20:06.359 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:20:06.366 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.clearCart with arguments: [24]
2026-02-20 14:20:06.368 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.368] ENTERING: CartServiceImpl.clearCart with arguments: [24]
2026-02-20 14:20:06.370 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.370] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 14:20:06.372 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.372] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 14:20:06.382 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:20:06.397 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:20:06.410 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.410] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 14:20:06.410 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.410] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 14:20:06.410 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.410] EXITING: CartServiceImpl.clearCart returned: void
2026-02-20 14:20:06.417 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-20 14:20:06.424 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.clearCart responded in 56ms
2026-02-20 14:20:06.424 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.clearCart returned: ResponseEntity
2026-02-20 14:20:06.442 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1321526541 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:06.443 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1597478216 wrapping org.postgresql.jdbc.PgConnection@5b081a76] read-only
2026-02-20 14:20:06.443 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.443] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:20:06.444 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.444] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:20:06.444 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.444] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.444 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.444] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.445 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:20:06.445 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:20:06.449 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.449] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.449 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.449] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:20:06.451 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1321526541 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:20:06.455 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:20:06.460 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.460] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:06.461 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.461] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:20:06.461 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1597478216 wrapping org.postgresql.jdbc.PgConnection@5b081a76]
2026-02-20 14:20:06.465 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:20:06.468 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:20:06.469 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@383892740 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:06.470 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.470] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 14:20:06.470 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.470] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:20:06.471 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:20:06.472 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@798641135 wrapping org.postgresql.jdbc.PgConnection@5b081a76] read-only
2026-02-20 14:20:06.472 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.472] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:20:06.473 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.473] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:20:06.475 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:20:06.475 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:20:06.480 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.480] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:20:06.481 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.481] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 14:20:06.481 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:06.481] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:20:06.481 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:06.481] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:20:06.482 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@798641135 wrapping org.postgresql.jdbc.PgConnection@5b081a76]
2026-02-20 14:20:06.482 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@383892740 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:20:06.482 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 11ms
2026-02-20 14:20:06.482 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:20:06.486 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 17ms
2026-02-20 14:20:06.486 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:20:08.857 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@673588207 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:08.857 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:08.857] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:20:08.858 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:08.858] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:08.859 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:20:08.862 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:08.862] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:20:08.862 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:08.862] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:20:08.863 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@673588207 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:20:08.865 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:20:09.155 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@30091199 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5] read-only
2026-02-20 14:20:09.158 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:09.158] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-20 14:20:09.159 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:09.159] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:20:09.202 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:20:09.214 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:20:09.221 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:20:09.225 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:20:09.228 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:20:09.230 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:20:09.230] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:20:09.230 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:20:09.230] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:20:09.232 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@30091199 wrapping org.postgresql.jdbc.PgConnection@5f59b6c5]
2026-02-20 14:30:02.571 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 14:30:02.584 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 14:30:02.618 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:30:02.624 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 14:30:02.679 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 14:32:01.177 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 25776 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 14:32:01.185 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 14:32:01.186 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 14:32:02.426 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 14:32:08.067 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 14:32:08.922 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 776 ms. Found 10 JPA repository interfaces.
2026-02-20 14:32:16.897 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 14:32:16.955 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 14:32:16.961 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 14:32:16.962 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 14:32:17.293 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 15742 ms
2026-02-20 14:32:19.693 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 14:32:19.859 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 14:32:21.670 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 14:32:21.822 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 14:32:22.651 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4cce421e
2026-02-20 14:32:22.659 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 14:32:23.330 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 14:32:31.287 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 14:32:31.752 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:32:36.278 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 14:32:43.224 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 14:32:44.326 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 14:32:58.542 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 14:32:59.797 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 14:32:59.904 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 14:33:04.271 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 14:33:04.707 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 14:33:04.758 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 14:33:04.820 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 65.556 seconds (process running for 68.733)
2026-02-20 14:33:05.485 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 14:33:05.599 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@420336411 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:05.616 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:05.616] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 14:33:05.825 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:05.825] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:33:06.403 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 14:33:06.445 [main] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy188.existsByUsername took 616ms
2026-02-20 14:33:06.446 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:06.445] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:33:06.446 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:06.446] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 14:33:06.459 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@420336411 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:06.460 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 14:33:06.461 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 14:33:13.461 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 14:33:13.462 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 14:33:13.464 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-20 14:33:13.970 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@4937d393, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@43d79a9c]]
2026-02-20 14:33:13.972 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1352733907 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:13.973 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:13.972] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@4937d393]
2026-02-20 14:33:13.973 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:13.973] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 14:33:14.143 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:14.143] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [jane_smith]
2026-02-20 14:33:14.153 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:14.153] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:33:14.166 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:33:14.280 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:14.280] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:33:14.281 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:14.281] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:33:14.775 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:14.775] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 14:33:14.775 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:14.775] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 14:33:14.776 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1352733907 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:14.777 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:14.777] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [jane_smith, LOGIN_SUCCESS, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@43d79a9c], User logged in successfully, true]
2026-02-20 14:33:14.780 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:14.779] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:33:14.855 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 14:33:14.895 [http-nio-8080-exec-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: jane_smith
2026-02-20 14:33:14.896 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:14.895] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:33:14.896 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:14.896] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 14:33:14.914 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 943ms
2026-02-20 14:33:14.914 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 14:33:15.250 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2000226721 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:15.255 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:15.255] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [jane_smith]
2026-02-20 14:33:15.256 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:15.255] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:33:15.258 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:33:15.260 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:15.260] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:33:15.261 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:15.261] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:33:15.262 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2000226721 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:15.266 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: jane_smith
2026-02-20 14:33:15.577 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1682638509 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:15.577 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:15.577] ENTERING: OrderServiceImpl.getOrders with arguments: [3, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 14:33:15.585 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:15.585] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:33:15.663 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:33:15.712 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.738 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.765 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.772 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:33:15.776 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.783 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:33:15.842 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.845 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.849 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.853 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.856 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.860 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.864 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:33:15.870 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:33:15.873 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.877 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.880 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.884 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:33:15.889 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.891 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.894 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.898 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.901 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.904 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.906 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.909 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.911 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.913 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.915 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.918 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:15.921 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:15.924 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:33:15.925 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:15.925] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:33:15.927 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:15.927] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:33:15.928 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1682638509 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:16.028 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1929680115 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:16.029 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.029] ENTERING: CartServiceImpl.getCartItems with arguments: [3]
2026-02-20 14:33:16.078 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.078] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:33:16.087 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:33:16.102 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.102] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:33:16.102 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.102] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:33:16.104 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1929680115 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:16.110 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1819236614 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:16.111 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.111] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [3]
2026-02-20 14:33:16.114 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.114] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:33:16.119 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 14:33:16.134 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:16.138 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:33:16.141 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.141] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:33:16.141 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.141] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 14:33:16.142 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1819236614 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:33:16.173 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1605802490 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:33:16.173 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.173] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[23]]
2026-02-20 14:33:16.193 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.193] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:33:16.203 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:33:16.208 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:33:16.209 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:33:16.209] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:33:16.210 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:33:16.210] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:33:16.210 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1605802490 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:31.022 [http-nio-8080-exec-6] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [221] milliseconds.
2026-02-20 14:34:39.548 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:39.548] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 14:34:39.551 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 14:34:39.551 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 14:34:39.558 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 14:34:39.565 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 14:34:39.565 [http-nio-8080-exec-9] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g&provider=google
2026-02-20 14:34:39.566 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:39.566] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 14:34:45.865 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@423218677 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:45.867 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.867] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:45.873 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.873] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:45.875 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:45.879 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.879] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:45.879 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.879] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:45.880 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@423218677 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:45.891 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:45.927 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1941474473 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:45.927 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.927] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 14:34:45.928 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.928] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:34:45.937 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:34:45.946 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:34:45.949 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:34:45.952 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:34:45.957 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:34:45.960 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.960] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:34:45.961 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.961] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:34:45.962 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1941474473 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:45.968 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1845836336 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:45.968 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.968] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:34:45.969 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.969] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:34:45.970 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:34:45.974 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.974] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:34:45.975 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.975] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:34:45.976 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1845836336 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:45.978 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1125427832 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:45.981 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.981] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-20 14:34:45.982 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.982] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:34:45.984 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 14:34:45.987 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:34:45.990 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:34:45.992 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:45.992] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 14:34:45.992 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:45.992] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 14:34:45.994 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1125427832 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:45.997 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@813240524 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:46.000 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:46.000] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 14:34:46.000 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:46.000] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:34:46.001 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:34:46.016 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:34:46.022 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:46.022] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:34:46.022 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:46.022] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:34:46.023 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@813240524 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:48.889 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1053687379 wrapping org.postgresql.jdbc.PgConnection@3af26d52] read-only
2026-02-20 14:34:48.890 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2122339424 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:48.891 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:48.890] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:48.891 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:48.891] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:48.892 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:48.889 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:48.889] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:48.922 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:48.922] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:48.933 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:48.934 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:48.934] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:48.963 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:48.963] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:48.974 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:48.974] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:48.975 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:48.975] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:48.976 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1053687379 wrapping org.postgresql.jdbc.PgConnection@3af26d52]
2026-02-20 14:34:48.982 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2122339424 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:48.985 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:48.996 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:49.181 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:34:49.230 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@502901951 wrapping org.postgresql.jdbc.PgConnection@3af26d52] read-only
2026-02-20 14:34:49.231 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:49.231] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 14:34:49.284 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 14:34:49.406 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:49.406] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 14:34:49.756 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 14:34:49.865 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:49.865] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 14:34:49.865 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:49.865] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 14:34:49.952 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@502901951 wrapping org.postgresql.jdbc.PgConnection@3af26d52]
2026-02-20 14:34:49.953 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 724ms
2026-02-20 14:34:49.953 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:34:50.323 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@751808401 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:50.323 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:50.323] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:50.324 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:50.324] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:50.325 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:50.370 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:50.370] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:50.370 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:50.370] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:50.371 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@751808401 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:50.374 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:50.408 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1512371834 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:50.402 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:34:50.437 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:50.437] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3d8e57b8, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 14:34:50.438 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 1ms
2026-02-20 14:34:50.438 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:34:50.562 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:50.562] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:34:51.051 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:34:51.138 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.218 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.221 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.224 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.270 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.274 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.336 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.450 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:51.683 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:34:51.717 [http-nio-8080-exec-3] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy211.findWithFilters took 1.15s
2026-02-20 14:34:51.718 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:34:51.816 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:51.752] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:34:51.819 [http-nio-8080-exec-3] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: ProductServiceImpl.getProductsWithFilters took 1.38s
2026-02-20 14:34:51.820 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:51.820] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:34:51.847 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1512371834 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:51.852 [http-nio-8080-exec-3] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW API ENDPOINT: ProductController.getProductsWithFilters took 2.57s
2026-02-20 14:34:51.882 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:34:51.959 [http-nio-8080-exec-3] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 14:34:52.174 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1544035022 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:52.175 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:52.175] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:52.175 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:52.175] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:52.176 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:52.180 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:52.179] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:52.180 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:52.180] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:52.181 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1544035022 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:52.183 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:52.197 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 14:34:52.198 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1248216598 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:52.200 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:52.200] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@74c40cc7, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 14:34:52.201 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:52.201] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:34:52.202 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:34:52.205 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.209 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.212 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.215 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.219 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.222 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.225 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.229 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:52.235 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:34:52.237 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:34:52.242 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:52.242] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:34:52.243 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:52.243] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:34:52.243 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1248216598 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:52.243 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 46ms
2026-02-20 14:34:52.243 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:34:55.906 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@440899929 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:55.906 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:55.906] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:55.907 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:55.907] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:55.908 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:55.911 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:55.911] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:55.911 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:55.911] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:55.912 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@440899929 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:55.915 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:55.989 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@446e2130]
2026-02-20 14:34:55.991 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:55.991] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@446e2130]
2026-02-20 14:34:55.993 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:55.993] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:56.001 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.001] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:56.009 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:56.009] ENTERING: ProductServiceImpl.getProductById with arguments: [70]
2026-02-20 14:34:56.010 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.009] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:34:56.011 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:34:56.022 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:34:56.024 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.024] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:34:56.025 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:56.024] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 14:34:56.026 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:56.026] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [70, 1]
2026-02-20 14:34:56.037 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.037] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:34:56.096 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:56.108 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.101] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:34:56.110 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:56.110] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:34:56.169 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-20 14:34:56.190 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-20 14:34:56.228 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.228] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:56.228 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:56.228] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:56.229 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:56.229] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-20 14:34:56.259 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 270ms
2026-02-20 14:34:56.263 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-20 14:34:57.841 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@600551801 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:34:57.841 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.841] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:34:57.842 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.842] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:57.843 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:34:57.848 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.848] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:34:57.849 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.849] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:34:57.855 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@600551801 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:34:57.858 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:34:57.872 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@5c462441]
2026-02-20 14:34:57.876 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.876] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@5c462441]
2026-02-20 14:34:57.876 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.876] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:57.876 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.876] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:57.877 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.877] ENTERING: ProductServiceImpl.getProductById with arguments: [36]
2026-02-20 14:34:57.878 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.878] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:34:57.879 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:34:57.894 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:34:57.896 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.896] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 14:34:57.896 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.896] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 14:34:57.898 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.898] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [36, 1]
2026-02-20 14:34:57.898 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.898] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:34:57.906 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:34:57.912 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.912] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:34:57.913 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.913] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:34:57.926 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-20 14:34:57.935 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-20 14:34:57.942 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.942] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:57.942 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:34:57.942] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 14:34:57.942 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:34:57.942] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-20 14:34:57.944 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 68ms
2026-02-20 14:34:57.944 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-20 14:35:00.631 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2066174922 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:35:00.631 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.631] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:35:00.633 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.631] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.634 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1453636424 wrapping org.postgresql.jdbc.PgConnection@3af26d52] read-only
2026-02-20 14:35:00.634 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.634] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:35:00.634 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.634] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.635 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:35:00.638 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:35:00.641 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.641] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.641 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.641] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:35:00.641 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2066174922 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:35:00.642 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.642] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.642 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.642] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:35:00.645 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:35:00.648 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1453636424 wrapping org.postgresql.jdbc.PgConnection@3af26d52]
2026-02-20 14:35:00.653 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:35:00.659 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:35:00.662 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1400477620 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:35:00.662 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.662] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:35:00.664 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.663] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:35:00.666 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:35:00.669 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:35:00.673 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:35:00.683 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.683] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:35:00.684 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2092803121 wrapping org.postgresql.jdbc.PgConnection@3af26d52] read-only
2026-02-20 14:35:00.686 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.686] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:35:00.686 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.686] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 14:35:00.687 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.687] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:35:00.687 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1400477620 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:35:00.688 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 29ms
2026-02-20 14:35:00.688 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:35:00.702 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:35:00.706 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:35:00.709 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1457911029 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:35:00.710 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.710] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:35:00.710 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.710] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.711 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:35:00.715 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.715] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.715 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.715] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:35:00.716 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1457911029 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:35:00.732 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.732] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:35:00.732 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.732] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 14:35:00.734 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2092803121 wrapping org.postgresql.jdbc.PgConnection@3af26d52]
2026-02-20 14:35:00.734 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 68ms
2026-02-20 14:35:00.734 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:35:00.738 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:35:00.743 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:35:00.748 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 14:35:00.748 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:35:00.786 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1340082432 wrapping org.postgresql.jdbc.PgConnection@4cce421e] read-only
2026-02-20 14:35:00.787 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.787] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:35:00.787 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.787] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.823 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:35:00.856 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:00.856] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:00.856 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:00.856] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:35:00.857 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1340082432 wrapping org.postgresql.jdbc.PgConnection@4cce421e]
2026-02-20 14:35:00.859 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:35:00.877 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:35:00.878 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 1ms
2026-02-20 14:35:00.878 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:35:03.468 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1391552762 wrapping org.postgresql.jdbc.PgConnection@3af26d52] read-only
2026-02-20 14:35:03.468 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:03.468] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:35:03.468 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:03.468] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:03.469 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:35:03.472 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:03.472] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:35:03.472 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:03.472] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:35:03.473 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1391552762 wrapping org.postgresql.jdbc.PgConnection@3af26d52]
2026-02-20 14:35:03.502 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:35:04.182 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:04.208 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@692866779 wrapping org.postgresql.jdbc.PgConnection@3af26d52] to 8
2026-02-20 14:35:04.232 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:04.232 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.232] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:04.256 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.255] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:04.269 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.269] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:35:04.281 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.281] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:35:04.286 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.286] ENTERING: UserServiceImpl.getUserById with arguments: [24]
2026-02-20 14:35:04.334 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.334] TRANSACTION START: UserServiceImpl.getUserById(Integer)
2026-02-20 14:35:04.349 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:35:04.360 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.360] TRANSACTION COMMIT: UserServiceImpl.getUserById(Integer)
2026-02-20 14:35:04.364 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.364] EXITING: UserServiceImpl.getUserById returned: UserResponse
2026-02-20 14:35:04.366 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.366] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[43, 44]]
2026-02-20 14:35:04.366 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.366] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:35:04.379 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:35:04.400 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:35:04.429 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:35:04.432 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.432] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:35:04.432 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.432] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:35:04.434 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.433] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [43, 1]
2026-02-20 14:35:04.434 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.434] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:35:04.454 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:35:04.489 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.489] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:35:04.490 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.490] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:35:04.538 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.538] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [44, 1]
2026-02-20 14:35:04.538 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.538] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:35:04.554 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:35:04.573 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.572] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:35:04.577 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.573] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:35:04.594 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.594] ENTERING: InventoryServiceImpl.reserveStock with arguments: [43, 1]
2026-02-20 14:35:04.602 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.602] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.602 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.602] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.738 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:35:04.767 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.767] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.767 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.767] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.768 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.768] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 14:35:04.806 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.806] ENTERING: InventoryServiceImpl.reserveStock with arguments: [44, 1]
2026-02-20 14:35:04.816 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.816] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.816 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.816] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.886 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 14:35:04.907 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:35:04.912 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.911] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.912 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:04.912] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:35:04.912 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:04.912] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 14:35:04.921 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into orders (created_at,notes,order_date,payment_method,payment_status,shipping_address,status,total_amount,updated_at,user_id) values (?,?,?,?,?,?,?,?,?,?)
2026-02-20 14:35:04.996 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 14:35:05.050 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 14:35:05.082 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:05.082] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, ORDER_CREATED, Order #29 created with 2 items, total amount: $199.98, true]
2026-02-20 14:35:05.132 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:05.132] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 14:35:05.237 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 14:35:05.483 [http-nio-8080-exec-7] WARN  org.hibernate.orm.jdbc.error - HHH000247: ErrorCode: 0, SQLState: 23514
2026-02-20 14:35:05.483 [http-nio-8080-exec-7] WARN  org.hibernate.orm.jdbc.error - ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).
2026-02-20 14:35:05.670 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - DB EXCEPTION in $Proxy192.save with arguments: [com.shopjoy.entity.SecurityAuditLog@a434f28]
2026-02-20 14:35:05.670 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Database exception: could not execute statement [ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).] [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; SQL [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; constraint [chk_event_type]
2026-02-20 14:35:05.670 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).] [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; SQL [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; constraint [chk_event_type]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy192.save(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy192.save(Unknown Source)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:62)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl$$SpringCGLIB$$0.logEvent(<generated>)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:92)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).] [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:73)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
	at jdk.proxy2/jdk.proxy2.$Proxy186.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:664)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	... 317 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2846)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2531)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:429)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:526)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:436)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:196)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:157)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
	... 365 common frames omitted
2026-02-20 14:35:05.786 [http-nio-8080-exec-7] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: ORDER_CREATED for user: eugene_6177
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).] [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; SQL [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]; constraint [chk_event_type]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy192.save(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy192.save(Unknown Source)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:62)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl$$SpringCGLIB$$0.logEvent(<generated>)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:92)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).] [insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:73)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
	at jdk.proxy2/jdk.proxy2.$Proxy186.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:664)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	... 317 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: new row for relation "security_audit_logs" violates check constraint "chk_event_type"
  Detail: Failing row contains (2, eugene_6177, ORDER_CREATED, null, null, 2026-02-20 14:35:05.236143, Order #29 created with 2 items, total amount: $199.98, t).
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2846)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2531)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:429)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:526)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:436)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:196)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:157)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
	... 365 common frames omitted
2026-02-20 14:35:05.789 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:05.789] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 14:35:05.789 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:05.789] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 14:35:05.818 [http-nio-8080-exec-7] ERROR org.hibernate.orm.core - HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.836 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - DB EXCEPTION in $Proxy214.findUserIdByOrderId with arguments: [29]
2026-02-20 14:35:05.836 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Database exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.836 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
org.hibernate.AssertionFailure: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:69)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:172)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:131)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:69)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:47)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1440)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:126)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:427)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:355)
	at org.hibernate.query.sqm.internal.SqmQueryImpl.doList(SqmQueryImpl.java:374)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:153)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResultOrNull(AbstractSelectionQuery.java:330)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:328)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:99)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:164)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:154)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:167)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at com.shopjoy.service.impl.OrderServiceImpl.getOrderById(OrderServiceImpl.java:121)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:102)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:35:05.866 [http-nio-8080-exec-7] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:05.866] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.867 [http-nio-8080-exec-7] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:35:05.867] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.868 [http-nio-8080-exec-7] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.createOrder(CreateOrderRequest) failed after 1.61s with exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.868 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:35:05.868] EXCEPTION in OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:05.868 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AssertionFailure
2026-02-20 14:35:05.868 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.868 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
org.hibernate.AssertionFailure: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:69)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:172)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:131)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:69)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:47)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1440)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:126)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:427)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:355)
	at org.hibernate.query.sqm.internal.SqmQueryImpl.doList(SqmQueryImpl.java:374)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:153)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResultOrNull(AbstractSelectionQuery.java:330)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:328)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:99)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:164)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:154)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:167)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at com.shopjoy.service.impl.OrderServiceImpl.getOrderById(OrderServiceImpl.java:121)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:102)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:35:05.898 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.createOrder(CreateOrderRequest) after 1.67s with exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.944 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@692866779 wrapping org.postgresql.jdbc.PgConnection@3af26d52] to 2
2026-02-20 14:35:05.965 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@3ca916c2]
2026-02-20 14:35:05.965 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
2026-02-20 14:35:05.965 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
org.hibernate.AssertionFailure: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:69)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:172)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:131)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:69)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:47)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1440)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:126)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:427)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:355)
	at org.hibernate.query.sqm.internal.SqmQueryImpl.doList(SqmQueryImpl.java:374)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:153)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResultOrNull(AbstractSelectionQuery.java:330)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:328)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:99)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:164)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:154)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:167)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at com.shopjoy.service.impl.OrderServiceImpl.getOrderById(OrderServiceImpl.java:121)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:102)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:35:05.970 [http-nio-8080-exec-7] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.AssertionFailure: Entry for instance of 'com.shopjoy.entity.SecurityAuditLog' has a null identifier (this can happen if the session is flushed after an exception occurs)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:69)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:172)
	at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:131)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:69)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:47)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1440)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:126)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:427)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:355)
	at org.hibernate.query.sqm.internal.SqmQueryImpl.doList(SqmQueryImpl.java:374)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:153)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResultOrNull(AbstractSelectionQuery.java:330)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:328)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:99)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:164)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:154)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:167)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorDatabasePerformance(PerformanceAspect.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
	at jdk.proxy2/jdk.proxy2.$Proxy214.findUserIdByOrderId(Unknown Source)
	at com.shopjoy.service.impl.OrderServiceImpl.getOrderById(OrderServiceImpl.java:121)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:102)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:246)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:232)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:73)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:125)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:245)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:45:44.449 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 14:45:44.515 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 14:45:44.541 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:45:44.548 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 14:45:44.576 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 14:46:32.780 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 1492 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 14:46:32.785 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 14:46:32.812 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 14:46:35.311 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 14:46:41.953 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 14:46:42.865 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 882 ms. Found 10 JPA repository interfaces.
2026-02-20 14:46:48.971 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 14:46:49.000 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 14:46:49.004 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 14:46:49.005 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 14:46:49.230 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 16059 ms
2026-02-20 14:46:51.425 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 14:46:51.807 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 14:46:53.916 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 14:46:54.034 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 14:46:54.671 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2d2697a8
2026-02-20 14:46:54.674 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 14:46:54.886 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 14:47:00.408 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 14:47:00.673 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 14:47:03.035 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 14:47:08.679 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 14:47:09.638 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 14:47:24.794 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 14:47:25.505 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 14:47:25.840 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 14:47:31.433 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 14:47:31.800 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 14:47:31.843 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 14:47:31.897 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 64.908 seconds (process running for 69.652)
2026-02-20 14:47:31.947 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:31.947] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-20 14:47:31.948 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-20 14:47:31.951 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:31.951] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-20 14:47:32.184 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 14:47:32.203 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@143840333 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:32.210 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:32.209] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 14:47:32.220 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:32.220] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:47:32.579 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 14:47:32.621 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:32.621] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 14:47:32.621 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:32.621] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 14:47:32.633 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@143840333 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:32.634 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 14:47:32.635 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 14:47:38.161 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 14:47:38.161 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 14:47:38.165 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-02-20 14:47:38.275 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:38.268] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g]
2026-02-20 14:47:38.275 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:38.275] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:38.561 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1431362689 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:38.561 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:38.561] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:47:38.563 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:38.563] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:38.576 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:38.638 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:38.638] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:38.639 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:38.639] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:38.640 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1431362689 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:38.648 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:47:39.070 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@448ceaf2]
2026-02-20 14:47:39.075 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1578170754 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] to 8
2026-02-20 14:47:39.076 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@448ceaf2]
2026-02-20 14:47:39.076 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.076] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@448ceaf2]
2026-02-20 14:47:39.080 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.080] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@448ceaf2]
2026-02-20 14:47:39.080 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.080] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:47:39.082 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.082] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:47:39.088 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.088] ENTERING: UserServiceImpl.getUserById with arguments: [24]
2026-02-20 14:47:39.091 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.091] TRANSACTION START: UserServiceImpl.getUserById(Integer)
2026-02-20 14:47:39.140 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:47:39.147 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.147] TRANSACTION COMMIT: UserServiceImpl.getUserById(Integer)
2026-02-20 14:47:39.148 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.147] EXITING: UserServiceImpl.getUserById returned: UserResponse
2026-02-20 14:47:39.152 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.152] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[43, 44]]
2026-02-20 14:47:39.156 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.156] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:47:39.161 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:39.195 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:39.204 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:39.208 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.208] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:47:39.209 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.209] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:47:39.212 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.212] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [43, 1]
2026-02-20 14:47:39.215 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.215] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:47:39.251 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:39.256 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.256] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:47:39.256 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.256] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:47:39.258 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.258] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [44, 1]
2026-02-20 14:47:39.258 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.258] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:47:39.261 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:39.264 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.264] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 14:47:39.265 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.264] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 14:47:39.267 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.267] ENTERING: InventoryServiceImpl.reserveStock with arguments: [43, 1]
2026-02-20 14:47:39.268 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.268] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.268 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.268] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.275 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:39.285 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.285] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.285 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.285] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.286 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.286] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 14:47:39.295 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.295] ENTERING: InventoryServiceImpl.reserveStock with arguments: [44, 1]
2026-02-20 14:47:39.295 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.295] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.297 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.297] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.338 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 14:47:39.349 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:39.352 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.352] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.352 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.352] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 14:47:39.353 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.353] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 14:47:39.371 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into orders (created_at,notes,order_date,payment_method,payment_status,shipping_address,status,total_amount,updated_at,user_id) values (?,?,?,?,?,?,?,?,?,?)
2026-02-20 14:47:39.404 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 14:47:39.416 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 14:47:39.431 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.431] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, ORDER_CREATED, Order #30 created with 2 items, total amount: $199.98, true]
2026-02-20 14:47:39.436 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 14:47:39.436 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.436] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 14:47:39.441 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.441] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:47:39.442 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.442] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 14:47:39.442 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.442] EXITING: OrderServiceImpl.createOrder returned: OrderResponse
2026-02-20 14:47:39.443 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.createOrder(CreateOrderRequest) in 367ms
2026-02-20 14:47:39.443 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 14:47:39.446 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 14:47:39.449 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_CREATED for user: eugene_6177
2026-02-20 14:47:39.450 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.450] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 14:47:39.450 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.450] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 14:47:39.455 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1578170754 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] to 2
2026-02-20 14:47:39.468 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.createOrder responded in 397ms
2026-02-20 14:47:39.468 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.createOrder returned: ResponseEntity
2026-02-20 14:47:39.646 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.646] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g]
2026-02-20 14:47:39.647 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.647] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:39.651 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@943350876 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:39.652 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.652] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:47:39.652 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.652] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.653 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:39.656 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.656] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.657 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.657] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:39.658 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@943350876 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:39.662 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:47:39.670 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.clearCart with arguments: [24]
2026-02-20 14:47:39.670 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.670] ENTERING: CartServiceImpl.clearCart with arguments: [24]
2026-02-20 14:47:39.673 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.672] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 14:47:39.674 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.674] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 14:47:39.690 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:47:39.716 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:39.743 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.742] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 14:47:39.743 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.743] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 14:47:39.743 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.743] EXITING: CartServiceImpl.clearCart returned: void
2026-02-20 14:47:39.747 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-20 14:47:39.752 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-20 14:47:39.754 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.clearCart responded in 84ms
2026-02-20 14:47:39.756 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.clearCart returned: ResponseEntity
2026-02-20 14:47:39.773 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.772] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g]
2026-02-20 14:47:39.773 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.772] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g]
2026-02-20 14:47:39.773 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.773] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:39.773 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.773] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:39.776 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@369707433 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:39.777 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1591772257 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:39.777 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.777] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:47:39.777 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.777] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:47:39.777 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.777] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.777 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.777] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.779 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:39.779 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:39.782 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.782] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.783 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.783] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:39.784 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1591772257 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:39.787 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:47:39.791 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.791] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:39.792 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.792] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:39.794 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@369707433 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:39.798 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:47:39.802 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 14:47:39.803 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1923269375 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:39.803 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.803] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 14:47:39.804 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.804] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:47:39.804 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 14:47:39.807 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@688527188 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:39.807 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.807] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 14:47:39.808 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.808] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:47:39.808 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:47:39.809 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 14:47:39.815 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.815] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 14:47:39.815 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.815] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 14:47:39.816 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@688527188 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:39.817 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 10ms
2026-02-20 14:47:39.817 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 14:47:39.828 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:39.828] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 14:47:39.828 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:39.828] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 14:47:39.829 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1923269375 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:39.829 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 26ms
2026-02-20 14:47:39.829 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 14:47:41.651 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:41.651] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTU5ODA3OSwiZXhwIjoxNzcxNjg0NDc5fQ.a4zfhxdRdMXCLoWRQSzUd_mFRIGhlfGqhn3smse6X25p6GuU5HWHXrho3aun9HDFdQZi9lHhS7TkQMlpp2xv-g]
2026-02-20 14:47:41.651 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:41.651] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:41.654 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1079624590 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:41.655 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:41.655] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 14:47:41.655 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:41.655] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:41.656 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:41.659 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:41.659] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:41.659 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:41.659] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:41.660 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1079624590 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:41.665 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 14:47:41.947 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@966676666 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:41.948 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:41.948] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-20 14:47:41.958 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:41.957] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:47:42.006 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:47:42.021 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:42.033 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:42.038 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:42.040 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 14:47:42.043 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:42.047 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:42.050 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:42.052 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:42.052] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:47:42.052 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:42.052] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:47:42.053 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@966676666 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:53.478 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@720f905b, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@72796ba]]
2026-02-20 14:47:53.485 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@376312197 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:53.486 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:53.486] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@720f905b]
2026-02-20 14:47:53.538 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:53.538] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 14:47:54.002 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.002] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:47:54.002 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.002] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.003 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:54.010 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.009] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.010 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.010] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:54.458 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.458] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 14:47:54.459 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.459] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 14:47:54.461 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@376312197 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:54.465 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 986ms
2026-02-20 14:47:54.482 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 14:47:54.486 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.486] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_SUCCESS, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@72796ba], User logged in successfully, true]
2026-02-20 14:47:54.486 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.486] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:47:54.491 [task-2] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGIN_SUCCESS for user: admin
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:47:54.497 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.496] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:47:54.497 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.497] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 14:47:54.538 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.538] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:47:54.539 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.539] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:54.547 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1383549171 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:54.547 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.547] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:47:54.547 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.547] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.548 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:54.548 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.548] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:47:54.550 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.550] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:54.552 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1988386923 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:54.552 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.552] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:47:54.553 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.553] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.553 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.553] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.553 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.553] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:54.553 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1383549171 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:54.553 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:54.560 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.560] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.560 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:47:54.569 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.569] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:54.570 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1988386923 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:54.571 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:47:54.572 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:47:54.572 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:47:54.576 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:47:54.627 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.627] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:47:54.627 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.627] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:47:54.636 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2085258784 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:54.636 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.636] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 14:47:54.639 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.639] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 14:47:54.641 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1519597966 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:47:54.642 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.642] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:47:54.642 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.642] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.643 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:47:54.647 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.647] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:47:54.648 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.648] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:47:54.648 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1519597966 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:47:54.651 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:47:54.655 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:47:54.656 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:47:54.656 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:47:54.702 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 14:47:54.792 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.789] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 14:47:54.793 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.793] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 14:47:54.794 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2085258784 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:54.840 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1784276851 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:54.841 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:54.841] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 14:47:54.842 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:54.842] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:47:55.000 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 14:47:55.019 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.027 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.031 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.033 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.035 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.037 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.040 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.043 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.046 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.048 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.051 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.053 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.056 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.058 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.061 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.063 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.066 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.068 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.070 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.072 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:47:55.087 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:47:55.091 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:47:55.099 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.099] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:47:55.099 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.099] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:47:55.100 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1784276851 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:55.184 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@37026341 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:55.185 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.185] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 14:47:55.185 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.185] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:47:55.212 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:47:55.254 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 14:47:55.257 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.267 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:55.272 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.275 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 14:47:55.280 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.282 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.286 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.288 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.290 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.294 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.298 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:55.302 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.303 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.307 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.310 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.315 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.316 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.318 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.320 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.323 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.326 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.330 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:55.334 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:47:55.336 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.338 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.341 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.343 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:55.348 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.349 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.351 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.354 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.355 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.357 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.359 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.362 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.363 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.366 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.368 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.370 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:55.372 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:55.374 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.376 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:47:55.379 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.379] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:47:55.379 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.379] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:47:55.380 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@37026341 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:55.405 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1376259123 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:55.406 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.406] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-20 14:47:55.406 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.406] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-20 14:47:55.468 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-20 14:47:55.475 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:47:55.482 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.482] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-20 14:47:55.483 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.483] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-20 14:47:55.483 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1376259123 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:55.491 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@236908614 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:55.492 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.492] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-20 14:47:55.495 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.495] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 14:47:55.504 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-20 14:47:55.508 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.508] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 14:47:55.510 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.510] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-20 14:47:55.511 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@236908614 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:55.529 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@400091301 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:55.529 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:55.529] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26, 18]]
2026-02-20 14:47:55.529 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:55.529] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-20 14:47:55.549 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?,?)
2026-02-20 14:47:57.250 [http-nio-8080-exec-5] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW DATABASE QUERY: $Proxy189.findAllById took 1.72s
2026-02-20 14:47:57.251 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:57.251] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-20 14:47:57.252 [http-nio-8080-exec-5] WARN  c.shopjoy.aspect.PerformanceAspect - SLOW SERVICE METHOD: UserServiceImpl.getUsersByIds took 1.72s
2026-02-20 14:47:57.252 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:57.252] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-20 14:47:57.253 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@400091301 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:47:57.276 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1498316106 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:47:57.276 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:57.276] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 14:47:57.277 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:57.277] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:47:57.278 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.281 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.283 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.286 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.290 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.296 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.299 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.301 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.302 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.306 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.310 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.314 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.317 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.320 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.322 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.325 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.328 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.330 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.335 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.338 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.342 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.346 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.348 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.351 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:47:57.353 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:47:57.361 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:47:57.361] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:47:57.362 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:47:57.362] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:47:57.363 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1498316106 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:05.128 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.128] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:05.128 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.128] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:05.130 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.130] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:05.130 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.130] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:05.131 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1996465124 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:05.132 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.132] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:05.132 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.132] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.133 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:05.133 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@692107111 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:05.134 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.134] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:05.134 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.134] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.135 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:05.136 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.136] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.136 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.136] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:05.137 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1996465124 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:05.138 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.138] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.138 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.138] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:05.139 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@692107111 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:05.140 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:05.141 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:05.144 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:48:05.144 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-20 14:48:05.144 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:48:05.154 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.154] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:05.154 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.154] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:05.156 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@165010526 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:05.156 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.156] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:05.157 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.157] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.157 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1993505656 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:05.157 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.157] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 14:48:05.157 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.157] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 14:48:05.158 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:05.159 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 14:48:05.160 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.160] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:05.160 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.160] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:05.161 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@165010526 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:05.163 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:05.165 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.165] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 14:48:05.165 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.165] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 14:48:05.166 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1993505656 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:05.167 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:48:05.168 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:48:05.168 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:48:05.172 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1941979470 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:05.172 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.172] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 14:48:05.174 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.174] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:48:05.176 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 14:48:05.178 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.180 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.182 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.184 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.186 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.188 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.190 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.191 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.193 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.195 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.196 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.199 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.201 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.203 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.206 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.208 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.209 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.211 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.213 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.215 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:05.221 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:48:05.223 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:48:05.224 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.224] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:48:05.226 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.226] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:48:05.227 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1941979470 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:05.278 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@172389686 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:05.279 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.279] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 14:48:05.279 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.279] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:48:05.280 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.283 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.285 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.287 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.289 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.291 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.294 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.295 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.299 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.302 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.304 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.305 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.307 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.309 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.311 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.314 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.316 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.319 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.321 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.323 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.326 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.327 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.329 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.332 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:05.334 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:05.336 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:05.336] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:48:05.336 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:05.336] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:48:05.337 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@172389686 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:10.974 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:10.974] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:10.975 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:10.975] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:10.977 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@173617621 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:10.977 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:10.977] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:10.977 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:10.977] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:10.978 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:10.980 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:10.980] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:10.981 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:10.981] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:10.981 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@173617621 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:10.983 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:10.993 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1622439398 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:10.993 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:10.993] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 14:48:10.994 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:10.994] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:48:10.997 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 14:48:11.003 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 14:48:11.005 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.008 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:48:11.012 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.015 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 14:48:11.017 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.019 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.021 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.022 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.026 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.029 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.031 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:48:11.033 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.035 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.037 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.039 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.042 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.043 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.044 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.046 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.048 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.049 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.052 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:48:11.055 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:48:11.057 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.060 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.061 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.063 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:48:11.065 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.067 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.069 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.070 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.072 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.074 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.077 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.079 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.080 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.082 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.083 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.086 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:11.087 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:11.088 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.093 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 14:48:11.094 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:11.094] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 14:48:11.094 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:11.094] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 14:48:11.096 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1622439398 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:14.373 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.372] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:14.373 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.373] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:14.374 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2083785079 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:14.376 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.376] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:14.376 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.376] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:14.377 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:14.378 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.378] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:14.379 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.379] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:14.380 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2083785079 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:14.383 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:14.402 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 14:48:14.405 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@646187134 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:14.405 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.405] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 14:48:14.406 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.405] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 14:48:14.431 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 14:48:14.441 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.441] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 14:48:14.441 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.441] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 14:48:14.442 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@646187134 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:14.445 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 43ms
2026-02-20 14:48:14.445 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 14:48:14.450 [http-nio-8080-exec-7] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 14:48:14.473 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.473] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:14.473 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.473] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:14.475 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@555037360 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:14.475 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.475] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:14.476 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.476] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:14.478 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:14.479 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.479] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:14.480 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.480] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:14.480 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@555037360 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:14.482 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:14.487 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 14:48:14.487 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@833939518 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:14.489 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.489] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 14:48:14.489 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.489] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 14:48:14.491 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 14:48:14.493 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:14.493] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 14:48:14.493 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:14.493] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 14:48:14.494 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@833939518 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:14.494 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 7ms
2026-02-20 14:48:14.494 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 14:48:19.553 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.553] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:19.553 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.553] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:19.554 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.554] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:19.554 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.554] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:19.555 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2109516053 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:19.555 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.555] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:19.556 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@958649035 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:19.556 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.556] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.556 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.556] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:19.557 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.557] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.558 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:19.561 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.561] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.561 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.561] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:19.562 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@958649035 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:19.566 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:19.567 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:19.574 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.574] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.574 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.574] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:19.575 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2109516053 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:19.577 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:19.580 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:48:19.581 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:48:19.581 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:48:19.581 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1486795065 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:19.582 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.582] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 14:48:19.583 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.582] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 14:48:19.586 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 14:48:19.589 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.589] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 14:48:19.590 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.590] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 14:48:19.590 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1486795065 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:19.595 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@242008695 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:19.595 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.595] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 14:48:19.596 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.596] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:48:19.598 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.598] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:48:19.598 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.598] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:48:19.600 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@853154458 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:48:19.600 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.600] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:48:19.601 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.601] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.601 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:48:19.604 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.604] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:48:19.604 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.604] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:48:19.604 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@853154458 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:48:19.607 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:48:19.609 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:48:19.612 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:48:19.613 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:48:19.638 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 14:48:19.640 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.643 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.648 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.650 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.653 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.657 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.658 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.661 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.662 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.665 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.666 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.668 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.669 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.671 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.672 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.673 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.675 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.677 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.681 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.683 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:48:19.690 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:48:19.692 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:48:19.695 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.695] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:48:19.696 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.696] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:48:19.696 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@242008695 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:48:19.739 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1710076390 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:48:19.739 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.739] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 14:48:19.740 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.740] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:48:19.740 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.743 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.744 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.747 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.749 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.751 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.753 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.755 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.756 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.758 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.760 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.762 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.764 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.766 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.768 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.769 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.772 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.773 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.774 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.776 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.778 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.780 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.782 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.783 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:48:19.785 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:48:19.787 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:48:19.787] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:48:19.787 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:48:19.787] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:48:19.788 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1710076390 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:48.911 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.911] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:48.912 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.912] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:48.919 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1812224910 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:48.919 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.919] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:48.921 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.921] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.921 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.921] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:48.921 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.921] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:48.922 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:48.923 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@609960303 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:48.924 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.924] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:48.924 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.924] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.925 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.925] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.925 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.925] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:48.925 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:48.926 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1812224910 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:48.926 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.926] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.927 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.927] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:48.927 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@609960303 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:48.928 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:48.930 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:48.934 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:50:48.934 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@386627452 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:48.935 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.935] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 14:50:48.935 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.935] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 14:50:48.938 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 14:50:48.941 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.941] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 14:50:48.941 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.941] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 14:50:48.942 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@386627452 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:48.943 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 9ms
2026-02-20 14:50:48.943 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:50:48.963 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 14:50:48.964 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.964] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:48.964 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.964] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:48.966 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@507781538 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:48.967 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.967] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:48.967 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.967] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.968 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:48.970 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:48.970] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:48.970 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.970] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:48.970 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@507781538 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:48.972 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:48.976 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:50:48.976 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 14:50:48.976 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:50:48.997 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.997] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:48.997 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:48.997] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:49.004 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1113569726 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:49.004 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.004] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:49.004 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.004] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:49.004 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.004] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:49.005 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.005] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.005 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:49.006 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1985201679 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:49.006 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.006] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:49.007 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.007] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.007 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.007] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.007 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.007] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:49.008 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1113569726 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:49.008 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:49.010 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.010] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.010 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.010] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:49.011 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1985201679 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:49.011 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:49.013 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:49.014 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:50:49.015 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 14:50:49.015 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:50:49.026 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@177644393 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:49.026 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.026] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:49.026 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.026] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:49.026 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.026] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 14:50:49.026 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.026] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 14:50:49.027 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2086234682 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:49.028 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.028] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:49.028 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.028] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.028 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 14:50:49.029 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:49.029 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.029] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.029 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.029] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:49.031 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2086234682 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:49.035 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:49.038 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 14:50:49.038 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-20 14:50:49.038 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 14:50:49.039 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.039] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 14:50:49.039 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.039] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 14:50:49.040 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@177644393 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:49.045 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@590120511 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:49.045 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.045] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 14:50:49.045 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.045] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.047 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 14:50:49.051 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.053 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.054 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.055 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@237274036 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:49.056 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.056] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@4e17380c, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 14:50:49.056 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.056 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.056] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.057 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.058 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.059 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.061 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.063 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.064 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.067 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.068 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.069 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.069 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:50:49.071 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.073 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.073 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.074 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.075 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.075 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.076 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.076 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.077 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.077 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.079 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.079 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.080 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.082 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.084 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.085 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.087 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.089 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.089 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:50:49.090 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.090 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:50:49.092 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.092] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.092 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.092] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:50:49.093 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@590120511 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:49.093 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:50:49.096 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:50:49.099 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.099] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.100 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.100] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:50:49.100 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@237274036 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:49.102 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 139ms
2026-02-20 14:50:49.102 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:50:49.112 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.112] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:49.113 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.113] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:49.114 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2143743172 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:49.114 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.114] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:49.115 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.115] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.116 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:49.116 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@156521363 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:49.117 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.117] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-20 14:50:49.118 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.118] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:49.118 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.118] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:49.118 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2143743172 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:49.118 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.118] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-20 14:50:49.120 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-20 14:50:49.121 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:49.123 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 14:50:49.125 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 14:50:49.126 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2000752462 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:49.126 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.126] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@58fb2460, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 14:50:49.126 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.126] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.127 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.126] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-20 14:50:49.127 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.127] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-20 14:50:49.128 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@156521363 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:49.128 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:50:49.130 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.131 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.133 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.134 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.136 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.138 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.139 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.140 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.141 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.142 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.143 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.144 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:49.144 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2043844864 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:49.145 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.145] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 14:50:49.145 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.145] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:50:49.146 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.147 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.150 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:50:49.152 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:50:49.152 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.154 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.155 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.154] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:49.155 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.155] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:50:49.155 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2000752462 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:49.156 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 31ms
2026-02-20 14:50:49.156 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:50:49.157 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.159 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.161 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.163 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.167 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.169 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.171 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.172 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.175 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.177 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.179 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.180 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.183 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.186 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.187 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.190 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.192 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.193 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.197 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.200 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 14:50:49.201 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 14:50:49.203 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:49.203] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 14:50:49.204 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:49.204] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 14:50:49.204 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2043844864 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:52.621 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.621] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:52.621 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.621] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 14:50:52.623 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1192365857 wrapping org.postgresql.jdbc.PgConnection@1236cfb0] read-only
2026-02-20 14:50:52.623 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.623] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 14:50:52.623 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:52.623] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:52.624 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 14:50:52.626 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:52.626] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 14:50:52.626 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.626] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 14:50:52.627 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1192365857 wrapping org.postgresql.jdbc.PgConnection@1236cfb0]
2026-02-20 14:50:52.629 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 14:50:52.632 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6a502efe]]
2026-02-20 14:50:52.632 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.632] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNTk4ODc0LCJleHAiOjE3NzE2ODUyNzR9.A4TcRxStDoeeQ0K1dV9-1gnh-a39HS0DkUzXhHRPT1PbTXdNCrWfOLelMoizntLpP3W_rYh4faRv0yrxm4PXHw]
2026-02-20 14:50:52.634 [http-nio-8080-exec-2] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 1
2026-02-20 14:50:52.634 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.634] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-20 14:50:52.635 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.logout responded in 3ms
2026-02-20 14:50:52.635 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-20 14:50:52.691 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.691] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGOUT, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6a502efe], User logged out successfully, true]
2026-02-20 14:50:52.691 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:52.691] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:50:52.691 [task-3] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGOUT for user: admin
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 14:50:52.692 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:52.691] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 14:50:52.692 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:52.692] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 14:50:58.983 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 14:50:58.985 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2121929235 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:58.986 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:58.986] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@5f0901d5, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 14:50:58.986 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:58.986] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:58.988 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:50:58.991 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:58.993 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:58.994 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:50:58.994 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 14:50:58.994 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:50:58.995 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:58.996 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:58.997 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:58.999 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.001 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.002 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.005 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 14:50:59.005 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.007 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 2ms
2026-02-20 14:50:59.007 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 14:50:59.008 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.009 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.011 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.015 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:50:59.017 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:50:59.019 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:59.019] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:59.019 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:59.019] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:50:59.021 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2121929235 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:59.022 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 38ms
2026-02-20 14:50:59.022 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:50:59.032 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 12, productName, ASC]
2026-02-20 14:50:59.033 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1188296543 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:50:59.033 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:59.033] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@1052e53c, Page request [number: 0, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 14:50:59.034 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:59.034] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:59.035 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 14:50:59.040 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.042 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.044 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.046 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.047 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.049 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.051 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.052 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.056 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.058 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.059 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.062 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:50:59.065 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:50:59.067 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:50:59.069 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:50:59.069] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:50:59.071 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:50:59.071] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:50:59.072 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1188296543 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:50:59.073 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 41ms
2026-02-20 14:50:59.073 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 14:51:05.318 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 1, 12, productName, ASC]
2026-02-20 14:51:05.319 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2073430127 wrapping org.postgresql.jdbc.PgConnection@2d2697a8] read-only
2026-02-20 14:51:05.319 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:51:05.319] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@7921e768, Page request [number: 1, size 12, sort: productName: ASC], productName, ASC]
2026-02-20 14:51:05.319 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:51:05.319] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:51:05.323 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name offset ? rows fetch first ? rows only
2026-02-20 14:51:05.326 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.327 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.333 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.335 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.336 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.337 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.338 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.341 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.342 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.343 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.344 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.347 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 14:51:05.351 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 14:51:05.353 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 14:51:05.355 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 14:51:05.355] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 14:51:05.355 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 14:51:05.355] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 14:51:05.356 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2073430127 wrapping org.postgresql.jdbc.PgConnection@2d2697a8]
2026-02-20 14:51:05.356 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 38ms
2026-02-20 14:51:05.356 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 15:18:10.057 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 15:18:10.336 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 15:18:10.359 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:18:10.364 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 15:18:10.383 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 15:19:54.604 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 12864 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 15:19:54.609 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 15:19:54.610 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 15:19:55.486 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 15:20:00.200 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 15:20:01.001 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 772 ms. Found 10 JPA repository interfaces.
2026-02-20 15:20:08.272 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 15:20:08.345 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 15:20:08.350 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 15:20:08.351 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 15:20:08.671 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13826 ms
2026-02-20 15:20:10.911 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 15:20:11.281 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 15:20:12.613 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 15:20:12.698 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 15:20:13.238 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3b4cce5a
2026-02-20 15:20:13.244 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 15:20:13.747 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 15:20:18.161 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 15:20:18.341 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:20:19.954 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 15:20:24.366 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 15:20:25.244 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 15:20:41.346 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 15:20:43.028 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 15:20:43.265 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 15:20:47.915 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 15:20:48.468 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 15:20:48.544 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 15:20:48.618 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 56.989 seconds (process running for 58.675)
2026-02-20 15:20:48.674 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:20:48.674] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-20 15:20:48.676 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-20 15:20:48.678 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:20:48.678] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-20 15:20:48.991 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 15:20:49.025 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1740042977 wrapping org.postgresql.jdbc.PgConnection@3b4cce5a] read-only
2026-02-20 15:20:49.036 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:20:49.036] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 15:20:49.129 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:20:49.129] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:20:49.428 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 15:20:49.468 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:20:49.468] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:20:49.470 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:20:49.470] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 15:20:49.477 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1740042977 wrapping org.postgresql.jdbc.PgConnection@3b4cce5a]
2026-02-20 15:20:49.477 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 15:20:49.479 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 15:41:36.266 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 15:41:36.271 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 15:41:36.275 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-02-20 15:41:36.674 [http-nio-8080-exec-7] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [135] milliseconds.
2026-02-20 15:41:41.340 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 15:41:41.746 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 15:41:41.768 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:41:41.773 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 15:41:41.800 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 15:42:32.441 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 5080 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 15:42:32.445 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 15:42:32.447 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 15:42:33.902 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 15:42:38.814 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 15:42:39.599 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 761 ms. Found 10 JPA repository interfaces.
2026-02-20 15:42:45.904 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 15:42:45.944 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 15:42:45.949 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 15:42:45.949 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 15:42:46.405 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13774 ms
2026-02-20 15:42:48.655 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 15:42:48.828 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 15:42:50.323 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 15:42:50.452 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 15:42:51.195 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4faccb34
2026-02-20 15:42:51.200 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 15:42:51.569 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 15:42:56.537 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 15:42:56.809 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:42:57.874 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 15:43:03.230 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 15:43:04.195 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 15:43:27.720 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 15:43:28.609 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 15:43:28.710 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 15:43:32.450 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 15:43:32.712 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 15:43:32.746 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 15:43:32.782 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 62.531 seconds (process running for 64.646)
2026-02-20 15:43:32.820 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:43:32.819] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-20 15:43:32.821 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-20 15:43:32.823 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:43:32.823] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-20 15:43:33.082 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 15:43:33.097 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1437634557 wrapping org.postgresql.jdbc.PgConnection@4faccb34] read-only
2026-02-20 15:43:33.102 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:43:33.102] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 15:43:33.113 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:43:33.113] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:43:33.375 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 15:43:33.429 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:43:33.429] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:43:33.431 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:43:33.431] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 15:43:33.438 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1437634557 wrapping org.postgresql.jdbc.PgConnection@4faccb34]
2026-02-20 15:43:33.439 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 15:43:33.441 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 15:43:57.247 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 15:43:57.248 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 15:43:57.252 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-20 15:47:38.348 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 15:47:38.523 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 15:47:38.544 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:47:38.549 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 15:47:38.590 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 15:48:26.426 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 20452 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 15:48:26.432 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 15:48:26.433 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 15:48:27.686 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 15:48:32.637 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 15:48:33.385 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 716 ms. Found 10 JPA repository interfaces.
2026-02-20 15:48:37.512 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 15:48:37.559 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 15:48:37.563 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 15:48:37.564 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 15:48:37.830 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 11238 ms
2026-02-20 15:48:40.526 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 15:48:40.661 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 15:48:41.975 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 15:48:42.056 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 15:48:42.588 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@335cd031
2026-02-20 15:48:42.591 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 15:48:42.807 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 15:48:46.454 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 15:48:46.623 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 15:48:47.829 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 15:48:51.579 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 15:48:52.450 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 15:49:02.975 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 15:49:03.565 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 15:49:03.693 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 15:49:06.747 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 15:49:06.990 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 15:49:07.015 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 15:49:07.050 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 42.54 seconds (process running for 44.854)
2026-02-20 15:49:07.107 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:07.107] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-20 15:49:07.108 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-20 15:49:07.109 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:07.109] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-20 15:49:07.252 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 15:49:07.265 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@637846044 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:49:07.271 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:07.271] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 15:49:07.281 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:07.281] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:49:07.515 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 15:49:07.551 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:07.550] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 15:49:07.552 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:07.552] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 15:49:07.558 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@637846044 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:49:07.559 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 15:49:07.560 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 15:49:16.251 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 15:49:16.251 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 15:49:16.254 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-20 15:49:34.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@93b9337, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@30fb0e62]]
2026-02-20 15:49:34.994 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@358946531 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:49:34.995 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:34.995] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@93b9337]
2026-02-20 15:49:34.995 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:34.995] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 15:49:35.212 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:35.212] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [jane_smith]
2026-02-20 15:49:35.222 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:35.221] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:49:35.237 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 15:49:35.297 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:35.297] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:49:35.302 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:35.302] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 15:49:35.723 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:35.723] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 15:49:35.723 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:35.723] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 15:49:35.725 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@358946531 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:49:35.733 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 740ms
2026-02-20 15:49:35.733 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 15:49:35.734 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:35.734] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [jane_smith, LOGIN_SUCCESS, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@30fb0e62], User logged in successfully, true]
2026-02-20 15:49:35.735 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:35.735] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:49:35.797 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 15:49:35.824 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: jane_smith
2026-02-20 15:49:35.825 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:49:35.825] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:49:35.826 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:49:35.826] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 15:50:07.769 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:07.769] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjMsInN1YiI6ImphbmVfc21pdGgiLCJpYXQiOjE3NzE2MDI1NzUsImV4cCI6MTc3MTY4ODk3NX0.lb4T6KWH8M9zmhXDCNme0L177olDj-ycaoawUd0oKDOa1oI80pboK3imHWtrxLf8nwWRoPhsJDDAYYL_nWfB4]
2026-02-20 15:50:07.769 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:07.769] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:50:07.867 [http-nio-8080-exec-2] WARN  c.s.config.JwtAuthenticationFilter - Invalid JWT token: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2026-02-20 15:50:07.897 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:07.896] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [null, ***REDACTED***, org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6b8be27f, ***REDACTED***, false]
2026-02-20 15:50:07.897 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:50:07.897] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:50:07.897 [task-2] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: TOKEN_INVALID for user: null
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 15:50:07.902 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:50:07.902] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:50:07.903 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:07.903] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 15:50:54.809 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:54.809] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjMsInN1YiI6ImphbmVfc21pdGgiLCJpYXQiOjE3NzE2MDI1NzUsImV4cCI6MTc3MTY4ODk3NX0.lb4T6KWH8M9zmhXDCNme0L177olDj-ycaoawUd0oKDOa1oI80pboK3imHWtrxLf8nwWRoPhsJDDAYYL_nWfB4A]
2026-02-20 15:50:54.809 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:54.809] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:50:54.822 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2136820121 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:50:54.823 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:54.823] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [jane_smith]
2026-02-20 15:50:54.823 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:50:54.823] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:50:54.826 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 15:50:54.829 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:50:54.829] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:50:54.829 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:50:54.829] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 15:50:54.830 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2136820121 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:50:54.835 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: jane_smith
2026-02-20 15:50:54.854 [http-nio-8080-exec-5] WARN  c.s.exception.GlobalExceptionHandler - Resource not found: /api/demo/crsf-token
2026-02-20 15:51:22.470 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:51:22.470] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjMsInN1YiI6ImphbmVfc21pdGgiLCJpYXQiOjE3NzE2MDI1NzUsImV4cCI6MTc3MTY4ODk3NX0.lb4T6KWH8M9zmhXDCNme0L177olDj-ycaoawUd0oKDOa1oI80pboK3imHWtrxLf8nwWRoPhsJDDAYYL_nWfB4A]
2026-02-20 15:51:22.470 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:51:22.470] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:51:22.479 [http-nio-8080-exec-6] WARN  c.s.exception.GlobalExceptionHandler - Resource not found: /demo/crsf-token
2026-02-20 15:51:50.590 [http-nio-8080-exec-9] WARN  c.s.exception.GlobalExceptionHandler - Resource not found: /demo/crsf-token
2026-02-20 15:52:09.572 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:52:09.572] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjMsInN1YiI6ImphbmVfc21pdGgiLCJpYXQiOjE3NzE2MDI1NzUsImV4cCI6MTc3MTY4ODk3NX0.lb4T6KWH8M9zmhXDCNme0L177olDj-ycaoawUd0oKDOa1oI80pboK3imHWtrxLf8nwWRoPhsJDDAYYL_nWfB4A]
2026-02-20 15:52:09.572 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:52:09.572] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:52:09.576 [http-nio-8080-exec-10] ERROR c.s.exception.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:260)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:434)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:376)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:116)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:544)
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1157)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:951)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:892)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:141)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:118)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 15:55:28.122 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CsrfDemoController.getCsrfToken with arguments: [***REDACTED***]
2026-02-20 15:55:28.122 [http-nio-8080-exec-6] DEBUG c.s.controller.CsrfDemoController - CSRF token requested - Header: X-XSRF-TOKEN, Parameter: _csrf
2026-02-20 15:55:28.123 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CsrfDemoController.getCsrfToken responded in 0ms
2026-02-20 15:55:28.123 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CsrfDemoController.getCsrfToken returned: ResponseEntity
2026-02-20 15:56:35.947 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CsrfDemoController.submitForm with arguments: [CsrfDemoController.FormSubmissionRequest(name=Test User, message=Testing CSRF protection)]
2026-02-20 15:56:35.948 [http-nio-8080-exec-4] INFO  c.s.controller.CsrfDemoController - Form submitted successfully with CSRF protection - Name: Test User, Message: Testing CSRF protection
2026-02-20 15:56:35.950 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CsrfDemoController.submitForm responded in 3ms
2026-02-20 15:56:35.951 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CsrfDemoController.submitForm returned: ResponseEntity
2026-02-20 15:59:20.077 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:20.077] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 15:59:20.081 [http-nio-8080-exec-8] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 15:59:20.081 [http-nio-8080-exec-8] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 15:59:20.087 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 15:59:20.094 [http-nio-8080-exec-8] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 15:59:20.095 [http-nio-8080-exec-8] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwMzE2MCwiZXhwIjoxNzcxNjg5NTYwfQ.ErHqZsFvf5enjERsyxgw8W4p1xDLeLt1AIlcnvtTTdpDL5T3OKmM-TlAIXUt3sqsxN0wiuRWps2SGF2BhiS_EQ&provider=google
2026-02-20 15:59:20.096 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:20.096] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 15:59:20.104 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:20.104] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, LOGIN_SUCCESS, org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2ca183df, ***REDACTED***, true]
2026-02-20 15:59:20.105 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:20.105] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:59:20.105 [task-3] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGIN_SUCCESS for user: eugene_6177
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 15:59:20.108 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:20.108] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:59:20.109 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:20.109] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 15:59:30.786 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:30.786] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwMzE2MCwiZXhwIjoxNzcxNjg5NTYwfQ.ErHqZsFvf5enjERsyxgw8W4p1xDLeLt1AIlcnvtTTdpDL5T3OKmM-TlAIXUt3sqsxN0wiuRWps2SGF2BhiS_EQ]
2026-02-20 15:59:30.787 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:30.787] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:59:30.789 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@531532752 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:30.790 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:30.790] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 15:59:30.790 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:30.790] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:59:30.792 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 15:59:30.795 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:30.795] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:59:30.795 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:30.795] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 15:59:30.796 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@531532752 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:30.800 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 15:59:31.253 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@710866155 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:31.253 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.253] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 15:59:31.259 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.259] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 15:59:31.320 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 15:59:31.370 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 15:59:31.399 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 15:59:31.504 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 15:59:31.511 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 15:59:31.515 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 15:59:31.518 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 15:59:31.523 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 15:59:31.525 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.525] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 15:59:31.525 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.525] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 15:59:31.527 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@710866155 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:31.578 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1535272001 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:31.579 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.579] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 15:59:31.584 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.584] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 15:59:31.592 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 15:59:31.606 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.606] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 15:59:31.607 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.607] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 15:59:31.608 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1535272001 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:31.618 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@657969774 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:31.618 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.618] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-20 15:59:31.621 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.621] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 15:59:31.626 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 15:59:31.640 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 15:59:31.643 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 15:59:31.647 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.647] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 15:59:31.647 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.647] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 15:59:31.648 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@657969774 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:31.676 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@926219494 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:31.676 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.676] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 15:59:31.683 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.682] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 15:59:31.691 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 15:59:31.696 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 15:59:31.698 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:31.698] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 15:59:31.699 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:31.699] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 15:59:31.700 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@926219494 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:55.462 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.462] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwMzE2MCwiZXhwIjoxNzcxNjg5NTYwfQ.ErHqZsFvf5enjERsyxgw8W4p1xDLeLt1AIlcnvtTTdpDL5T3OKmM-TlAIXUt3sqsxN0wiuRWps2SGF2BhiS_EQ]
2026-02-20 15:59:55.462 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.462] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 15:59:55.467 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@435021080 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 15:59:55.467 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.467] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 15:59:55.467 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:55.467] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:59:55.469 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 15:59:55.473 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:55.473] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 15:59:55.473 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.473] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 15:59:55.474 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@435021080 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 15:59:55.477 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 15:59:55.480 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@513087f1]]
2026-02-20 15:59:55.482 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.482] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwMzE2MCwiZXhwIjoxNzcxNjg5NTYwfQ.ErHqZsFvf5enjERsyxgw8W4p1xDLeLt1AIlcnvtTTdpDL5T3OKmM-TlAIXUt3sqsxN0wiuRWps2SGF2BhiS_EQ]
2026-02-20 15:59:55.484 [http-nio-8080-exec-6] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 1
2026-02-20 15:59:55.485 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.485] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-20 15:59:55.485 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.logout responded in 3ms
2026-02-20 15:59:55.485 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-20 15:59:55.509 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.509] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, LOGOUT, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@513087f1], User logged out successfully, true]
2026-02-20 15:59:55.509 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:55.509] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:59:55.509 [task-4] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGOUT for user: eugene_6177
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 15:59:55.542 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 15:59:55.542] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 15:59:55.542 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 15:59:55.542] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:37.141 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@322d180f, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5c6f9833]]
2026-02-20 16:00:37.143 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@188987412 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.144 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.144] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@322d180f]
2026-02-20 16:00:37.144 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.144] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:00:37.144 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.144] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:37.145 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.145] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.146 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:37.149 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.149] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.150 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.150] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:37.276 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.276] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:00:37.277 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.277] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 16:00:37.278 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@188987412 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:37.278 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 137ms
2026-02-20 16:00:37.278 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 16:00:37.286 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.286] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_SUCCESS, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5c6f9833], User logged in successfully, true]
2026-02-20 16:00:37.287 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.287] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 16:00:37.288 [task-5] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGIN_SUCCESS for user: admin
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:00:37.291 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.291] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 16:00:37.291 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.291] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:37.340 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.338] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:37.340 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.340] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:37.342 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@919813096 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.347 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.347] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:37.347 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.347] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.350 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:37.350 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.350] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:37.352 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.352] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:37.356 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.356] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.356 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.356] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:37.357 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@919813096 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:37.358 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1174516746 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.361 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.361] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:37.362 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.362] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.362 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:37.363 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:37.371 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.371] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.373 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.373] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:37.374 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1174516746 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:37.379 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:37.391 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:00:37.396 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 4ms
2026-02-20 16:00:37.398 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1476738573 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.398 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:00:37.398 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.398] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 16:00:37.408 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.408] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:37.408 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.408] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:37.413 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@370827917 wrapping org.postgresql.jdbc.PgConnection@34665cf3] read-only
2026-02-20 16:00:37.414 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.414] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:37.414 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.414] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.417 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:37.432 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.432] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:37.433 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.433] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:37.434 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@370827917 wrapping org.postgresql.jdbc.PgConnection@34665cf3]
2026-02-20 16:00:37.438 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:37.440 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:00:37.441 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 16:00:37.442 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:00:37.523 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.523] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 16:00:37.537 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 16:00:37.551 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.551] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 16:00:37.552 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.552] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 16:00:37.553 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1476738573 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:37.570 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@850647763 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.570 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.570] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 16:00:37.570 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.570] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:00:37.698 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 16:00:37.708 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.712 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.714 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.718 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.720 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.723 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.727 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.730 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.732 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.735 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.738 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.740 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.743 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.747 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.750 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.752 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.754 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.757 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.760 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.763 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:00:37.777 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:00:37.780 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:37.785 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.785] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:00:37.785 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.785] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:00:37.786 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@850647763 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:37.850 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@983900558 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:37.851 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:37.851] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:37.852 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:37.852] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:37.855 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:37.895 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:37.897 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.900 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:37.906 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.907 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:37.913 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.915 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.918 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.921 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.922 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.925 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.928 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:37.932 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.934 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.937 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.940 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.943 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.945 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.947 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.949 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.952 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.955 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.957 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:37.962 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:37.963 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.965 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.968 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.970 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:37.975 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.976 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.979 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.980 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.983 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.985 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.987 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.988 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.990 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:37.991 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:37.996 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:37.998 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.000 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.003 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:38.004 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:38.007 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.006] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:38.007 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.007] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:38.008 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@983900558 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:38.041 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1801077783 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:38.044 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.043] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-20 16:00:38.051 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.050] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-20 16:00:38.056 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-20 16:00:38.064 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:38.075 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.074] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-20 16:00:38.077 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.077] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-20 16:00:38.078 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1801077783 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:38.084 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1811968748 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:38.085 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.085] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-20 16:00:38.090 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.090] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 16:00:38.115 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-20 16:00:38.118 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.118] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 16:00:38.119 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.119] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-20 16:00:38.120 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1811968748 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:38.169 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@225946539 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:38.170 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.170] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26, 18]]
2026-02-20 16:00:38.174 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.174] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:00:38.214 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?,?)
2026-02-20 16:00:38.279 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.279] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:00:38.280 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.280] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-20 16:00:38.282 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@225946539 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:38.361 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@865282810 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:38.362 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.362] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 16:00:38.362 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.362] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:00:38.363 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.372 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.373 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.376 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.378 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.384 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.386 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.389 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.391 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.393 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.396 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.399 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.402 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.405 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.408 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.410 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.414 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.416 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.418 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.421 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.423 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.426 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.428 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:38.430 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:38.433 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:38.433] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:00:38.433 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:38.433] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:00:38.434 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@865282810 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:41.446 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.446] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:41.446 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.446] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:41.449 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1982735611 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:41.449 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.449] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:41.450 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:41.450] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:41.451 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:41.454 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:41.454] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:41.454 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.454] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:41.456 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1982735611 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:41.458 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:41.565 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1031199627 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:41.580 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.580] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:41.582 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:41.582] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:41.602 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:41.631 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:41.633 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.635 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:41.642 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.644 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:41.647 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.650 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.652 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.654 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.656 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.658 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.661 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:41.664 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.666 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.668 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.669 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.671 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.674 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.676 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.677 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.679 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.681 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.683 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:41.688 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:41.692 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.693 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.695 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.697 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:41.700 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.702 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.707 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.708 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.711 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.712 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.714 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.716 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.718 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.721 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.725 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.727 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:41.728 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:41.731 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.732 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:41.735 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:41.735] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:41.735 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:41.735] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:41.736 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1031199627 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:44.232 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.232] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:44.233 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.233] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:44.239 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1968588493 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:44.239 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.239] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:44.239 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.239] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:44.240 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:44.243 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.243] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:44.243 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.243] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:44.244 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1968588493 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:44.245 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:44.263 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.processPayment with arguments: [30, TXN-0R228456T]
2026-02-20 16:00:44.264 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.264] ENTERING: OrderServiceImpl.processPayment with arguments: [30, TXN-0R228456T]
2026-02-20 16:00:44.275 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.274] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-20 16:00:44.277 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.277] TRANSACTION START: OrderServiceImpl.processPayment(Integer, String)
2026-02-20 16:00:44.288 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:44.313 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:44.315 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:44.317 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:44.320 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:44.322 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.322] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-20 16:00:44.323 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.322] TRANSACTION COMMIT: OrderServiceImpl.processPayment(Integer, String)
2026-02-20 16:00:44.323 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.323] EXITING: OrderServiceImpl.processPayment returned: OrderResponse
2026-02-20 16:00:44.331 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.331] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #30 status changed from PENDING to PROCESSING, true]
2026-02-20 16:00:44.331 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.331] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:44.336 [task-6] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:44.341 [task-6] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:44.341 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.341] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:44.342 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.342] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:44.355 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:44.362 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.processPayment responded in 99ms
2026-02-20 16:00:44.363 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.processPayment returned: ResponseEntity
2026-02-20 16:00:44.390 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.390] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:44.390 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.390] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:44.391 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2013292454 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:44.392 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.392] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:44.392 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.392] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:44.394 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:44.395 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:44.395] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:44.395 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:44.395] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:44.396 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2013292454 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:44.398 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:48.416 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.416] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:48.416 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.416] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:48.420 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1076256013 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:48.420 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.420] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:48.420 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.420] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.421 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:48.423 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.423] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.424 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.424] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:48.424 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1076256013 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:48.427 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:48.439 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, PROCESSING]
2026-02-20 16:00:48.439 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.439] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [28, PROCESSING]
2026-02-20 16:00:48.441 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.441] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, PROCESSING]
2026-02-20 16:00:48.441 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.441] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:48.442 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.442] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:48.443 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:48.446 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.449 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.450 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.451 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:48.454 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.453] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:48.454 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.454] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:48.454 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.454] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-20 16:00:48.454 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 15ms
2026-02-20 16:00:48.456 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:48.461 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.461] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #28 status changed from PENDING to PROCESSING, true]
2026-02-20 16:00:48.466 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.466] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:48.466 [task-7] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:48.475 [task-7] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:48.475 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.475] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:48.475 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.475] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:48.484 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.484] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:48.484 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.484] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:48.485 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@312319734 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:48.486 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.486] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:48.486 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.486] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.487 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:48.489 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.489] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.490 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.490] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:48.490 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@312319734 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:48.492 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:48.502 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@92932482 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:48.502 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.502] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:48.502 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.502] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:48.505 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:48.512 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:48.514 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.516 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.519 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.520 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:48.522 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.523 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.526 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.528 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.530 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.532 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.534 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.536 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.538 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.540 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.541 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.542 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.546 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.548 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.550 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.552 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.554 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.556 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.558 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:48.560 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.562 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.564 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.566 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.568 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.570 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.571 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.572 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.574 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.576 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.578 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.581 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.583 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.585 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.586 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.588 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.590 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.592 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.593 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.595 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.595] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:48.596 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.596] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:48.597 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@92932482 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:48.883 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.883] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:48.883 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.883] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:48.884 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1203275018 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:48.886 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.886] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:48.886 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.886] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.887 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:48.888 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.888] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:48.889 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.889] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:48.890 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1203275018 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:48.892 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:48.902 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@992654898 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:48.902 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:48.902] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:48.902 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:48.902] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:48.905 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:48.913 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:48.915 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.916 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.919 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.920 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:48.923 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.924 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.926 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.928 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.931 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.933 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.936 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.938 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.940 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.942 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.945 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.948 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.951 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.953 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.957 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.959 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.960 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.963 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.965 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:48.967 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.970 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.971 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.973 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:48.975 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.977 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.979 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.981 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.982 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.984 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.986 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.987 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.989 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.991 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.992 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.994 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:48.995 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:48.997 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:48.998 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:49.003 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:49.002] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:49.003 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:49.003] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:49.004 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@992654898 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:50.485 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.485] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:50.485 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.485] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:50.486 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1565192117 wrapping org.postgresql.jdbc.PgConnection@34665cf3] read-only
2026-02-20 16:00:50.488 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.488] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:50.488 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.488] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.489 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:50.493 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.492] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.493 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.493] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:50.493 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1565192117 wrapping org.postgresql.jdbc.PgConnection@34665cf3]
2026-02-20 16:00:50.496 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:50.503 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, SHIPPED]
2026-02-20 16:00:50.503 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.503] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [28, SHIPPED]
2026-02-20 16:00:50.503 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.503] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, SHIPPED]
2026-02-20 16:00:50.503 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.503] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:50.503 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.503] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:50.504 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:50.517 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.523 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.526 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.526] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #28 status changed from PROCESSING to SHIPPED, true]
2026-02-20 16:00:50.605 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.605] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:50.606 [task-8] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:50.610 [task-8] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:50.611 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.611] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:50.611 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.611] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:50.624 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.630 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:50.632 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.632] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:50.633 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.633] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:50.633 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.633] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-20 16:00:50.633 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 130ms
2026-02-20 16:00:50.635 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:50.666 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.666] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:50.666 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.666] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:50.667 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1010855699 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:50.667 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.667] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:50.667 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.667] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.668 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:50.670 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.670] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.670 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.670] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:50.671 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1010855699 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:50.674 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:50.684 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1581059983 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:50.685 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.684] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:50.685 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.685] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:50.687 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:50.694 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:50.696 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.698 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:50.701 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.702 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:50.704 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.706 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.714 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.716 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.717 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.718 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.720 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:50.721 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.735 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.737 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.739 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.740 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.742 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.746 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.748 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.750 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.752 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.761 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:50.762 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:50.765 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.766 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.767 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.769 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:50.771 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.772 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.773 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.774 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.776 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.779 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.780 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.783 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.784 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.786 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.786 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.787 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.789 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.790 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.791 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.793 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.793] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:50.794 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.794] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:50.794 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1581059983 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:50.960 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.960] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:50.960 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.960] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:50.961 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@417335091 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:50.962 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.962] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:50.962 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.962] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.963 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:50.965 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.965] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:50.965 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.965] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:50.965 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@417335091 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:50.968 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:50.976 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@288742810 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:50.976 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:50.976] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:50.976 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:50.976] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:50.978 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:50.987 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:50.988 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.989 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:50.990 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.992 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:50.993 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.994 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:50.996 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:50.997 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:50.998 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.000 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.001 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:51.003 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.004 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.006 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.006 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.008 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:51.008 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.015 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.017 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.020 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.021 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.023 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:51.024 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:51.028 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.030 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.031 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.032 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:51.034 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:51.035 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.037 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.038 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:51.039 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.041 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.043 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.045 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.046 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.047 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:51.048 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.049 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:51.051 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:51.052 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.052 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:51.054 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:51.054] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:51.055 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:51.055] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:51.055 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@288742810 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:52.325 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.325] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:52.326 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.326] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:52.328 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@567894841 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:52.329 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.329] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:52.329 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.329] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.330 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:52.332 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.332] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.332 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.332] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:52.332 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@567894841 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:52.334 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:52.343 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [30, SHIPPED]
2026-02-20 16:00:52.343 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.343] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [30, SHIPPED]
2026-02-20 16:00:52.344 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.344] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [30, SHIPPED]
2026-02-20 16:00:52.344 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.344] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:52.344 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.344] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:52.345 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:52.348 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.350 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.353 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.353 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:52.355 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.355] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #30 status changed from PROCESSING to SHIPPED, true]
2026-02-20 16:00:52.355 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.355] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:52.355 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.355] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:52.355 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.355] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:52.355 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.355] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-20 16:00:52.355 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 12ms
2026-02-20 16:00:52.357 [task-9] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:52.360 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:52.360 [task-9] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:52.360 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.360] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:52.360 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.360] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:52.378 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.378] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:52.378 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.378] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:52.380 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@699433471 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:52.380 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.380] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:52.381 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.381] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.382 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:52.383 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.383] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.383 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.383] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:52.383 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@699433471 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:52.386 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:52.394 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@650073583 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:52.395 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.395] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:52.395 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.395] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:52.397 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:52.403 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:52.405 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.407 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.410 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.411 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:52.414 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.416 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.416 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.419 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.420 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.421 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.423 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.425 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.427 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.428 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.430 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.431 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.433 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.434 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.435 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.436 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.437 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.438 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.442 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:52.444 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.445 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.446 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.448 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.450 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.451 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.452 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.454 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.455 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.457 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.459 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.460 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.462 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.464 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.464 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.465 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.468 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.468 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.471 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.472 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.472] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:52.472 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.472] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:52.473 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@650073583 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:52.624 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.624] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:52.624 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.624] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:52.626 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1882076787 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:52.626 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.626] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:52.626 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.626] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.628 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:52.630 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.630] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:52.630 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.630] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:52.631 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1882076787 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:52.633 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:52.648 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1011222300 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:52.648 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.648] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:52.649 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.649] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:52.652 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:52.659 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:52.660 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.661 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.664 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.665 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:52.666 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.669 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.670 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.670 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.671 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.673 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.676 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.677 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.678 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.680 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.680 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.682 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.683 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.684 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.685 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.687 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.688 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.690 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.692 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:52.694 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.696 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.697 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.698 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:52.700 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.701 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.702 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.703 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.704 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.705 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.706 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.708 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.710 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.711 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.712 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.713 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:52.714 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:52.716 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.717 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:52.718 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:52.718] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:52.718 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:52.718] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:52.718 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1011222300 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:53.990 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:53.990] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:53.992 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:53.992] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:53.993 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1255210085 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:53.993 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:53.993] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:53.994 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:53.994] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:53.995 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:53.995 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:53.995] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:53.997 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:53.997] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:53.997 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1255210085 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:54.000 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:54.007 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [30, DELIVERED]
2026-02-20 16:00:54.007 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.007] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [30, DELIVERED]
2026-02-20 16:00:54.007 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.007] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [30, DELIVERED]
2026-02-20 16:00:54.007 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.007] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:54.007 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.007] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:54.008 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:54.011 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.013 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.014 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.016 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:54.016 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.016] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:54.016 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.016] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:54.018 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.018] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-20 16:00:54.018 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 11ms
2026-02-20 16:00:54.020 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:54.035 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.035] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:54.035 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.035] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:54.036 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1509275812 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:54.036 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.036] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:54.036 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.036] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:54.039 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:54.040 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.040] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:54.040 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.040] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:54.041 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1509275812 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:54.041 [task-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.041] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #30 status changed from SHIPPED to DELIVERED, true]
2026-02-20 16:00:54.041 [task-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.041] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:54.044 [task-10] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:54.044 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:54.045 [task-10] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:54.046 [task-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.046] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:54.046 [task-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.046] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:54.052 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1712142096 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:54.053 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.053] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:54.053 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.053] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:54.057 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:54.060 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:54.062 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.063 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.065 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.066 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:54.068 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.068 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.070 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.071 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.072 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.074 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.075 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.076 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.078 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.079 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.080 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.082 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.083 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.084 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.085 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.086 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.087 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.089 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.091 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:54.093 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.094 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.095 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.096 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.098 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.098 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.100 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.101 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.102 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.104 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.105 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.106 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.108 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.109 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.110 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.110 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.111 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.112 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.113 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.115 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.115] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:54.115 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.115] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:54.116 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1712142096 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:54.236 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.236] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:54.237 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.237] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:54.240 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1376658441 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:54.240 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.240] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:54.240 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.240] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:54.241 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:54.243 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.243] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:54.244 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.244] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:54.244 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1376658441 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:54.246 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:54.256 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@660447240 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:54.257 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.257] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:54.257 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.257] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:54.260 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:54.264 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:54.266 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.267 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.269 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.271 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:54.273 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.275 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.276 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.277 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.278 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.280 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.281 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.282 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.284 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.285 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.287 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.288 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.290 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.292 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.293 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.294 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.295 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.296 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.298 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:54.300 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.302 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.304 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.306 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:54.307 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.308 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.310 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.311 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.312 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.313 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.315 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.316 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.317 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.320 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.321 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.322 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:54.323 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:54.325 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.325 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:54.327 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:54.327] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:54.328 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:54.327] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:54.328 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@660447240 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:58.273 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.273] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:58.274 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.274] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:58.276 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1153112243 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:58.276 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.276] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:58.276 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.276] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.277 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:58.279 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.279] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.279 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.279] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:58.280 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1153112243 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:58.284 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:58.290 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, DELIVERED]
2026-02-20 16:00:58.290 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.290] ENTERING: OrderServiceImpl.updateOrderStatus with arguments: [28, DELIVERED]
2026-02-20 16:00:58.290 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.290] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) with arguments: [28, DELIVERED]
2026-02-20 16:00:58.290 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.290] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:58.291 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.291] TRANSACTION START: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:58.291 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:00:58.294 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.295 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.297 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.298 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:00:58.300 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.300] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:58.301 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.301] TRANSACTION COMMIT: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus)
2026-02-20 16:00:58.301 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.301] EXITING: OrderServiceImpl.updateOrderStatus returned: OrderResponse
2026-02-20 16:00:58.301 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrderStatus(Integer, OrderStatus) in 11ms
2026-02-20 16:00:58.302 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:00:58.307 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.307] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [Optional[admin], ORDER_STATUS_CHANGED, Order #28 status changed from SHIPPED to DELIVERED, true]
2026-02-20 16:00:58.308 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.307] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:58.309 [task-11] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:00:58.311 [task-11] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_STATUS_CHANGED for user: Optional[admin]
2026-02-20 16:00:58.311 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.311] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:00:58.311 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.311] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:00:58.323 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.323] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:58.323 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.323] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:58.325 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@139341062 wrapping org.postgresql.jdbc.PgConnection@34665cf3] read-only
2026-02-20 16:00:58.325 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.325] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:58.325 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.325] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.326 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:58.329 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.328] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.329 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.329] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:58.329 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@139341062 wrapping org.postgresql.jdbc.PgConnection@34665cf3]
2026-02-20 16:00:58.331 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:58.338 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1211860020 wrapping org.postgresql.jdbc.PgConnection@34665cf3] read-only
2026-02-20 16:00:58.339 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.339] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:58.340 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.339] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:58.340 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:58.346 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:58.348 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.351 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.354 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.356 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:58.358 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.360 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.361 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.363 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.364 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.367 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.368 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.371 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.373 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.375 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.376 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.378 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.379 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.381 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.382 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.384 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.386 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.386 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.390 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:58.392 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.393 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.395 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.396 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.400 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.403 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.403 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.405 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.407 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.408 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.409 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.411 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.412 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.414 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.416 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.418 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.419 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.420 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.422 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.423 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.423] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:58.423 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.423] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:58.424 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1211860020 wrapping org.postgresql.jdbc.PgConnection@34665cf3]
2026-02-20 16:00:58.562 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.562] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:00:58.562 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.562] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:00:58.566 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2143502896 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:58.567 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.567] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:00:58.567 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.567] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.568 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:00:58.571 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.571] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:00:58.571 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.571] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:00:58.572 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2143502896 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:00:58.574 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:00:58.586 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@998618217 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:00:58.586 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.586] ENTERING: OrderServiceImpl.getOrders with arguments: [null, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:00:58.586 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.586] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:58.589 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:00:58.592 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:00:58.593 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.595 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.596 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.597 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:00:58.598 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.601 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.602 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.603 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.603 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.604 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.605 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.607 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.608 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.610 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.612 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.613 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.614 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.615 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.617 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.618 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.620 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.622 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.623 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:00:58.624 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.624 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.626 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.627 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:00:58.628 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.628 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.630 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.631 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.633 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.635 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.637 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.638 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.638 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.640 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.640 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.641 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:00:58.642 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:00:58.644 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.644 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:00:58.645 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:00:58.645] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:00:58.645 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:00:58.645] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:00:58.646 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@998618217 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:14.174 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.174] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:01:14.174 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.174] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:01:14.177 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1178885126 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:01:14.177 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.177] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:01:14.177 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.177] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:14.179 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:01:14.180 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.180] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:14.180 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.180] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:01:14.180 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1178885126 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:14.182 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:01:14.190 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 16:01:14.192 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1604920419 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:01:14.192 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.192] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 16:01:14.192 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.192] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:01:14.200 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 16:01:14.207 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.207] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:01:14.208 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.208] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 16:01:14.208 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1604920419 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:14.213 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 23ms
2026-02-20 16:01:14.213 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 16:01:14.226 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 16:01:14.270 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.270] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:01:14.270 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.270] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:01:14.272 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1435992494 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:01:14.272 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.272] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:01:14.272 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.272] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:14.273 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:01:14.275 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.275] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:14.275 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.275] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:01:14.275 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1435992494 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:14.277 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:01:14.285 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 16:01:14.285 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1523367769 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:01:14.285 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.285] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 16:01:14.285 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.285] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:01:14.288 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 16:01:14.309 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:14.309] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:01:14.309 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:14.309] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 16:01:14.315 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1523367769 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:14.317 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 31ms
2026-02-20 16:01:14.317 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 16:01:26.498 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.498] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:01:26.498 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.498] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:01:26.500 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1887724570 wrapping org.postgresql.jdbc.PgConnection@335cd031] read-only
2026-02-20 16:01:26.501 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.501] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:01:26.501 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:26.501] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:26.502 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:01:26.503 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:26.503] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:01:26.504 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.504] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:01:26.504 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1887724570 wrapping org.postgresql.jdbc.PgConnection@335cd031]
2026-02-20 16:01:26.507 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:01:26.509 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@262b4ebd]]
2026-02-20 16:01:26.509 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.509] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjAzMjM3LCJleHAiOjE3NzE2ODk2Mzd9.zCRNJ1zPBIrSWb_2OzXWnMbWegx-SPQ1HxG_OTvhgMhdvHgGz6fBq2NWRH5jr89PcbFw8gYfOc8m9qDJ1P7mYw]
2026-02-20 16:01:26.510 [http-nio-8080-exec-4] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 2
2026-02-20 16:01:26.510 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.510] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-20 16:01:26.511 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.logout responded in 2ms
2026-02-20 16:01:26.511 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-20 16:01:26.571 [task-12] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.571] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGOUT, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@262b4ebd], User logged out successfully, true]
2026-02-20 16:01:26.571 [task-12] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:26.571] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 16:01:26.571 [task-12] ERROR c.s.s.impl.SecurityAuditServiceImpl - Failed to log security event: LOGOUT for user: admin
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
	at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:609)
	at org.apache.catalina.connector.RequestFacade.getHeader(RequestFacade.java:287)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getHeader(StrictHttpFirewall.java:724)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at jakarta.servlet.http.HttpServletRequestWrapper.getHeader(HttpServletRequestWrapper.java:82)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.extractClientIp(SecurityAuditServiceImpl.java:74)
	at com.shopjoy.service.impl.SecurityAuditServiceImpl.logEvent(SecurityAuditServiceImpl.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:112)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:01:26.573 [task-12] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:01:26.573] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, HttpServletRequest, String, Boolean)
2026-02-20 16:01:26.573 [task-12] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:01:26.573] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:26:48.526 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 16:26:48.541 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 16:26:48.561 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 16:26:48.566 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 16:26:48.591 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-20 16:27:02.592 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Starting ShopjoyEcommerceSystemApplication using Java 25.0.1 with PID 29580 (C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce\target\classes started by EugeneDokyeAnokye in C:\Users\EugeneDokyeAnokye\IdeaProjects\spring-data-ecommerce)
2026-02-20 16:27:02.594 [main] DEBUG c.s.ShopjoyEcommerceSystemApplication - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-20 16:27:02.595 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - The following 1 profile is active: "dev"
2026-02-20 16:27:03.201 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 9.0.1.Final
2026-02-20 16:27:04.960 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-20 16:27:05.276 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 300 ms. Found 10 JPA repository interfaces.
2026-02-20 16:27:07.629 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-20 16:27:07.646 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-20 16:27:07.649 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-20 16:27:07.650 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-20 16:27:07.804 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 5132 ms
2026-02-20 16:27:08.961 [main] INFO  org.hibernate.orm.jpa - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-20 16:27:09.062 [main] INFO  org.hibernate.orm.core - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-20 16:27:09.782 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-20 16:27:09.822 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-20 16:27:10.090 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3638a852
2026-02-20 16:27:10.092 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-20 16:27:10.220 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/shopjoy_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 18.1
	Default catalog/schema: shopjoy_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-20 16:27:12.617 [main] INFO  org.hibernate.orm.core - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-20 16:27:12.790 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 16:27:13.492 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-20 16:27:16.475 [main] DEBUG c.s.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-02-20 16:27:16.977 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-20 16:27:22.837 [main] INFO  o.s.g.e.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.
2026-02-20 16:27:23.138 [main] INFO  o.s.b.g.a.GraphQlAutoConfiguration - GraphQL schema inspection:
	Unmapped fields: {Inventory=[reservedQuantity]}
	Unmapped registrations: {Review.user=@BatchMapping ReviewFieldResolver#user[1 args]}
	Unmapped arguments: {}
	Field nullness errors: {}
	Argument nullness errors: {}
	Skipped types: []
2026-02-20 16:27:23.195 [main] INFO  o.s.b.g.a.s.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql
2026-02-20 16:27:24.852 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2026-02-20 16:27:24.980 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-20 16:27:24.992 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-20 16:27:25.010 [main] INFO  c.s.ShopjoyEcommerceSystemApplication - Started ShopjoyEcommerceSystemApplication in 23.434 seconds (process running for 24.484)
2026-02-20 16:27:25.023 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.022] ENTERING: TokenBlacklistServiceImpl.removeExpiredTokens with arguments: []
2026-02-20 16:27:25.023 [scheduling-1] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Blacklist cleanup: No expired tokens found. Current size: 0
2026-02-20 16:27:25.025 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.025] EXITING: TokenBlacklistServiceImpl.removeExpiredTokens returned: void
2026-02-20 16:27:25.028 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.028] ENTERING: RateLimitServiceImpl.removeExpiredEntries with arguments: []
2026-02-20 16:27:25.029 [scheduling-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.029] EXITING: RateLimitServiceImpl.removeExpiredEntries returned: void
2026-02-20 16:27:25.123 [main] INFO  c.s.config.AdminUserInitializer - Checking for existing admin user with username: admin
2026-02-20 16:27:25.136 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1557843075 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:27:25.140 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.140] ENTERING: AuthServiceImpl.isUsernameTaken with arguments: [admin]
2026-02-20 16:27:25.149 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:27:25.149] TRANSACTION START: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 16:27:25.253 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.username=? fetch first ? rows only
2026-02-20 16:27:25.272 [main] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:27:25.272] TRANSACTION COMMIT: AuthServiceImpl.isUsernameTaken(String)
2026-02-20 16:27:25.272 [main] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:27:25.272] EXITING: AuthServiceImpl.isUsernameTaken returned: Boolean
2026-02-20 16:27:25.275 [main] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1557843075 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:27:25.275 [main] INFO  c.s.config.AdminUserInitializer - Admin user 'admin' already exists, skipping creation
2026-02-20 16:27:25.276 [main] WARN  o.s.c.events.SpringDocAppInitializer - SpringDoc /api-docs endpoint is enabled by default. To disable it in production, set the property 'springdoc.api-docs.enabled=false'
2026-02-20 16:31:56.483 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-20 16:31:56.483 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-20 16:31:56.486 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-20 16:31:56.754 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@38c2b122, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@251da7dc]]
2026-02-20 16:31:56.755 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1770022921 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:31:56.756 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:56.756] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@38c2b122]
2026-02-20 16:31:56.757 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:56.757] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:31:56.759 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:56.759] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:31:56.759 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:56.759] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:31:56.884 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:56.884] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:31:56.887 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:56.887] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:31:56.898 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:31:56.935 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:56.935] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:31:56.935 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:56.935] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:31:57.047 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:57.047] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:31:57.049 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: admin. Count: 1
2026-02-20 16:31:57.050 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 1
2026-02-20 16:31:57.050 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:57.050] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-20 16:31:57.052 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:57.052] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 16:31:57.052 [http-nio-8080-exec-1] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 295ms with exception: Invalid username or password
2026-02-20 16:31:57.054 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:57.054] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@38c2b122]
2026-02-20 16:31:57.054 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 16:31:57.054 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 16:31:57.054 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:31:57.069 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1770022921 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:31:57.075 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@38c2b122, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@251da7dc]]
2026-02-20 16:31:57.075 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 16:31:57.075 [http-nio-8080-exec-1] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:31:57.082 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:57.082] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, false]
2026-02-20 16:31:57.082 [http-nio-8080-exec-1] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 16:31:57.083 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:57.083] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:31:57.133 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:31:57.156 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:31:57.157 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:57.156] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:31:57.157 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:57.157] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:31:59.045 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@745ed03f, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@70614a6c]]
2026-02-20 16:31:59.046 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@895736324 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:31:59.046 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.046] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@745ed03f]
2026-02-20 16:31:59.047 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.047] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:31:59.047 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.047] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:31:59.047 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.047] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:31:59.047 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.047] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:31:59.047 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.047] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:31:59.048 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:31:59.051 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.051] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:31:59.052 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.052] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:31:59.129 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.129] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: admin. Count: 2
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 2
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.130] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.130] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 83ms with exception: Invalid username or password
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.130] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@745ed03f]
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 16:31:59.130 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:31:59.132 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@895736324 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:31:59.132 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@745ed03f, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@70614a6c]]
2026-02-20 16:31:59.134 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 16:31:59.134 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.134] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, false]
2026-02-20 16:31:59.134 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.134] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:31:59.134 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:31:59.135 [http-nio-8080-exec-4] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 16:31:59.135 [task-2] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:31:59.137 [task-2] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:31:59.138 [task-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:31:59.138] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:31:59.138 [task-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:31:59.138] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:00.785 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@2bb4bdd8, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2f8b2c76]]
2026-02-20 16:32:00.786 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1787410403 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:00.786 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.786] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@2bb4bdd8]
2026-02-20 16:32:00.786 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.786] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:00.786 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.786] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:00.787 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.787] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:00.787 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.787] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:32:00.787 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.787] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:00.789 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:32:00.791 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.791] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:00.792 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.792] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:32:00.864 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.864] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: admin. Count: 3
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 3
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.865] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.865] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 79ms with exception: Invalid username or password
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.865] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@2bb4bdd8]
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 16:32:00.865 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:00.868 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1787410403 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:00.869 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@2bb4bdd8, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2f8b2c76]]
2026-02-20 16:32:00.870 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 16:32:00.870 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.870] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, false]
2026-02-20 16:32:00.870 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.870] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:00.870 [http-nio-8080-exec-3] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:00.871 [http-nio-8080-exec-3] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 16:32:00.871 [task-3] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:00.873 [task-3] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:00.873 [task-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:00.873] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:00.873 [task-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:00.873] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:01.731 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@568c7d30, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@52b3f339]]
2026-02-20 16:32:01.732 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@397506315 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:01.732 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.732] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@568c7d30]
2026-02-20 16:32:01.733 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.733] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:01.733 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.733] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:01.733 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.733] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:01.733 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.733] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:32:01.733 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.733] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:01.735 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:32:01.737 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.737] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:01.738 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.738] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:32:01.812 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.812] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:01.812 [http-nio-8080-exec-7] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: admin. Count: 4
2026-02-20 16:32:01.812 [http-nio-8080-exec-7] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 4
2026-02-20 16:32:01.812 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.812] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.812] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 80ms with exception: Invalid username or password
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.813] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@568c7d30]
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 16:32:01.813 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:01.814 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@397506315 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:01.816 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@568c7d30, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@52b3f339]]
2026-02-20 16:32:01.816 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 16:32:01.816 [http-nio-8080-exec-7] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:01.816 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.816] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, false]
2026-02-20 16:32:01.818 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.818] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:01.818 [http-nio-8080-exec-7] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 16:32:01.818 [task-4] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:01.820 [task-4] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:01.821 [task-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:01.820] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:01.821 [task-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:01.821] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:02.492 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@6448d70a, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@60775f5b]]
2026-02-20 16:32:02.494 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@628481329 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:02.494 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.494] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@6448d70a]
2026-02-20 16:32:02.494 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.494] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:02.494 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.494] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:02.494 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.494] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:02.495 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.495] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:32:02.495 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.495] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:02.495 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:32:02.499 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.499] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:32:02.500 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.500] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:32:02.582 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.582] ENTERING: RateLimitServiceImpl.recordLoginAttempt with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:02.582 [http-nio-8080-exec-5] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for username: admin. Count: 5
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] DEBUG c.s.s.impl.RateLimitServiceImpl - Recorded login attempt for IP: 0:0:0:0:0:0:0:1. Count: 5
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.583] EXITING: RateLimitServiceImpl.recordLoginAttempt returned: void
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.583] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Invalid username or password
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 89ms with exception: Invalid username or password
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.583] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@6448d70a]
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: AuthenticationException
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Invalid username or password
2026-02-20 16:32:02.583 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:02.585 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@628481329 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:02.586 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@6448d70a, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@60775f5b]]
2026-02-20 16:32:02.586 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Invalid username or password
2026-02-20 16:32:02.586 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.586] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, false]
2026-02-20 16:32:02.586 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.586] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:02.586 [http-nio-8080-exec-5] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.AuthenticationException: Invalid username or password
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:02.587 [http-nio-8080-exec-5] WARN  c.s.exception.GlobalExceptionHandler - Authentication failed: Invalid username or password
2026-02-20 16:32:02.587 [task-5] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:02.590 [task-5] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:02.590 [task-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:02.590] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:02.590 [task-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:02.590] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:03.242 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@51eb8fc0, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@55d41125]]
2026-02-20 16:32:03.242 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@282494459 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:03.243 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.243] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@51eb8fc0]
2026-02-20 16:32:03.243 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:03.243] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:03.244 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.244] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:03.244 [http-nio-8080-exec-6] WARN  c.s.s.impl.RateLimitServiceImpl - Username 'admin' is rate limited. Attempts: 5
2026-02-20 16:32:03.244 [http-nio-8080-exec-6] WARN  c.s.s.impl.RateLimitServiceImpl - IP address '0:0:0:0:0:0:0:1' is rate limited. Attempts: 5
2026-02-20 16:32:03.244 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.244] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:03.244 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.244] ENTERING: RateLimitServiceImpl.getRetryAfterSeconds with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:03.246 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.246] EXITING: RateLimitServiceImpl.getRetryAfterSeconds returned: Long
2026-02-20 16:32:03.247 [http-nio-8080-exec-6] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:03.247] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.247 [http-nio-8080-exec-6] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 4ms with exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.249 [http-nio-8080-exec-6] WARN  SECURITY - [2026-02-20 16:32:03.248] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 899 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.249 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.249] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@51eb8fc0]
2026-02-20 16:32:03.249 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: RateLimitExceededException
2026-02-20 16:32:03.249 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.249 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:03.250 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@282494459 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:03.251 [http-nio-8080-exec-6] WARN  SECURITY - [2026-02-20 16:32:03.251] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 899 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.251 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@51eb8fc0, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@55d41125]]
2026-02-20 16:32:03.251 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.252 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.252] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, Login failed: Too many failed login attempts. Please try again in 14 minutes., false]
2026-02-20 16:32:03.252 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:03.252] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:03.251 [http-nio-8080-exec-6] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:03.252 [http-nio-8080-exec-6] WARN  c.s.exception.GlobalExceptionHandler - Rate limit exceeded: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:03.253 [task-6] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:03.254 [task-6] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:03.254 [task-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:03.254] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:03.255 [task-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:03.255] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:07.612 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1569ca77, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@11564c02]]
2026-02-20 16:32:07.613 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1414840396 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:07.614 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.614] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1569ca77]
2026-02-20 16:32:07.614 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:07.614] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:07.615 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.615] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:07.615 [http-nio-8080-exec-2] WARN  c.s.s.impl.RateLimitServiceImpl - Username 'admin' is rate limited. Attempts: 5
2026-02-20 16:32:07.615 [http-nio-8080-exec-2] WARN  c.s.s.impl.RateLimitServiceImpl - IP address '0:0:0:0:0:0:0:1' is rate limited. Attempts: 5
2026-02-20 16:32:07.615 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.615] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:07.615 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.615] ENTERING: RateLimitServiceImpl.getRetryAfterSeconds with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:07.616 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.616] EXITING: RateLimitServiceImpl.getRetryAfterSeconds returned: Long
2026-02-20 16:32:07.617 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:07.617] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.617 [http-nio-8080-exec-2] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 3ms with exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.618 [http-nio-8080-exec-2] WARN  SECURITY - [2026-02-20 16:32:07.618] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 894 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.618 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.618] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1569ca77]
2026-02-20 16:32:07.618 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: RateLimitExceededException
2026-02-20 16:32:07.618 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.619 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:07.621 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1414840396 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:07.621 [http-nio-8080-exec-2] WARN  SECURITY - [2026-02-20 16:32:07.621] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 894 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.622 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1569ca77, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@11564c02]]
2026-02-20 16:32:07.622 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.622] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, Login failed: Too many failed login attempts. Please try again in 14 minutes., false]
2026-02-20 16:32:07.623 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.623 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:07.623] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:07.623 [http-nio-8080-exec-2] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:07.624 [http-nio-8080-exec-2] WARN  c.s.exception.GlobalExceptionHandler - Rate limit exceeded: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:07.625 [task-7] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:07.628 [task-7] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:07.629 [task-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:07.629] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:07.629 [task-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:07.629] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:15.692 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1a22b58e, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e1d2212]]
2026-02-20 16:32:15.693 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1528807349 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:15.693 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.693] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1a22b58e]
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:15.694] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.694] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] WARN  c.s.s.impl.RateLimitServiceImpl - Username 'admin' is rate limited. Attempts: 5
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] WARN  c.s.s.impl.RateLimitServiceImpl - IP address '0:0:0:0:0:0:0:1' is rate limited. Attempts: 5
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.694] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:15.694 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.694] ENTERING: RateLimitServiceImpl.getRetryAfterSeconds with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.695] EXITING: RateLimitServiceImpl.getRetryAfterSeconds returned: Long
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:15.695] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 1ms with exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] WARN  SECURITY - [2026-02-20 16:32:15.695] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 886 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.695] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@1a22b58e]
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: RateLimitExceededException
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.695 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:15.696 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1528807349 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:15.697 [http-nio-8080-exec-8] WARN  SECURITY - [2026-02-20 16:32:15.697] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 886 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.697 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@1a22b58e, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e1d2212]]
2026-02-20 16:32:15.697 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.697 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.697] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, Login failed: Too many failed login attempts. Please try again in 14 minutes., false]
2026-02-20 16:32:15.697 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:15.697] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:15.697 [http-nio-8080-exec-8] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:15.699 [http-nio-8080-exec-8] WARN  c.s.exception.GlobalExceptionHandler - Rate limit exceeded: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:15.700 [task-8] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:15.702 [task-8] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:15.702 [task-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:15.702] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:15.702 [task-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:15.702] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:32:22.139 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@615d71af, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6562f95c]]
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@543194004 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.141] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@615d71af]
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:22.141] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.141] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] WARN  c.s.s.impl.RateLimitServiceImpl - Username 'admin' is rate limited. Attempts: 5
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] WARN  c.s.s.impl.RateLimitServiceImpl - IP address '0:0:0:0:0:0:0:1' is rate limited. Attempts: 5
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.141] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.141] ENTERING: RateLimitServiceImpl.getRetryAfterSeconds with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:32:22.141 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.141] EXITING: RateLimitServiceImpl.getRetryAfterSeconds returned: Long
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:22.142] TRANSACTION ROLLBACK: AuthServiceImpl.login(LoginRequest) - Exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - Transaction AuthServiceImpl.login(LoginRequest) failed after 1ms with exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] WARN  SECURITY - [2026-02-20 16:32:22.142] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 880 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.142] EXCEPTION in AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@615d71af]
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: RateLimitExceededException
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.142 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:22.144 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@543194004 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:32:22.144 [http-nio-8080-exec-9] WARN  SECURITY - [2026-02-20 16:32:22.144] RATE_LIMIT_EXCEEDED - Username: UNKNOWN, Method: login, RetryAfter: 880 seconds, Message: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.144 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@615d71af, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6562f95c]]
2026-02-20 16:32:22.144 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.144 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.RateLimitExceededException: Too many failed login attempts. Please try again in 14 minutes.
	at com.shopjoy.service.impl.AuthServiceImpl.login(AuthServiceImpl.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.AuthServiceImpl$$SpringCGLIB$$0.login(<generated>)
	at com.shopjoy.controller.AuthController.login(AuthController.java:115)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:57)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:32:22.145 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.145] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_FAILURE, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, Login failed: Too many failed login attempts. Please try again in 14 minutes., false]
2026-02-20 16:32:22.145 [http-nio-8080-exec-9] WARN  c.s.exception.GlobalExceptionHandler - Rate limit exceeded: Too many failed login attempts. Please try again in 14 minutes.
2026-02-20 16:32:22.146 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:22.146] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:22.146 [task-1] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:32:22.150 [task-1] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_FAILURE for user: admin
2026-02-20 16:32:22.150 [task-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:32:22.150] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:32:22.150 [task-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:32:22.150] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:51:22.593 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.login with arguments: [com.shopjoy.dto.request.LoginRequest@252daccb, SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@675803da]]
2026-02-20 16:51:22.593 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@515565029 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:22.593 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.593] ENTERING: AuthServiceImpl.login with arguments: [com.shopjoy.dto.request.LoginRequest@252daccb]
2026-02-20 16:51:22.593 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.593] TRANSACTION START: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:51:22.594 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.594] ENTERING: RateLimitServiceImpl.isRateLimited with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:51:22.594 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.594] EXITING: RateLimitServiceImpl.isRateLimited returned: Boolean
2026-02-20 16:51:22.595 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.595] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:22.595 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.595] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.596 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:22.599 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.599] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.599 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.599] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:22.822 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.822] ENTERING: RateLimitServiceImpl.resetAttempts with arguments: [admin, 0:0:0:0:0:0:0:1]
2026-02-20 16:51:22.822 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Reset login attempts for username: admin. Previous count: 5
2026-02-20 16:51:22.822 [http-nio-8080-exec-1] DEBUG c.s.s.impl.RateLimitServiceImpl - Reset login attempts for IP: 0:0:0:0:0:0:0:1. Previous count: 5
2026-02-20 16:51:22.822 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.822] EXITING: RateLimitServiceImpl.resetAttempts returned: void
2026-02-20 16:51:22.825 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.825] TRANSACTION COMMIT: AuthServiceImpl.login(LoginRequest)
2026-02-20 16:51:22.826 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.826] EXITING: AuthServiceImpl.login returned: LoginResponse
2026-02-20 16:51:22.826 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@515565029 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:22.826 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.login responded in 233ms
2026-02-20 16:51:22.828 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.login returned: ResponseEntity
2026-02-20 16:51:22.828 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.828] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged in successfully, true]
2026-02-20 16:51:22.828 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.828] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:22.829 [task-9] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:51:22.838 [task-9] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: admin
2026-02-20 16:51:22.838 [task-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.838] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:22.838 [task-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.838] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:51:22.878 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.878] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:22.879 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.879] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:22.880 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.880] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:22.881 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.881] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:22.942 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1718291885 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:22.942 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@962136937 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:22.942 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.942] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:22.943 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.943] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:22.943 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.943] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.943 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.943] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.943 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:22.943 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:22.945 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.945] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.945 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.945] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:22.945 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1718291885 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:22.948 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:22.952 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.952] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.952 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.952] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:22.952 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@962136937 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:22.955 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:22.968 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:22.968 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-20 16:51:22.968 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:22.981 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.981] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:22.981 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.981] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:22.982 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1825750379 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:22.983 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.983] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:22.983 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.983] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.984 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:22.986 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:22.986] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:22.986 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:22.986] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:22.987 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1825750379 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:22.991 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:22.993 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:22.993 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-20 16:51:22.993 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:23.157 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1377176148 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.157 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.157] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 16:51:23.160 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.160] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 16:51:23.178 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 16:51:23.192 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.192] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 16:51:23.192 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.192] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 16:51:23.193 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1377176148 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.226 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1343851176 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.227 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.227] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 16:51:23.231 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.231] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:51:23.264 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 16:51:23.291 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.299 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.302 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.304 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.307 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.310 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.312 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.313 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.315 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.317 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.320 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.322 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.324 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.326 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.328 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.329 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.330 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.332 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.333 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.335 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:23.346 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:51:23.354 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:51:23.372 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.372] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:51:23.373 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.372] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:51:23.373 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1343851176 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.408 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1651731064 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.408 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.408] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:51:23.411 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.411] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:51:23.423 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:51:23.440 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:51:23.445 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.460 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:51:23.483 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.485 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:51:23.489 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.491 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.493 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.495 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.496 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.498 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.499 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:51:23.502 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.504 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.507 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.509 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.511 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.511 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.513 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.514 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.515 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.517 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.519 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:51:23.524 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:51:23.526 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.527 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.528 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.530 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:51:23.532 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.534 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.535 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.537 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.538 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.540 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.542 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.543 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.543 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.545 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.545 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.547 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.548 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.549 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.551 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:51:23.552 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.552] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:51:23.553 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.553] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:51:23.554 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1651731064 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.591 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@111048530 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.591 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.591] ENTERING: InventoryServiceImpl.getLowStockProducts with arguments: []
2026-02-20 16:51:23.593 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.593] TRANSACTION START: InventoryServiceImpl.getLowStockProducts()
2026-02-20 16:51:23.596 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.quantity_in_stock<=i1_0.reorder_level
2026-02-20 16:51:23.602 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:51:23.610 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.610] TRANSACTION COMMIT: InventoryServiceImpl.getLowStockProducts()
2026-02-20 16:51:23.610 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.610] EXITING: InventoryServiceImpl.getLowStockProducts returned: ArrayList
2026-02-20 16:51:23.610 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@111048530 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.618 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1091492270 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.618 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.618] ENTERING: CategoryServiceImpl.getCategoriesByIds with arguments: [[11, 12, 13, 14, 15, 16]]
2026-02-20 16:51:23.620 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.620] TRANSACTION START: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 16:51:23.632 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id in (?,?,?,?,?,?)
2026-02-20 16:51:23.635 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.635] TRANSACTION COMMIT: CategoryServiceImpl.getCategoriesByIds(List)
2026-02-20 16:51:23.635 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.635] EXITING: CategoryServiceImpl.getCategoriesByIds returned: ListN
2026-02-20 16:51:23.636 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1091492270 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.650 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@502911638 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.651 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.651] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26, 18]]
2026-02-20 16:51:23.651 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.651] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:51:23.654 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?,?)
2026-02-20 16:51:23.657 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.657] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:51:23.657 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.657] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-20 16:51:23.658 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@502911638 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:23.670 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@815702649 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:23.670 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.670] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 16:51:23.671 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.671] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:51:23.676 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.679 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.681 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.682 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.683 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.685 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.686 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.688 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.689 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.692 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.693 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.694 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.695 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.697 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.697 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.699 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.700 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.702 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.703 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.704 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.707 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.708 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.709 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.710 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:23.712 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:23.714 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:23.714] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:51:23.714 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:23.714] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:51:23.715 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@815702649 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:28.177 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.177] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:28.177 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.177] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:28.179 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1747436478 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:28.179 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.179] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:28.179 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.179] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:28.181 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:28.183 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.183] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:28.183 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.183] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:28.185 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1747436478 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:28.188 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:28.206 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 16:51:28.208 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1115696424 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:28.208 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.208] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 16:51:28.209 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.209] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:51:28.214 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 16:51:28.227 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.227] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:51:28.227 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.227] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 16:51:28.228 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1115696424 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:28.231 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 24ms
2026-02-20 16:51:28.231 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 16:51:28.237 [http-nio-8080-exec-5] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-20 16:51:28.264 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.264] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:28.264 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.264] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:28.268 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@938271000 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:28.268 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.268] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:28.268 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.268] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:28.269 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:28.271 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.271] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:28.271 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.271] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:28.271 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@938271000 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:28.275 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:28.278 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: SecurityAuditLogController.getAllLogs with arguments: [0, 20, timestamp, desc]
2026-02-20 16:51:28.278 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1522027943 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:28.278 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.278] ENTERING: SecurityAuditServiceImpl.getAllLogs with arguments: [Page request [number: 0, size 20, sort: timestamp: DESC]]
2026-02-20 16:51:28.279 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.279] TRANSACTION START: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:51:28.281 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select sal1_0.log_id,sal1_0.details,sal1_0.event_type,sal1_0.ip_address,sal1_0.success,sal1_0.timestamp,sal1_0.user_agent,sal1_0.username from security_audit_logs sal1_0 order by sal1_0.timestamp desc offset ? rows fetch first ? rows only
2026-02-20 16:51:28.286 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:28.286] TRANSACTION COMMIT: SecurityAuditServiceImpl.getAllLogs(Pageable)
2026-02-20 16:51:28.286 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:28.286] EXITING: SecurityAuditServiceImpl.getAllLogs returned: PageImpl
2026-02-20 16:51:28.286 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1522027943 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:28.287 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint SecurityAuditLogController.getAllLogs responded in 9ms
2026-02-20 16:51:28.287 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: SecurityAuditLogController.getAllLogs returned: ResponseEntity
2026-02-20 16:51:39.107 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.107] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:39.108 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.108] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:39.109 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1674641390 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:39.110 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.110] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:39.110 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.110] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.110 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:39.111 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.111] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:39.111 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.111] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:39.111 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.111] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.112 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.112] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:39.112 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1674641390 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:39.112 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@937222477 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:39.112 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.112] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:39.112 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.112] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.113 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:39.113 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:39.116 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.116] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.116 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.116] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:39.116 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:39.116 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@937222477 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:39.116 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 0ms
2026-02-20 16:51:39.116 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:39.118 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:39.121 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getCacheStats with arguments: []
2026-02-20 16:51:39.122 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getCacheStats responded in 1ms
2026-02-20 16:51:39.123 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getCacheStats returned: ResponseEntity
2026-02-20 16:51:39.123 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.123] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:39.123 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.123] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:39.125 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1754467535 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:39.125 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.125] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:39.126 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.125] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.126 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:39.127 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.127] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:39.128 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.128] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:39.128 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.128] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.128 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.128] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:39.128 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1754467535 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:39.130 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1719540874 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:39.130 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.130] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:39.130 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.130] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.131 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:39.131 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:39.132 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:39.132] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:39.133 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:39.133] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:39.133 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:39.133 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1719540874 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:39.134 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 16:51:39.134 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:39.136 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:39.140 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getCacheStats with arguments: []
2026-02-20 16:51:39.140 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getCacheStats responded in 0ms
2026-02-20 16:51:39.140 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getCacheStats returned: ResponseEntity
2026-02-20 16:51:43.581 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.581] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:43.582 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.582] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:43.582 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.582] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:43.582 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.582] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:43.587 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@212597474 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:43.587 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@830667235 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:43.587 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.587] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:43.587 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.587] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:43.588 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.588] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.588 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.588] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.589 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:43.589 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:43.593 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.593] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.593 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.593] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.593 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.593] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:43.593 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.593] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:43.595 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@212597474 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:43.595 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@830667235 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:43.598 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:43.599 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:43.602 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:43.603 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 16:51:43.603 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:43.608 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.608] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:43.608 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.608] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:43.608 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1612390169 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:43.609 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.609] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:43.609 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.609] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.610 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:43.612 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.612] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:43.612 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.612] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:43.612 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@824541356 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:43.613 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.613] ENTERING: UserServiceImpl.getAllUsers with arguments: []
2026-02-20 16:51:43.613 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1612390169 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:43.613 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.613] TRANSACTION START: UserServiceImpl.getAllUsers()
2026-02-20 16:51:43.615 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:43.617 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0
2026-02-20 16:51:43.617 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: PerformanceController.getMetrics with arguments: []
2026-02-20 16:51:43.618 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint PerformanceController.getMetrics responded in 1ms
2026-02-20 16:51:43.618 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: PerformanceController.getMetrics returned: ResponseEntity
2026-02-20 16:51:43.620 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.620] TRANSACTION COMMIT: UserServiceImpl.getAllUsers()
2026-02-20 16:51:43.621 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.621] EXITING: UserServiceImpl.getAllUsers returned: ArrayList
2026-02-20 16:51:43.621 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@824541356 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:43.625 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1002887491 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:43.626 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.625] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [null, Page request [number: 0, size 20, sort: id: ASC], id, ASC]
2026-02-20 16:51:43.626 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.626] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:51:43.627 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_id fetch first ? rows only
2026-02-20 16:51:43.629 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.631 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.632 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.633 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.633 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.635 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.636 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.637 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.638 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.639 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.639 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.640 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.641 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.642 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.644 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.644 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.645 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.648 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.648 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.648 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:51:43.651 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:51:43.652 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:51:43.654 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.654] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:51:43.654 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.654] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:51:43.654 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1002887491 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:43.678 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@777535262 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:51:43.678 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.678] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[21, 28, 35, 45, 49, 56, 63, 69, 75, 77, 70, 14, 39, 42]]
2026-02-20 16:51:43.678 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.678] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:51:43.678 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.680 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.681 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.682 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.682 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.683 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.685 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.685 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.686 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.687 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.688 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.690 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.692 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.693 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.693 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.694 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.695 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.697 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.698 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.699 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.699 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.701 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.702 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.703 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:51:43.704 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:51:43.706 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:43.706] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:51:43.706 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:43.706] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:51:43.706 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@777535262 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:51:49.420 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.420] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:49.420 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.420] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:51:49.423 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@36548150 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:51:49.423 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.423] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [admin]
2026-02-20 16:51:49.423 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:49.423] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:49.423 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:51:49.425 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:49.425] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:51:49.426 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.426] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:51:49.426 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@36548150 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:51:49.429 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: admin
2026-02-20 16:51:49.431 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: AuthController.logout with arguments: [SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@516221a8]]
2026-02-20 16:51:49.431 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.431] ENTERING: TokenBlacklistServiceImpl.blacklistToken with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQURNSU4iLCJyb2xlcyI6IlJPTEVfQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluIiwiaWF0IjoxNzcxNjA2MjgyLCJleHAiOjE3NzE2OTI2ODJ9.HN9ckfCA7ujIydkv7v42J6NhHNvdDIlShTk3xP0RwMWm0RNoiOtMPZ4gPA8l2DAdHwk4ChHiA0mJJRiegM5sjw]
2026-02-20 16:51:49.432 [http-nio-8080-exec-6] DEBUG c.s.s.impl.TokenBlacklistServiceImpl - Token blacklisted. Total blacklisted tokens: 1
2026-02-20 16:51:49.432 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.432] EXITING: TokenBlacklistServiceImpl.blacklistToken returned: void
2026-02-20 16:51:49.433 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint AuthController.logout responded in 2ms
2026-02-20 16:51:49.433 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: AuthController.logout returned: ResponseEntity
2026-02-20 16:51:49.433 [task-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.433] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [admin, LOGOUT, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, User logged out successfully, true]
2026-02-20 16:51:49.433 [task-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:49.433] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:49.435 [task-10] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:51:49.436 [task-10] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGOUT for user: admin
2026-02-20 16:51:49.436 [task-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:49.436] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:49.437 [task-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:49.437] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:51:57.466 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:57.466] TRANSACTION START: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 16:51:57.467 [http-nio-8080-exec-2] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 authentication successful for user: 113687644831698073835
2026-02-20 16:51:57.467 [http-nio-8080-exec-2] INFO  c.s.s.OAuth2LoginSuccessHandler - OAuth2 user details - Email: yawanokye99@gmail.com, Name: Eugene Anokye, Provider: google
2026-02-20 16:51:57.469 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.email=?
2026-02-20 16:51:57.473 [http-nio-8080-exec-2] INFO  c.s.s.OAuth2LoginSuccessHandler - JWT token generated for OAuth2 user: eugene_6177
2026-02-20 16:51:57.473 [http-nio-8080-exec-2] INFO  c.s.s.OAuth2LoginSuccessHandler - Redirecting to frontend: http://localhost:5173/oauth2/callback?token=eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww&provider=google
2026-02-20 16:51:57.473 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:57.473] TRANSACTION COMMIT: OAuth2LoginSuccessHandler.onAuthenticationSuccess(HttpServletRequest, HttpServletResponse, Authentication)
2026-02-20 16:51:57.475 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:57.475] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, LOGIN_SUCCESS, 0:0:0:0:0:0:0:1, Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36 Edg/145.0.0.0, ***REDACTED***, true]
2026-02-20 16:51:57.475 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:57.475] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:57.475 [task-11] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:51:57.478 [task-11] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: LOGIN_SUCCESS for user: eugene_6177
2026-02-20 16:51:57.478 [task-11] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:51:57.478] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, String, String, Boolean)
2026-02-20 16:51:57.478 [task-11] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:51:57.478] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:52:01.934 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:01.934] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:01.934 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:01.934] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:01.937 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1758146179 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:01.937 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:01.937] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:01.937 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:01.937] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:01.938 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:01.939 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:01.939] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:01.939 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:01.939] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:01.942 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1758146179 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:01.945 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:01.963 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2000999177 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:01.963 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:01.963] ENTERING: OrderServiceImpl.getOrders with arguments: [24, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:52:01.963 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:01.963] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:52:01.965 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:52:01.976 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:52:01.982 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:52:01.995 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:01.999 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:52:02.000 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:52:02.003 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:02.005 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:02.005 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.005] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:52:02.006 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.006] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:52:02.007 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2000999177 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:02.013 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@634575258 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:02.014 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.014] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:02.016 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.016] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:02.021 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:02.029 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.029] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:02.029 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.029] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:02.030 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@634575258 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:02.033 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2115124631 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:02.033 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.033] ENTERING: ReviewServiceImpl.getReviewsByUser with arguments: [24]
2026-02-20 16:52:02.035 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.035] TRANSACTION START: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 16:52:02.040 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.user_id=?
2026-02-20 16:52:02.049 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:02.052 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:52:02.054 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.054] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByUser(Integer)
2026-02-20 16:52:02.054 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.054] EXITING: ReviewServiceImpl.getReviewsByUser returned: ArrayList
2026-02-20 16:52:02.054 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2115124631 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:02.059 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2103306772 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:02.059 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.059] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 16:52:02.059 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.059] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:02.060 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:02.060 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:02.063 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:02.063] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:02.063 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:02.063] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:52:02.064 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2103306772 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.299 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:07.299 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:07.299 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:07.299 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:07.299 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@769791284 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:07.299 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@440198072 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:07.299 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:07.299 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.299] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:07.300 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.300] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.300 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.300] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.300 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:07.300 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:07.302 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.302] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.302 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.302] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:07.302 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.302] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.302 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.302] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:07.302 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@440198072 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.302 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@769791284 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:07.304 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:07.304 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:07.306 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:07.307 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1978598090 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:07.307 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.307] ENTERING: CategoryServiceImpl.getAllCategories with arguments: []
2026-02-20 16:52:07.309 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.309] TRANSACTION START: CategoryServiceImpl.getAllCategories()
2026-02-20 16:52:07.312 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0
2026-02-20 16:52:07.314 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:07.316 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.316] TRANSACTION COMMIT: CategoryServiceImpl.getAllCategories()
2026-02-20 16:52:07.316 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.316] EXITING: CategoryServiceImpl.getAllCategories returned: ArrayList
2026-02-20 16:52:07.316 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1978598090 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.316 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 10ms
2026-02-20 16:52:07.317 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:07.322 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.322] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:07.322 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.322] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:07.323 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1662037709 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:07.323 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.323] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:07.323 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.323] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.324 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:07.325 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.325] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.325 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.325] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:07.326 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1662037709 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.326 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:07.328 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:07.328 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:07.328 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:07.346 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1142286989 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:07.347 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.347] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@326251d3, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:07.347 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.347] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:07.354 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:07.356 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.357 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.359 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.360 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.360 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.360 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.360 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.363 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.365 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:07.367 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:07.368 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.368] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:07.368 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.368] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:07.368 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1142286989 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:07.369 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 55ms
2026-02-20 16:52:07.369 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:07.376 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.376] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:07.376 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.376] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:07.376 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@834066752 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:07.376 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.376] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:07.378 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.378] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.378 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:07.379 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.379] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:07.379 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.379] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:07.379 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@834066752 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.381 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:07.383 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:07.383 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1599899357 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:07.383 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.383] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@46742569, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:07.383 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.383] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:07.385 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:07.387 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.388 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.389 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.392 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.393 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.394 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.395 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.398 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:07.402 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:07.404 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:07.405 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:07.405] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:07.405 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:07.405] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:07.405 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1599899357 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:07.406 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 23ms
2026-02-20 16:52:07.406 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:09.099 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.099] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:09.101 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.099] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:09.103 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.103] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:09.103 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.103] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:09.103 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@66735914 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:09.103 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.103] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:09.104 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.103] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.104 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:09.104 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1335442420 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:09.104 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.104] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:09.105 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.105] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.105 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:09.105 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.105] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.105 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.105] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:09.105 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@66735914 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:09.106 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.106] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.106 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.106] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:09.106 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1335442420 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:09.107 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:09.107 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:09.110 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:09.110 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:09.110 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 16:52:09.110 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:09.110 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@230263083 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:09.110 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.110] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:09.110 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.110] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:09.114 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:09.115 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.115] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:09.115 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.115] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:09.115 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1484524814 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:09.117 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.117] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:09.117 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.117] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.117 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:09.118 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.118] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:09.118 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.118] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:09.118 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.118] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.118 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@230263083 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:09.118 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.118] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:09.118 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 8ms
2026-02-20 16:52:09.118 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:09.118 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1484524814 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:09.120 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:09.121 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.121] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:09.122 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.122] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:09.122 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:09.122 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 16:52:09.122 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:09.122 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@212374746 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:09.122 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.122] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:09.123 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.122] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.123 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:09.125 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:09.125] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:09.125 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:09.125] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:09.125 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@212374746 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:09.126 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:09.128 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:09.129 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-20 16:52:09.130 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:10.523 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.523] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:10.525 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.525] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:10.527 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@919515151 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:10.528 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.528] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:10.528 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:10.528] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:10.529 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:10.531 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:10.530] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:10.531 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.531] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:10.531 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@919515151 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:10.532 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:10.540 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@319617667 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:10.540 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.540] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[41]]
2026-02-20 16:52:10.540 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:10.540] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:10.540 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:10.543 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:10.544 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:10.544] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:10.544 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:10.544] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:52:10.545 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@319617667 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:13.681 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.681] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:13.681 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.681] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:13.681 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.681] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:13.681 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.681] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:13.682 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@967354561 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:13.682 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@476982844 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:13.682 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.682] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:13.682 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.682] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:13.682 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.682] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.682 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.682] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.684 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:13.684 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:13.685 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.685] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.685 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.685] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.685 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.685] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:13.685 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.685] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:13.685 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@967354561 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:13.685 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@476982844 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:13.687 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:13.688 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:13.692 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:13.693 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:13.693 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@255718043 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:13.693 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:13.693 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:13.693 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.693] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@6909fa49, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:13.693 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.693] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:13.693 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:13.695 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.697 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.697 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.697] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:13.697 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.697] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:13.697 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@310406734 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:13.697 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.697 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.697] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:13.697 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.697] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.698 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:13.699 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.699 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.699] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.699 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.699 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.699] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:13.700 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@310406734 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:13.700 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.701 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:13.702 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:13.702 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.702 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:13.702 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:13.707 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.709 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:13.710 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:13.712 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.712] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:13.712 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.712] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:13.712 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@255718043 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:13.712 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 20ms
2026-02-20 16:52:13.712 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:13.715 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.715] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:13.715 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.715] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:13.717 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1891441417 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:13.717 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.717] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:13.717 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.717] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.718 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:13.720 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.720] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:13.720 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.720] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:13.721 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1891441417 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:13.723 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:13.725 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:13.726 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1323994663 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:13.726 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.726] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@39456bc1, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:13.726 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.726] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:13.726 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:13.728 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.729 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.730 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.732 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.733 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.735 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.735 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.738 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:13.741 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:13.742 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:13.744 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:13.744] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:13.744 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:13.744] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:13.745 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1323994663 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:13.745 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 20ms
2026-02-20 16:52:13.745 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:17.556 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.556] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:17.556 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.556] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:17.557 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1908009175 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:17.558 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.558] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:17.558 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.558] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:17.558 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:17.560 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.559] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:17.560 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.560] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:17.560 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1908009175 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:17.560 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:17.588 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@685fbe52]
2026-02-20 16:52:17.589 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.589] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@685fbe52]
2026-02-20 16:52:17.589 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.589] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:17.589 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.589] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:17.590 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.590] ENTERING: ProductServiceImpl.getProductById with arguments: [5]
2026-02-20 16:52:17.592 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.592] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:52:17.592 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:17.594 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:17.595 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.595] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:52:17.595 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.595] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 16:52:17.597 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.597] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [5, 1]
2026-02-20 16:52:17.598 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.598] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:17.607 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:17.609 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.609] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:17.609 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.609] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:17.614 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-20 16:52:17.620 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-20 16:52:17.642 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.642] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:17.642 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:17.642] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:17.642 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:17.642] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-20 16:52:17.653 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 65ms
2026-02-20 16:52:17.653 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-20 16:52:20.477 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.477] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:20.477 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.477] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:20.477 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.477] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:20.477 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.477] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:20.478 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@369827456 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:20.478 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@406327327 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:20.478 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.478] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:20.478 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.478] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:20.478 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.478] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.478 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.478] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.478 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:20.478 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:20.482 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.482] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.482 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.482] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:20.482 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.482] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.483 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.483] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:20.483 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@369827456 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:20.483 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@406327327 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:20.484 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:20.484 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:20.486 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:20.486 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:20.486 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@196519038 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:20.487 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.487] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:20.487 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1913823913 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:20.487 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.487] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:20.487 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.487] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:20.488 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.488] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:20.488 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:20.488 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:20.490 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:20.490 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:20.490 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.490] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:20.490 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.490] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:20.492 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@196519038 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:20.492 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 6ms
2026-02-20 16:52:20.492 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:20.492 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.492] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:20.492 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.492] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:20.493 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1913823913 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:20.493 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 7ms
2026-02-20 16:52:20.493 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:20.495 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.495] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:20.495 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.495] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:20.497 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.497] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:20.497 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1697764168 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:20.497 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.497] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:20.498 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.498] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:20.498 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.498] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.498 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@275216069 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:20.498 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.498] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:20.498 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:20.498 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.498] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.499 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:20.500 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.500] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.500 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.500] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:20.500 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1697764168 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:20.500 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:20.500] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:20.500 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:20.500] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:20.502 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@275216069 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:20.502 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:20.502 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:20.504 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:20.504 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:20.505 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 1ms
2026-02-20 16:52:20.505 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:20.505 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-20 16:52:20.505 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:22.347 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.347] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:22.347 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.347] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:22.348 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1972207732 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:22.348 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.348] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:22.348 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.348] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.349 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:22.350 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.350] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.350 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.350] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:22.351 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1972207732 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:22.352 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:22.354 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [45, 2]
2026-02-20 16:52:22.355 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [45, 2]
2026-02-20 16:52:22.356 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.356] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [45, 2]
2026-02-20 16:52:22.356 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.356] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [45, 2]
2026-02-20 16:52:22.356 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.356] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:22.356 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.356] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:22.359 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-20 16:52:22.363 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-20 16:52:22.365 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.365] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [5, 2]
2026-02-20 16:52:22.365 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.365] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:22.367 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:22.367 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.367] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:22.367 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.367] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:22.371 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.371] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:22.371 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.371] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:22.371 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.371] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-20 16:52:22.371 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 16ms
2026-02-20 16:52:22.380 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-20 16:52:22.391 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 36ms
2026-02-20 16:52:22.392 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-20 16:52:22.395 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.395] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:22.395 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.395] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:22.396 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.396] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:22.396 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.396] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:22.397 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1468966610 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:22.397 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.397] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:22.397 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2111559397 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:22.397 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.397] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.397 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.397] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:22.397 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.397] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.398 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:22.398 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:22.398 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.398] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.398 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.398] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:22.398 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.398] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:22.398 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.398] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:22.398 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1468966610 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:22.398 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2111559397 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:22.400 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:22.400 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:22.401 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:22.401 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:22.402 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1028457223 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:22.402 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1289512465 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:22.402 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.402] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:22.402 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.402] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:22.402 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.402] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:22.402 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.402] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:22.402 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:22.402 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:22.403 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:22.403 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:22.404 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.404] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:22.404 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:22.404] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:22.404 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.404] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:22.404 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:22.404] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:22.405 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1289512465 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:22.405 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1028457223 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:22.405 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 3ms
2026-02-20 16:52:22.405 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 4ms
2026-02-20 16:52:22.405 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:22.405 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:23.474 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.474] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:23.475 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.475] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:23.475 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1924132206 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:23.476 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.476] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:23.476 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.476] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:23.476 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:23.478 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.478] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:23.478 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.478] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:23.478 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1924132206 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:23.479 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:23.511 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.512 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@549100646 wrapping org.postgresql.jdbc.PgConnection@3638a852] to 8
2026-02-20 16:52:23.514 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.514 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.514] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.516 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.516] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.517 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.517] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:23.518 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.518] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:23.518 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.518] ENTERING: UserServiceImpl.getUserById with arguments: [24]
2026-02-20 16:52:23.520 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.520] TRANSACTION START: UserServiceImpl.getUserById(Integer)
2026-02-20 16:52:23.521 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:52:23.523 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.523] TRANSACTION COMMIT: UserServiceImpl.getUserById(Integer)
2026-02-20 16:52:23.523 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.523] EXITING: UserServiceImpl.getUserById returned: UserResponse
2026-02-20 16:52:23.523 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.523] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[45]]
2026-02-20 16:52:23.523 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.523] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:23.525 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:23.526 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:23.526 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.526] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:23.526 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.526] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:52:23.528 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.528] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [45, 2]
2026-02-20 16:52:23.528 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.528] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:23.529 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:23.530 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.530] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:23.530 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.530] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.531] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:23.531] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.createOrder(CreateOrderRequest) failed after 15ms with exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:23.531] EXCEPTION in OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: ValidationException
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.531 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Insufficient stock for product: Ralph Lauren Polo Shirt
	at com.shopjoy.service.impl.OrderServiceImpl.lambda$validateStockAndCalculateTotal$0(OrderServiceImpl.java:587)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:214)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1716)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:693)
	at com.shopjoy.service.impl.OrderServiceImpl.validateStockAndCalculateTotal(OrderServiceImpl.java:592)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:52:23.532 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.createOrder(CreateOrderRequest) after 18ms with exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.532 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@549100646 wrapping org.postgresql.jdbc.PgConnection@3638a852] to 2
2026-02-20 16:52:23.533 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@5ef89b10]
2026-02-20 16:52:23.533 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:23.533 [http-nio-8080-exec-9] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Insufficient stock for product: Ralph Lauren Polo Shirt
	at com.shopjoy.service.impl.OrderServiceImpl.lambda$validateStockAndCalculateTotal$0(OrderServiceImpl.java:587)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:214)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1716)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:693)
	at com.shopjoy.service.impl.OrderServiceImpl.validateStockAndCalculateTotal(OrderServiceImpl.java:592)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:52:23.533 [http-nio-8080-exec-9] WARN  c.s.exception.GlobalExceptionHandler - Business validation failed: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:31.121 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.120] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:31.121 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.121] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:31.121 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.121] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:31.121 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.121] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:31.122 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1740285103 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:31.122 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1895319721 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:31.122 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.122] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:31.122 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.122] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:31.122 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.122] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.122 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.122] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.122 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:31.122 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:31.123 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.123] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.123 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.123] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.123 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.123] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:31.123 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.123] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:31.124 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1740285103 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:31.124 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1895319721 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:31.125 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:31.125 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:31.127 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:31.127 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:31.127 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:31.128 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:31.128 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1605718380 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:31.129 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.129] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@3c27daa5, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:31.129 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.129] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:31.130 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:31.132 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.132] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:31.132 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.132 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.132] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:31.134 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1535499831 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:31.134 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.134 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.134] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:31.134 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.134] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.134 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:31.134 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.135 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.135 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.135] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.135 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.135] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:31.135 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1535499831 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:31.135 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.137 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.137 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:31.137 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.138 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:31.138 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:31.138 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:31.138 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.141 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:31.143 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:31.145 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.143] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:31.145 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.145] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:31.145 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1605718380 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:31.145 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 17ms
2026-02-20 16:52:31.145 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:31.148 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.148] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:31.148 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.148] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:31.148 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1040179663 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:31.150 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.150] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:31.151 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.151] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.151 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:31.152 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.152] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:31.152 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.152] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:31.152 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1040179663 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:31.154 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:31.156 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:31.156 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@527643579 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:31.156 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.156] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@62d97eb0, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:31.156 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.156] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:31.157 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:31.159 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.160 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.160 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.160 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.162 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.163 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.164 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.165 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:31.168 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:31.168 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:31.170 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:31.170] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:31.170 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:31.170] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:31.171 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@527643579 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:31.171 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 15ms
2026-02-20 16:52:31.171 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:33.394 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.394] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:33.394 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.394] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:33.395 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1893352884 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:33.396 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.396] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:33.396 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.396] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:33.396 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:33.398 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.398] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:33.398 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.398] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:33.398 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1893352884 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:33.399 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:33.402 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getReviewsByProduct with arguments: [5]
2026-02-20 16:52:33.402 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1598834122 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:33.403 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.403] ENTERING: ReviewServiceImpl.getReviewsByProduct with arguments: [5]
2026-02-20 16:52:33.403 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.403] TRANSACTION START: ReviewServiceImpl.getReviewsByProduct(Integer)
2026-02-20 16:52:33.406 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.review_id,r1_0.comment,r1_0.created_at,r1_0.helpful_count,r1_0.is_verified_purchase,r1_0.product_id,r1_0.rating,r1_0.title,r1_0.updated_at,r1_0.user_id from reviews r1_0 where r1_0.product_id=?
2026-02-20 16:52:33.414 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.414] TRANSACTION COMMIT: ReviewServiceImpl.getReviewsByProduct(Integer)
2026-02-20 16:52:33.414 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.414] EXITING: ReviewServiceImpl.getReviewsByProduct returned: ArrayList
2026-02-20 16:52:33.414 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1598834122 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:33.415 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getReviewsByProduct responded in 13ms
2026-02-20 16:52:33.415 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getReviewsByProduct returned: ResponseEntity
2026-02-20 16:52:33.419 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.419] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:33.419 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.419] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:33.421 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2116336378 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:33.421 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.421] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:33.421 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.421] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:33.421 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:33.422 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:33.422] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:33.422 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:33.422] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:33.423 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2116336378 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:33.423 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:33.425 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ReviewController.getReviewsByProduct with arguments: [5]
2026-02-20 16:52:33.425 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ReviewController.getReviewsByProduct responded in 0ms
2026-02-20 16:52:33.425 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ReviewController.getReviewsByProduct returned: ResponseEntity
2026-02-20 16:52:43.579 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.579] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:43.579 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.579] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:43.580 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.580] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:43.580 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.580] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:43.581 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1794603242 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:43.582 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.582] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:43.582 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.582] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.583 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:43.585 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.585] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.585 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.585] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:43.586 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@847128061 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:43.586 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1794603242 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:43.586 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.586] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:43.586 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.586] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.588 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:43.589 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:43.589 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.589] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.589 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.589] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:43.590 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@847128061 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:43.590 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:43.590 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:43.590 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 16:52:43.590 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:43.592 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:43.593 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 1ms
2026-02-20 16:52:43.593 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:43.596 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.596] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:43.596 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.596] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:43.597 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.597] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:43.597 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.597] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:43.597 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1707283023 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:43.597 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1171334703 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:43.597 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.597] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:43.597 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.597] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:43.598 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.598] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.598 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.598] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.598 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:43.598 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:43.599 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.599] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.599 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:43.599] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:43.599 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.599] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:43.599 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:43.599] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:43.599 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1707283023 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:43.599 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1171334703 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:43.601 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:43.601 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:43.603 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:43.603 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:43.604 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 1ms
2026-02-20 16:52:43.604 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 1ms
2026-02-20 16:52:43.604 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:43.604 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:45.070 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.070] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:45.070 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.070] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:45.072 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1570003037 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:45.072 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.072] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:45.072 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.072] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.073 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:45.073 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.073] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.073 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.073] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:45.074 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1570003037 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:45.074 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:45.076 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [45, 1]
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [45, 1]
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.077] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [45, 1]
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.077] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [45, 1]
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.077] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.077] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:45.077 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-20 16:52:45.078 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-20 16:52:45.081 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.081] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:45.081 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.081] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:45.081 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.081] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-20 16:52:45.081 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 4ms
2026-02-20 16:52:45.082 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-20 16:52:45.084 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 8ms
2026-02-20 16:52:45.085 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-20 16:52:45.089 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.089] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:45.089 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.089] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:45.089 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.089] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:45.089 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.089] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:45.090 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1664862316 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:45.090 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.090] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:45.090 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.090] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.090 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@454027281 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:45.090 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.090] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:45.090 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.090] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.090 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:45.091 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:45.091 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.091] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.091 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.091] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:45.091 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.091] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:45.091 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.091] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:45.092 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@454027281 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:45.092 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1664862316 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:45.093 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:45.093 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:45.094 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:45.094 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:45.095 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1568912658 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:45.095 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1020615357 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:45.095 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.095] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:45.095 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.095] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:45.095 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.095] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:45.095 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.095] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:45.096 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:45.096 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:45.097 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:45.097 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:45.098 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.098] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:45.098 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:45.098] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:45.098 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.098] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:45.098 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:45.098] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:45.099 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1568912658 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:45.099 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1020615357 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:45.099 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 5ms
2026-02-20 16:52:45.099 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 5ms
2026-02-20 16:52:45.099 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:45.099 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:46.107 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.107] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:46.107 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.107] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:46.109 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@378543697 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:46.109 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.109] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:46.109 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.109] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:46.109 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:46.110 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.110] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:46.110 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.110] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:46.110 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@378543697 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:46.112 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:46.114 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.114 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@415283082 wrapping org.postgresql.jdbc.PgConnection@41290689] to 8
2026-02-20 16:52:46.114 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.114 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.114] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.114 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.114] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.116 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.116] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:46.116 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.116] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:46.116 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.116] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[45]]
2026-02-20 16:52:46.116 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.116] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:46.116 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:46.118 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:46.118 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.118] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:46.118 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.118] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:52:46.119 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.119] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [45, 1]
2026-02-20 16:52:46.119 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.119] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:46.119 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:46.120 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.120] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:46.120 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.120] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.121] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:46.121] TRANSACTION ROLLBACK: OrderServiceImpl.createOrder(CreateOrderRequest) - Exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR c.shopjoy.aspect.TransactionAspect - Transaction OrderServiceImpl.createOrder(CreateOrderRequest) failed after 7ms with exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:46.121] EXCEPTION in OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception type: ValidationException
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Exception message: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.121 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Insufficient stock for product: Ralph Lauren Polo Shirt
	at com.shopjoy.service.impl.OrderServiceImpl.lambda$validateStockAndCalculateTotal$0(OrderServiceImpl.java:587)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:214)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1716)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:693)
	at com.shopjoy.service.impl.OrderServiceImpl.validateStockAndCalculateTotal(OrderServiceImpl.java:592)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:52:46.122 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION FAILED: OrderServiceImpl.createOrder(CreateOrderRequest) after 8ms with exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.122 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@415283082 wrapping org.postgresql.jdbc.PgConnection@41290689] to 2
2026-02-20 16:52:46.123 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - API ENDPOINT EXCEPTION in OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@2a914ec6]
2026-02-20 16:52:46.123 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Controller exception: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:46.123 [http-nio-8080-exec-4] ERROR com.shopjoy.aspect.LoggingAspect - Stack trace:
com.shopjoy.exception.ValidationException: Insufficient stock for product: Ralph Lauren Polo Shirt
	at com.shopjoy.service.impl.OrderServiceImpl.lambda$validateStockAndCalculateTotal$0(OrderServiceImpl.java:587)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:214)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1716)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:693)
	at com.shopjoy.service.impl.OrderServiceImpl.validateStockAndCalculateTotal(OrderServiceImpl.java:592)
	at com.shopjoy.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.TransactionAspect.monitorTransactionDuration(TransactionAspect.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorServicePerformance(PerformanceAspect.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.LoggingAspect.logDataModificationMethods(LoggingAspect.java:121)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54)
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:424)
	at org.springframework.cache.interceptor.CacheAspectSupport.evaluate(CacheAspectSupport.java:589)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:440)
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:404)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.service.impl.OrderServiceImpl$$SpringCGLIB$$0.createOrder(<generated>)
	at com.shopjoy.controller.OrderController.createOrder(OrderController.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:82)
	at com.shopjoy.aspect.PerformanceAspect.monitorApiPerformance(PerformanceAspect.java:101)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:63)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:56)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.shopjoy.controller.OrderController$$SpringCGLIB$$0.createOrder(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at com.shopjoy.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-02-20 16:52:46.125 [http-nio-8080-exec-4] WARN  c.s.exception.GlobalExceptionHandler - Business validation failed: Insufficient stock for product: Ralph Lauren Polo Shirt
2026-02-20 16:52:47.965 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.965] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:47.965 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.965] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:47.965 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.965] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:47.965 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.965] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:47.967 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@800093603 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:47.967 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1528921977 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:47.967 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.967] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:47.967 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.967] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:47.967 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.967] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.967 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.967] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.968 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:47.968 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:47.968 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.968] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.968 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.968] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.968 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.968] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:47.968 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.968] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:47.969 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@800093603 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:47.970 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1528921977 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:47.970 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:47.972 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:47.972 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:47.972 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:47.972 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:47.973 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:47.975 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@536306874 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:47.976 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.976] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@70a0d30, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:47.977 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.977] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:47.977 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:47.978 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.978] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:47.978 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.978] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:47.978 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.979 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@426396174 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:47.979 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.979] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:47.979 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.979] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.979 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.980 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:47.981 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.981 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.981] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.982 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.982] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:47.982 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.982 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@426396174 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:47.982 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.983 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:47.983 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.985 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CategoryController.getAllCategories with arguments: []
2026-02-20 16:52:47.985 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CategoryController.getAllCategories responded in 0ms
2026-02-20 16:52:47.985 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CategoryController.getAllCategories returned: ResponseEntity
2026-02-20 16:52:47.985 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.987 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:47.990 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:47.991 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:47.993 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.993] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:47.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.993] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:47.993 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@536306874 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:47.993 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 20ms
2026-02-20 16:52:47.993 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:47.998 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.998] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:47.998 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.998] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:47.998 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@660408480 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:47.999 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:47.999] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:47.999 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:47.999] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:47.999 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:48.000 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:48.000] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:48.000 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:48.000] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:48.000 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@660408480 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:48.002 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:48.004 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: ProductController.getProductsWithFilters with arguments: [null, null, null, null, null, null, null, true, 0, 8, productName, ASC]
2026-02-20 16:52:48.004 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@886153375 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:48.004 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:48.004] ENTERING: ProductServiceImpl.getProductsWithFilters with arguments: [com.shopjoy.dto.filter.ProductFilter@262928fc, Page request [number: 0, size 8, sort: productName: ASC], productName, ASC]
2026-02-20 16:52:48.004 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:48.004] TRANSACTION START: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:48.006 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?) order by p1_0.product_name fetch first ? rows only
2026-02-20 16:52:48.007 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.008 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.009 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.010 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.010 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.012 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.012 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.012 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:48.017 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from products p1_0 where (coalesce(?,'')='' or lower(p1_0.product_name) like lower(('%'||coalesce(?,'')||'%')) escape '' or lower(p1_0.description) like lower(('%'||coalesce(?,'')||'%')) escape '') and (? is null or p1_0.category_id=?) and (? is null or p1_0.price>=?) and (? is null or p1_0.price<=?) and (? is null or p1_0.brand=?) and (? is null or p1_0.is_active=?)
2026-02-20 16:52:48.018 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:52:48.020 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:48.020] TRANSACTION COMMIT: ProductServiceImpl.getProductsWithFilters(ProductFilter, Pageable, String, String)
2026-02-20 16:52:48.021 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:48.021] EXITING: ProductServiceImpl.getProductsWithFilters returned: PageImpl
2026-02-20 16:52:48.021 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@886153375 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:48.021 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint ProductController.getProductsWithFilters responded in 17ms
2026-02-20 16:52:48.021 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: ProductController.getProductsWithFilters returned: ResponseEntity
2026-02-20 16:52:50.852 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.852] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:50.852 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.852] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:50.853 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@396846117 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:50.853 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.853] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:50.853 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.853] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:50.854 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:50.854 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.854] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:50.855 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.855] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:50.855 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@396846117 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:50.856 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:50.858 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@55c86779]
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.859] ENTERING: CartServiceImpl.addToCart with arguments: [com.shopjoy.dto.request.AddToCartRequest@55c86779]
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.859] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.859] TRANSACTION START: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.859] ENTERING: ProductServiceImpl.getProductById with arguments: [36]
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.859] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:52:50.859 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:50.861 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:50.861 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.861] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:52:50.861 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.861] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 16:52:50.861 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.861] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [36, 1]
2026-02-20 16:52:50.862 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.862] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:50.862 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:50.863 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.863] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:50.863 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.863] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:50.865 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=? and ci1_0.product_id=?
2026-02-20 16:52:50.866 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into cart_items (added_at,product_id,quantity,user_id) values (?,?,?,?)
2026-02-20 16:52:50.867 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.867] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:50.867 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:50.867] TRANSACTION COMMIT: CartServiceImpl.addToCart(AddToCartRequest)
2026-02-20 16:52:50.867 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:50.867] EXITING: CartServiceImpl.addToCart returned: CartItemResponse
2026-02-20 16:52:50.868 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.addToCart responded in 10ms
2026-02-20 16:52:50.868 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.addToCart returned: ResponseEntity
2026-02-20 16:52:53.459 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.459] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:53.459 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.459] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:53.459 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.459] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:53.459 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.459] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:53.460 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1035934552 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:53.460 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1019421695 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:53.460 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.460] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:53.460 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.460] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:53.461 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.461] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.461 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.461] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.461 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:53.461 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:53.463 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.463] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.463 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.463] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.463 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.463] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:53.464 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.463] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:53.464 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1019421695 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:53.464 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1035934552 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:53.465 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:53.465 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:53.467 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:53.467 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:53.468 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1130756271 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:53.468 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1481493263 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:53.468 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.468] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:53.468 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.468] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:53.468 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.468] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:53.468 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.468] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:53.468 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:53.468 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:53.469 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:52:53.469 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:52:53.472 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.472] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:53.472 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.472] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:53.472 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.472] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:53.472 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.472] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:53.473 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1130756271 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:53.473 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1481493263 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:53.473 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 6ms
2026-02-20 16:52:53.473 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:53.473 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 6ms
2026-02-20 16:52:53.473 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:53.478 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.478] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:53.479 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.478] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:53.479 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.479] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:53.479 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.479] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:53.479 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1026538035 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:53.479 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.479] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:53.480 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.480] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.480 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1385228124 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:53.481 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.481] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:53.481 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.481] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.481 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:53.481 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:53.481 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.481] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.481 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.481] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:53.481 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:53.481] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:53.481 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1026538035 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:53.481 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:53.481] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:53.483 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1385228124 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:53.483 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:53.483 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:53.485 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:53.485 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:53.485 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 0ms
2026-02-20 16:52:53.485 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 0ms
2026-02-20 16:52:53.485 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:53.485 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:55.752 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.752] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:55.753 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.752] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:55.753 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@915889157 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:55.754 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.754] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:55.754 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.754] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.754 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:55.755 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.755] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.755 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.755] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:55.755 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@915889157 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:55.756 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:55.759 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.removeFromCart with arguments: [45]
2026-02-20 16:52:55.759 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.759] ENTERING: CartServiceImpl.removeFromCart with arguments: [45]
2026-02-20 16:52:55.760 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.760] TRANSACTION START: CartServiceImpl.removeFromCart(Integer)
2026-02-20 16:52:55.760 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.760] TRANSACTION START: CartServiceImpl.removeFromCart(Integer)
2026-02-20 16:52:55.761 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-20 16:52:55.763 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-20 16:52:55.770 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.770] TRANSACTION COMMIT: CartServiceImpl.removeFromCart(Integer)
2026-02-20 16:52:55.770 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.770] TRANSACTION COMMIT: CartServiceImpl.removeFromCart(Integer)
2026-02-20 16:52:55.770 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.770] EXITING: CartServiceImpl.removeFromCart returned: void
2026-02-20 16:52:55.772 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-20 16:52:55.786 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.removeFromCart responded in 27ms
2026-02-20 16:52:55.786 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.removeFromCart returned: ResponseEntity
2026-02-20 16:52:55.792 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.792] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:55.792 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.792] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:55.792 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.792] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:55.792 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.792] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:55.793 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1302363025 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:55.793 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.793] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:55.793 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@191395205 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:55.793 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.793] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.793 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.793] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:55.793 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.793] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.793 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:55.793 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:55.795 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.795] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.795 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.795] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:55.795 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1302363025 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:55.796 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.796] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:55.796 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:55.796 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.796] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:55.798 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@191395205 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:55.798 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:55.798 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:55.799 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@661769301 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:55.799 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.799] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:55.800 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.799] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:55.800 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:55.800 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:55.801 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@522182699 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:55.801 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.801] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:55.802 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.802] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:55.802 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:55.802 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:55.804 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:55.804 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.804] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:55.804 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.804] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:55.804 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@661769301 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:55.804 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 6ms
2026-02-20 16:52:55.804 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:55.804 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:55.804] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:55.804 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:55.804] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:55.805 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@522182699 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:55.806 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 6ms
2026-02-20 16:52:55.806 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:58.251 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.251] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:58.251 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.251] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:58.252 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@628426940 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:58.252 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.252] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:58.252 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.252] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.253 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:58.255 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.255] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.255 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.255] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:58.256 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@628426940 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:58.257 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:58.258 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.updateCartItemQuantity with arguments: [46, 2]
2026-02-20 16:52:58.258 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [46, 2]
2026-02-20 16:52:58.258 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.258] ENTERING: CartServiceImpl.updateCartItemQuantity with arguments: [46, 2]
2026-02-20 16:52:58.258 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.258] TRANSACTIONAL DATA MODIFICATION: CartServiceImpl.updateCartItemQuantity(Integer, int) with arguments: [46, 2]
2026-02-20 16:52:58.258 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.258] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:58.259 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.259] TRANSACTION START: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:58.259 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.user_id from cart_items ci1_0 where ci1_0.cart_item_id=?
2026-02-20 16:52:58.260 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 join products p1_0 on p1_0.product_id=ci1_0.product_id left join inventory i1_0 on p1_0.product_id=i1_0.product_id where ci1_0.cart_item_id=?
2026-02-20 16:52:58.262 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.262] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [36, 2]
2026-02-20 16:52:58.262 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.262] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:58.262 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:58.265 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.264] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:58.265 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.265] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:58.265 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.265] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:58.266 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.266] TRANSACTION COMMIT: CartServiceImpl.updateCartItemQuantity(Integer, int)
2026-02-20 16:52:58.266 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.266] EXITING: CartServiceImpl.updateCartItemQuantity returned: CartItemResponse
2026-02-20 16:52:58.266 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: CartServiceImpl.updateCartItemQuantity(Integer, int) in 8ms
2026-02-20 16:52:58.266 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - update cart_items set product_id=?,quantity=?,user_id=? where cart_item_id=?
2026-02-20 16:52:58.268 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.updateCartItemQuantity responded in 10ms
2026-02-20 16:52:58.268 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.updateCartItemQuantity returned: ResponseEntity
2026-02-20 16:52:58.272 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:58.272 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:58.272 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:58.272 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:58.272 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2129284446 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:58.272 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:58.272 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.272] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.272 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@190907015 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:58.272 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.272] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:58.272 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.272] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.273 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:58.273 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:58.273 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.273] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.273 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.273] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:58.275 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.275] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:58.275 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.275] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:58.275 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2129284446 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:58.275 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@190907015 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:58.276 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:58.276 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:58.278 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:58.278 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:58.278 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1839540105 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:58.278 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1419825702 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:58.278 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.278] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:58.278 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.278] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:58.278 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.278] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:58.278 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.278] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:58.279 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:58.279 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:58.279 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:58.279 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:58.280 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.280] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:58.280 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.280] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:58.280 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:58.280] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:58.280 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:58.280] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:58.280 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1419825702 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:58.282 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 4ms
2026-02-20 16:52:58.282 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:52:58.282 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1839540105 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:58.282 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 4ms
2026-02-20 16:52:58.282 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:59.208 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.208] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:59.209 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.209] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:59.210 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1709994207 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:59.210 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.210] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:59.210 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.210] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.210 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:59.212 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.212] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.212 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.212] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:59.212 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1709994207 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:59.214 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:59.216 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: OrderController.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@720f6fcc]
2026-02-20 16:52:59.216 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1013469341 wrapping org.postgresql.jdbc.PgConnection@41290689] to 8
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@720f6fcc]
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.218] ENTERING: OrderServiceImpl.createOrder with arguments: [com.shopjoy.dto.request.CreateOrderRequest@720f6fcc]
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.218] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.createOrder(CreateOrderRequest) with arguments: [com.shopjoy.dto.request.CreateOrderRequest@720f6fcc]
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.218] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.218] TRANSACTION START: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.218] ENTERING: ProductServiceImpl.getProductsByIds with arguments: [[46]]
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.218] TRANSACTION START: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:59.218 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:59.220 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:52:59.221 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.221] TRANSACTION COMMIT: ProductServiceImpl.getProductsByIds(List)
2026-02-20 16:52:59.221 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.221] EXITING: ProductServiceImpl.getProductsByIds returned: ArrayList
2026-02-20 16:52:59.222 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.222] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [46, 2]
2026-02-20 16:52:59.222 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.222] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:59.222 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:59.223 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.223] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:52:59.223 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.223] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:52:59.224 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.224] ENTERING: InventoryServiceImpl.reserveStock with arguments: [46, 2]
2026-02-20 16:52:59.224 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.224] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:52:59.224 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.224] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:52:59.229 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:52:59.231 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.231] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:52:59.231 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.231] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:52:59.232 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.232] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 16:52:59.234 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into orders (created_at,notes,order_date,payment_method,payment_status,shipping_address,status,total_amount,updated_at,user_id) values (?,?,?,?,?,?,?,?,?,?)
2026-02-20 16:52:59.263 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 16:52:59.269 [task-12] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.269] ENTERING: SecurityAuditServiceImpl.logEvent with arguments: [eugene_6177, ORDER_CREATED, Order #31 created with 1 items, total amount: $279.98, true]
2026-02-20 16:52:59.269 [task-12] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.269] TRANSACTION START: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:52:59.273 [task-12] DEBUG org.hibernate.SQL - insert into security_audit_logs (details,event_type,ip_address,success,timestamp,user_agent,username) values (?,?,?,?,?,?,?)
2026-02-20 16:52:59.274 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:52:59.274 [task-12] DEBUG c.s.s.impl.SecurityAuditServiceImpl - Logged security event: ORDER_CREATED for user: eugene_6177
2026-02-20 16:52:59.274 [task-12] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.274] TRANSACTION COMMIT: SecurityAuditServiceImpl.logEvent(String, SecurityEventType, String, Boolean)
2026-02-20 16:52:59.274 [task-12] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.274] EXITING: SecurityAuditServiceImpl.logEvent returned: void
2026-02-20 16:52:59.276 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:52:59.278 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.278] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:59.278 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.278] TRANSACTION COMMIT: OrderServiceImpl.createOrder(CreateOrderRequest)
2026-02-20 16:52:59.278 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.278] EXITING: OrderServiceImpl.createOrder returned: OrderResponse
2026-02-20 16:52:59.278 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.createOrder(CreateOrderRequest) in 60ms
2026-02-20 16:52:59.279 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 16:52:59.285 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1013469341 wrapping org.postgresql.jdbc.PgConnection@41290689] to 2
2026-02-20 16:52:59.288 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint OrderController.createOrder responded in 72ms
2026-02-20 16:52:59.288 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: OrderController.createOrder returned: ResponseEntity
2026-02-20 16:52:59.299 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.299] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:59.299 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.299] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:59.299 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@880996744 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:59.299 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.299] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:59.301 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.301] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.301 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:59.302 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.302] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.302 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.302] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:59.303 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@880996744 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:59.304 [http-nio-8080-exec-1] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:59.306 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.clearCart with arguments: [24]
2026-02-20 16:52:59.306 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.306] ENTERING: CartServiceImpl.clearCart with arguments: [24]
2026-02-20 16:52:59.307 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.307] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 16:52:59.307 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.307] TRANSACTION START: CartServiceImpl.clearCart(Integer)
2026-02-20 16:52:59.308 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:59.309 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:52:59.310 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.310] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 16:52:59.310 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.310] TRANSACTION COMMIT: CartServiceImpl.clearCart(Integer)
2026-02-20 16:52:59.310 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.310] EXITING: CartServiceImpl.clearCart returned: void
2026-02-20 16:52:59.312 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - delete from cart_items where cart_item_id=?
2026-02-20 16:52:59.314 [http-nio-8080-exec-1] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.clearCart responded in 8ms
2026-02-20 16:52:59.314 [http-nio-8080-exec-1] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.clearCart returned: ResponseEntity
2026-02-20 16:52:59.321 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.321] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:59.322 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.322] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:59.322 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.322] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:52:59.322 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.322] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:52:59.322 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@910297226 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:59.322 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.322] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:59.322 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@21934057 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:59.322 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.322] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:52:59.322 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.322] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.323 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.323] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.323 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:59.323 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:52:59.325 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.325] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.325 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.325] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:52:59.325 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.325] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:59.325 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.325] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:52:59.326 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@910297226 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:59.326 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@21934057 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:59.327 [http-nio-8080-exec-7] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:59.327 [http-nio-8080-exec-9] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:52:59.329 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartTotal with arguments: [24]
2026-02-20 16:52:59.329 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT CALLED: CartController.getCartItems with arguments: [24]
2026-02-20 16:52:59.329 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1592088181 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:52:59.329 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1764379524 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:52:59.329 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.329] ENTERING: CartServiceImpl.getCartTotal with arguments: [24]
2026-02-20 16:52:59.329 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.329] ENTERING: CartServiceImpl.getCartItems with arguments: [24]
2026-02-20 16:52:59.329 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.329] TRANSACTION START: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:59.329 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.329] TRANSACTION START: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:59.331 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:59.331 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select ci1_0.cart_item_id,ci1_0.added_at,ci1_0.product_id,ci1_0.quantity,ci1_0.user_id from cart_items ci1_0 where ci1_0.user_id=?
2026-02-20 16:52:59.332 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.332] TRANSACTION COMMIT: CartServiceImpl.getCartTotal(Integer)
2026-02-20 16:52:59.332 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:52:59.332] TRANSACTION COMMIT: CartServiceImpl.getCartItems(Integer)
2026-02-20 16:52:59.332 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.332] EXITING: CartServiceImpl.getCartTotal returned: Double
2026-02-20 16:52:59.332 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:52:59.332] EXITING: CartServiceImpl.getCartItems returned: ArrayList
2026-02-20 16:52:59.332 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1592088181 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:52:59.332 [http-nio-8080-exec-9] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1764379524 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:52:59.333 [http-nio-8080-exec-7] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartTotal responded in 4ms
2026-02-20 16:52:59.333 [http-nio-8080-exec-9] INFO  c.shopjoy.aspect.PerformanceAspect - API endpoint CartController.getCartItems responded in 4ms
2026-02-20 16:52:59.333 [http-nio-8080-exec-7] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartTotal returned: ResponseEntity
2026-02-20 16:52:59.333 [http-nio-8080-exec-9] INFO  com.shopjoy.aspect.LoggingAspect - API ENDPOINT COMPLETED: CartController.getCartItems returned: ResponseEntity
2026-02-20 16:53:00.851 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.851] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:00.852 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.852] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:00.852 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1962919466 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:00.854 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.854] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:00.854 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:00.854] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:00.854 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:00.855 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:00.855] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:00.855 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.855] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:00.855 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1962919466 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:00.856 [http-nio-8080-exec-8] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:00.873 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1046863789 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:00.875 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.875] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-20 16:53:00.875 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:00.875] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:00.876 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:53:00.879 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:00.881 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:00.882 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:00.882 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:53:00.883 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:00.883 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:00.885 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:00.886 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:00.886 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:00.887 [http-nio-8080-exec-8] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:00.887] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:00.887 [http-nio-8080-exec-8] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:00.887] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:53:00.887 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1046863789 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:06.440 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.440] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:06.440 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.440] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:06.440 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@381088098 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:06.440 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.440] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:06.440 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.440] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.442 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:06.442 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.442] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.442 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.442] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:06.443 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@381088098 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:06.443 [http-nio-8080-exec-5] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:06.474 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1930389718 wrapping org.postgresql.jdbc.PgConnection@41290689] to 8
2026-02-20 16:53:06.475 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION STARTED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [31, com.shopjoy.dto.request.UpdateOrderRequest@2b4dd5c0]
2026-02-20 16:53:06.475 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.475] ENTERING: OrderServiceImpl.updateOrder with arguments: [31, com.shopjoy.dto.request.UpdateOrderRequest@2b4dd5c0]
2026-02-20 16:53:06.475 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.475] TRANSACTIONAL DATA MODIFICATION: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) with arguments: [31, com.shopjoy.dto.request.UpdateOrderRequest@2b4dd5c0]
2026-02-20 16:53:06.475 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.475] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-20 16:53:06.475 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.475] TRANSACTION START: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-20 16:53:06.476 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.order_id=?
2026-02-20 16:53:06.481 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_item_id,oi1_0.created_at,oi1_0.order_id,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.483 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.483] ENTERING: InventoryServiceImpl.releaseStock with arguments: [46, 2]
2026-02-20 16:53:06.483 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.483] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-20 16:53:06.483 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.483] TRANSACTION START: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-20 16:53:06.485 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:53:06.486 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.486] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-20 16:53:06.486 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.486] TRANSACTION COMMIT: InventoryServiceImpl.releaseStock(Integer, int)
2026-02-20 16:53:06.486 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.486] EXITING: InventoryServiceImpl.releaseStock returned: void
2026-02-20 16:53:06.488 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.488] ENTERING: ProductServiceImpl.getProductById with arguments: [46]
2026-02-20 16:53:06.488 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.488] TRANSACTION START: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:53:06.489 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.490 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.490 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.490] TRANSACTION COMMIT: ProductServiceImpl.getProductById(Integer)
2026-02-20 16:53:06.490 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.490] EXITING: ProductServiceImpl.getProductById returned: ProductResponse
2026-02-20 16:53:06.490 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.490] ENTERING: InventoryServiceImpl.hasAvailableStock with arguments: [46, 2]
2026-02-20 16:53:06.492 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.492] TRANSACTION START: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:53:06.493 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:53:06.494 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 16:53:06.495 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - delete from order_items where order_item_id=?
2026-02-20 16:53:06.495 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:53:06.496 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.496] TRANSACTION COMMIT: InventoryServiceImpl.hasAvailableStock(Integer, int)
2026-02-20 16:53:06.496 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.496] EXITING: InventoryServiceImpl.hasAvailableStock returned: Boolean
2026-02-20 16:53:06.497 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.497] ENTERING: InventoryServiceImpl.reserveStock with arguments: [46, 2]
2026-02-20 16:53:06.497 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.497] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:53:06.497 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.497] TRANSACTION START: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:53:06.498 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location from inventory i1_0 where i1_0.product_id=?
2026-02-20 16:53:06.498 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.498] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:53:06.498 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.498] TRANSACTION COMMIT: InventoryServiceImpl.reserveStock(Integer, int)
2026-02-20 16:53:06.499 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.499] EXITING: InventoryServiceImpl.reserveStock returned: void
2026-02-20 16:53:06.500 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into order_items (created_at,order_id,product_id,quantity,subtotal,unit_price) values (?,?,?,?,?,?)
2026-02-20 16:53:06.504 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.504 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:53:06.505 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.505] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-20 16:53:06.505 [http-nio-8080-exec-5] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.505] TRANSACTION COMMIT: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest)
2026-02-20 16:53:06.505 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.505] EXITING: OrderServiceImpl.updateOrder returned: OrderResponse
2026-02-20 16:53:06.505 [http-nio-8080-exec-5] INFO  com.shopjoy.aspect.LoggingAspect - DATA MODIFICATION COMPLETED: OrderServiceImpl.updateOrder(Integer, UpdateOrderRequest) in 30ms
2026-02-20 16:53:06.507 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update orders set created_at=?,notes=?,order_date=?,payment_method=?,payment_status=?,shipping_address=?,status=?,total_amount=?,updated_at=?,user_id=? where order_id=?
2026-02-20 16:53:06.508 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update inventory set last_restocked=?,product_id=?,quantity_in_stock=?,reorder_level=?,updated_at=?,warehouse_location=? where inventory_id=?
2026-02-20 16:53:06.510 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1930389718 wrapping org.postgresql.jdbc.PgConnection@41290689] to 2
2026-02-20 16:53:06.521 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.521] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:06.521 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.521] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:06.522 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1153918453 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:53:06.522 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.522] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:06.523 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.523] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.523 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.523] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:06.523 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.523] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:06.523 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:06.523 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@852262949 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:06.523 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.523] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:06.523 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.523] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.523 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.523] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.524 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:06.524 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.524] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:06.524 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1153918453 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:53:06.525 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.525] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.525 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.525] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:06.525 [http-nio-8080-exec-6] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:06.525 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@852262949 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:06.526 [http-nio-8080-exec-3] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:06.531 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@679336729 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:06.531 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@436019818 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:53:06.531 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.531] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:53:06.531 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.531] ENTERING: OrderServiceImpl.getOrders with arguments: [null, null, Page request [number: 0, size 20, sort: orderDate: DESC]]
2026-02-20 16:53:06.531 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.531] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.531 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.531] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.532 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:53:06.532 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where 1=1 order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:53:06.535 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:53:06.535 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(o1_0.order_id) from orders o1_0 where 1=1
2026-02-20 16:53:06.535 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.535 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.537 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.537 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.538 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.538 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.538 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:53:06.538 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id = any (?)
2026-02-20 16:53:06.539 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.539 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.539 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.539 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.541 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.541 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.542 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.542 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.542 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.542 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.544 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.544 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.544 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.544 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.545 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.545 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.545 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.545 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.547 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.547 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.548 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.548 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.549 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.549 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.550 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.550 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.551 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.552 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.554 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.554 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.554 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.554 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.555 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.555 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.556 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.556 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:53:06.557 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.557 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id = any (?)
2026-02-20 16:53:06.558 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.558 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.558 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.559 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.559 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.559 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.560 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.560 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.560 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.560 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.562 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.563 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.563 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.563 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.564 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.564 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.564 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.565 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.565 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.565 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.565 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.566 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.566 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.567 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.567 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.568 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.568 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.568 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.568 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.570 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.570 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.570 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.570 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.571 [http-nio-8080-exec-3] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.571] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.571 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.571 [http-nio-8080-exec-3] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.571] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:53:06.571 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@679336729 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:06.571 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.572 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.572] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.572 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.572] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:53:06.572 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@436019818 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:53:06.584 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@274180566 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:53:06.584 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.584] ENTERING: UserServiceImpl.getUsersByIds with arguments: [[24, 3, 26]]
2026-02-20 16:53:06.585 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.584] TRANSACTION START: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:53:06.587 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id in (?,?,?)
2026-02-20 16:53:06.589 [http-nio-8080-exec-6] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.589] TRANSACTION COMMIT: UserServiceImpl.getUsersByIds(List)
2026-02-20 16:53:06.589 [http-nio-8080-exec-6] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.589] EXITING: UserServiceImpl.getUsersByIds returned: ListN
2026-02-20 16:53:06.589 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@274180566 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:53:06.615 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.615] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:06.615 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.615] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:06.616 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1413157739 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:53:06.616 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.616] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:06.616 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.616] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.616 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:06.617 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.617] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:06.618 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.618] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:06.618 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1413157739 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:53:06.618 [http-nio-8080-exec-2] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:06.623 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@81664283 wrapping org.postgresql.jdbc.PgConnection@3638a852] read-only
2026-02-20 16:53:06.623 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.623] ENTERING: OrderServiceImpl.getOrders with arguments: [24, OrderFilter(status=null, paymentStatus=null, startDate=null, endDate=null, minAmount=null, maxAmount=null, searchTerm=null), Page request [number: 0, size 10, sort: orderDate: DESC]]
2026-02-20 16:53:06.623 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.623] TRANSACTION START: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.625 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select o1_0.order_id,o1_0.created_at,o1_0.notes,o1_0.order_date,o1_0.payment_method,o1_0.payment_status,o1_0.shipping_address,o1_0.status,o1_0.total_amount,o1_0.updated_at,o1_0.user_id from orders o1_0 where o1_0.user_id=? order by o1_0.order_date desc offset ? rows fetch first ? rows only
2026-02-20 16:53:06.628 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.629 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.630 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.631 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.user_id=?
2026-02-20 16:53:06.632 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.632 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id = any (?)
2026-02-20 16:53:06.635 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select oi1_0.order_id,oi1_0.order_item_id,oi1_0.created_at,oi1_0.product_id,oi1_0.quantity,oi1_0.subtotal,oi1_0.unit_price from order_items oi1_0 where oi1_0.order_id=?
2026-02-20 16:53:06.637 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.product_id,p1_0.is_active,p1_0.brand,p1_0.category_id,p1_0.cost_price,p1_0.created_at,p1_0.description,p1_0.image_url,i1_0.inventory_id,i1_0.last_restocked,i1_0.product_id,i1_0.quantity_in_stock,i1_0.reorder_level,i1_0.updated_at,i1_0.warehouse_location,p1_0.price,p1_0.product_name,p1_0.sku,p1_0.updated_at from products p1_0 left join inventory i1_0 on p1_0.product_id=i1_0.product_id where p1_0.product_id=?
2026-02-20 16:53:06.638 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.category_id,c1_0.category_name,c1_0.created_at,c1_0.description from categories c1_0 where c1_0.category_id=?
2026-02-20 16:53:06.638 [http-nio-8080-exec-2] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:06.638] TRANSACTION COMMIT: OrderServiceImpl.getOrders(Integer, OrderFilter, Pageable)
2026-02-20 16:53:06.639 [http-nio-8080-exec-2] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:06.639] EXITING: OrderServiceImpl.getOrders returned: PageImpl
2026-02-20 16:53:06.640 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@81664283 wrapping org.postgresql.jdbc.PgConnection@3638a852]
2026-02-20 16:53:11.692 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:11.692] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:11.692 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:11.692] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:11.693 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1343225745 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:11.693 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:11.693] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:11.693 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:11.693] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:11.694 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:11.696 [http-nio-8080-exec-10] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:11.695] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:11.696 [http-nio-8080-exec-10] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:11.696] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:11.697 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1343225745 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:11.698 [http-nio-8080-exec-10] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:53:31.119 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:31.119] ENTERING: TokenBlacklistServiceImpl.isBlacklisted with arguments: [eyJhbGciOiJIUzUxMiJ9.eyJyb2xlIjoiQ1VTVE9NRVIiLCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJ1c2VySWQiOjI0LCJzdWIiOiJldWdlbmVfNjE3NyIsImlhdCI6MTc3MTYwNjMxNywiZXhwIjoxNzcxNjkyNzE3fQ.gVGOfxoYBsD3x306oI2QYohjGyTRU0qnEi7v0PgHW5o81cedhfd5yfkhAdbnudOsl8B0RG4hYSgzswrivgfcww]
2026-02-20 16:53:31.120 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:31.120] EXITING: TokenBlacklistServiceImpl.isBlacklisted returned: Boolean
2026-02-20 16:53:31.123 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1566481078 wrapping org.postgresql.jdbc.PgConnection@41290689] read-only
2026-02-20 16:53:31.123 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:31.123] ENTERING: CustomUserDetailsService.loadUserByUsername with arguments: [eugene_6177]
2026-02-20 16:53:31.123 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:31.123] TRANSACTION START: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:31.124 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.oauth_provider,u1_0.oauth_provider_id,u1_0.password_hash,u1_0.phone,u1_0.updated_at,u1_0.user_type,u1_0.username from users u1_0 where u1_0.username=?
2026-02-20 16:53:31.126 [http-nio-8080-exec-4] INFO  c.shopjoy.aspect.TransactionAspect - [2026-02-20 16:53:31.126] TRANSACTION COMMIT: CustomUserDetailsService.loadUserByUsername(String)
2026-02-20 16:53:31.126 [http-nio-8080-exec-4] INFO  com.shopjoy.aspect.LoggingAspect - [2026-02-20 16:53:31.126] EXITING: CustomUserDetailsService.loadUserByUsername returned: CustomUserDetails
2026-02-20 16:53:31.127 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1566481078 wrapping org.postgresql.jdbc.PgConnection@41290689]
2026-02-20 16:53:31.129 [http-nio-8080-exec-4] DEBUG c.s.config.JwtAuthenticationFilter - JWT authentication successful for user: eugene_6177
2026-02-20 16:55:24.052 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-20 16:55:24.062 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-20 16:55:24.075 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-20 16:55:24.079 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-20 16:55:24.092 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
